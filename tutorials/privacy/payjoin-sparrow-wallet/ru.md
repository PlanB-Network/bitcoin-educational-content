---
name: Payjoin - Sparrow Wallet
description: Как совершить транзакцию Payjoin в Sparrow Wallet?
---
![обложка учебника sparrow payjoin](assets/cover.webp)

_**ВНИМАНИЕ:** После ареста основателей Samourai Wallet и изъятия их серверов 24 апреля, Payjoins Stowaway в Samourai Wallet теперь работает только путём ручного обмена PSBT между участвующими сторонами, при условии, что оба пользователя подключены к своему Dojo. Что касается Sparrow, Payjoins через BIP78 по-прежнему работают. Однако эти инструменты могут быть перезапущены в ближайшие недели. Тем временем вы всегда можете прочитать эту статью, чтобы понять теоретическое функционирование payjoins._

_Мы внимательно следим за развитием этого дела, а также за развитием связанных инструментов. Будьте уверены, что мы обновим этот учебник, как только появится новая информация._

_Этот учебник предоставляется только в образовательных и информационных целях. Мы не поддерживаем и не поощряем использование этих инструментов в преступных целях. Каждый пользователь несет ответственность за соблюдение законов в своей юрисдикции._

---

> *"Заставьте шпионов блокчейна пересмотреть всё, что они думают, что знают."*

Payjoin - это специфическая структура транзакции Bitcoin, которая улучшает конфиденциальность пользователя во время расходования путём сотрудничества с получателем платежа. Существует несколько реализаций, которые облегчают настройку и автоматизацию PayJoin. Среди этих реализаций наиболее известной является Stowaway, разработанная командой Samourai Wallet. Этот учебник направлен на то, чтобы провести вас через процесс совершения транзакции Stowaway Payjoin с использованием программного обеспечения Sparrow Wallet.

## Как работает Stowaway?

Как упоминалось ранее, Samourai Wallet предлагает инструмент PayJoin под названием "Stowaway". Он доступен через программное обеспечение Sparrow Wallet на ПК или приложение Samourai Wallet на Android. Для выполнения Payjoin получатель, который также выступает в качестве сотрудника, должен использовать программное обеспечение, совместимое со Stowaway, а именно Sparrow или Samourai Wallet. Эти два программных обеспечения взаимодействуют друг с другом, позволяя совершать транзакции Stowaway между кошельком Sparrow и кошельком Samourai, и наоборот.

Stowaway опирается на категорию транзакций, которые Samourai называет "Cahoots". Cahoot - это по сути совместная транзакция между несколькими пользователями, требующая обмена информацией вне цепочки. В настоящее время Samourai предлагает два инструмента Cahoots: Stowaway (Payjoins) и StonewallX2 (который мы рассмотрим в будущей статье).

Транзакции Cahoots включают обмен частично подписанными транзакциями между пользователями. Этот процесс может быть длительным и обременительным, особенно при удалённом выполнении. Однако его все еще можно выполнить вручную с другим пользователем, что может быть удобно, если сотрудники находятся физически близко. На практике это включает в себя ручной обмен пятью QR-кодами, которые необходимо сканировать последовательно.

При удаленном выполнении этот процесс становится слишком сложным. Чтобы решить эту проблему, Samourai разработала протокол зашифрованной связи на основе Tor, называемый "Soroban". С Soroban необходимые обмены для Payjoin автоматизируются за счет удобного интерфейса пользователя. Это второй метод, который мы рассмотрим в этой статье.

Эти зашифрованные обмены требуют установления соединения и аутентификации между участниками Cahoots. Коммуникации Soroban опираются на Paynyms пользователей. Если вы не знакомы с Paynyms, я приглашаю вас ознакомиться с этой статьей для получения дополнительной информации: [BIP47 - PAYNYM](https://planb.network/tutorials/privacy/paynym-bip47)
Проще говоря, Paynym - это уникальный идентификатор, связанный с вашим кошельком, который позволяет использовать различные функции, включая зашифрованную переписку. Paynym представлен в виде идентификатора и иллюстрации, изображающей робота. Вот пример моего на Testnet: ![Paynym Sparrow](assets/en/1.webp)
**Вкратце:**
- *Payjoin* = Специфическая структура совместной транзакции;
- *Stowaway* = Реализация Payjoin, доступная в Samourai и Sparrow Wallet;
- *Cahoots* = Название, данное Samourai всем их типам совместных транзакций, включая Payjoin Stowaway;
- *Soroban* = Протокол зашифрованной связи, установленный на Tor, позволяющий сотрудничать с другими пользователями в контексте транзакции Cahoots.
- *Paynym* = Уникальный идентификатор кошелька, позволяющий общаться с другим пользователем на Soroban для проведения транзакции Cahoots.

[**-> Узнать больше о транзакциях Payjoin и их полезности**](https://planb.network/tutorials/privacy/payjoin)

## Как установить связь между Paynyms?

Чтобы выполнить удаленную транзакцию Cahoots, конкретно PayJoin (Stowaway) через Samourai или Sparrow, необходимо "Подписаться" на пользователя, с которым вы намерены сотрудничать, используя их Paynym. В случае Stowaway это означает подписку на человека, которому вы хотите отправить биткойны.

**Вот процедура установления этой связи:**

Сначала вам нужно получить идентификатор Paynym получателя. Это можно сделать, используя их псевдоним или платежный код. Для этого, из кошелька Sparrow получателя, выберите вкладку `Tools`, затем нажмите на `Show PayNym`.
![Show Paynym](assets/notext/2.webp)
![Paynym Sparrow](assets/en/1.webp)
С вашей стороны, откройте ваш Sparrow Wallet и перейдите к тому же меню `Show PayNym`. Если вы используете свой Paynym впервые, вам нужно будет получить идентификатор, нажав на `Retrieve PayNym`.
![Retrieve paynym](assets/notext/3.webp)
Далее введите идентификатор Paynym вашего сотрудника (либо их псевдоним `+...`, либо их платежный код `PM...`) в поле `Find Contact`, затем нажмите кнопку `Add Contact`.
![add contact](assets/notext/4.webp)
Программное обеспечение затем предложит вам кнопку `Link Contact`. Нажимать на эту кнопку для нашего учебника не нужно. Этот шаг необходим только если вы планируете совершать платежи указанному Paynym в контексте BIP47, что не относится к нашему учебнику.

Как только Paynym получателя будет подписан на ваш Paynym, повторите эту операцию в обратном направлении, чтобы ваш получатель также подписался на вас. После этого вы сможете выполнить Payjoin.

## Как выполнить Payjoin в Sparrow Wallet?
Если вы выполнили эти несколько предварительных шагов, вы наконец готовы выполнить транзакцию Payjoin! Для этого следуйте нашему видеоуроку:
![Payjoin Tutorial - Sparrow Wallet](https://youtu.be/ZQxKod3e0Mg)

**Внешние ресурсы:**
- https://docs.samourai.io/en/spend-tools#stowaway ;
- https://sparrowwallet.com/docs/spending-privately.html.