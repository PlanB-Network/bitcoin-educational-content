---
name: Payjoin - Samourai Wallet
description: Как выполнить транзакцию Payjoin в кошельке Samourai?
---
![samourai payjoin cover](assets/cover.webp)

***ВНИМАНИЕ:** После ареста основателей кошелька Samourai и изъятия их серверов 24 апреля, функция Payjoins Stowaway в кошельке Samourai работает только путем ручного обмена PSBT между заинтересованными сторонами, при условии, что оба пользователя подключены к своему Dojo. Что касается Sparrow, Payjoins через BIP78 все еще работают. Однако возможно, что эти инструменты будут перезапущены в ближайшие недели. Тем временем вы все еще можете прочитать эту статью, чтобы понять теоретические основы работы Stowaway.*

_Если вы планируете выполнить Stowaway вручную, процедура очень похожа на описанную в этом руководстве. Основное отличие заключается в выборе типа транзакции Stowaway: вместо выбора `Online`, нажмите на `In Person / Manual`. Затем вам нужно будет вручную обменяться PSBT для создания транзакции Stowaway. Если вы физически находитесь рядом с вашим партнером, вы можете последовательно сканировать QR-коды. Если вы находитесь на расстоянии, файлы JSON могут быть обменены через защищенный канал связи. Остальная часть руководства остается неизменной._

_Мы внимательно следим за развитием этого дела, а также за развитием связанных с ним инструментов. Будьте уверены, что мы обновим это руководство, как только появится новая информация._

_Это руководство предоставляется исключительно в образовательных и информационных целях. Мы не поддерживаем и не поощряем использование этих инструментов в преступных целях. Каждый пользователь несет ответственность за соблюдение законов в своей юрисдикции._

---

> *"Заставьте шпионов блокчейна пересмотреть все, что они думают, что знают."*

Payjoin - это специфическая структура транзакции Bitcoin, которая улучшает конфиденциальность пользователя во время траты за счет сотрудничества с получателем платежа. Существует несколько реализаций, облегчающих настройку и автоматизацию PayJoin. Среди этих реализаций наиболее известной является Stowaway, разработанная командами в Samourai Wallet. Это руководство объясняет, как выполнить транзакцию Payjoin Stowaway с использованием приложения Samourai Wallet.

## Как работает Stowaway?

Как упоминалось ранее, Samourai Wallet предлагает инструмент PayJoin под названием "Stowaway". Он доступен через программное обеспечение Sparrow Wallet на ПК или приложение Samourai Wallet на Android. Для выполнения Payjoin получатель, который также выступает в качестве сотрудника, должен использовать программное обеспечение, совместимое со Stowaway, а именно Sparrow или Samourai. Эти два программных обеспечения взаимодействуют друг с другом, позволяя выполнить транзакцию Stowaway между кошельком Sparrow и кошельком Samourai, и наоборот.

Stowaway опирается на категорию транзакций, которые Samourai называет "Cahoots". Cahoot - это по сути совместная транзакция между несколькими пользователями, требующая обмена информацией вне цепочки. На данный момент Samourai предлагает два инструмента Cahoots: Stowaway (Payjoins) и StonewallX2 (который мы рассмотрим в будущей статье).

Транзакции Cahoots включают обмен частично подписанными транзакциями между пользователями. Этот процесс может быть длительным и обременительным, особенно при удаленном выполнении. Однако его все еще можно выполнить вручную с другим пользователем, что может быть удобно, если сотрудники находятся физически рядом. На практике это включает в себя ручной обмен пятью QR-кодами, которые нужно сканировать последовательно.
Когда этот процесс осуществляется удаленно, он становится слишком сложным. Чтобы решить эту проблему, Samourai разработала протокол зашифрованной связи на основе Tor, названный "Soroban". С помощью Soroban обмены, необходимые для Payjoin, автоматизируются за счет удобного интерфейса пользователя. Это второй метод, который мы будем изучать в этой статье.
Эти зашифрованные обмены требуют установления соединения и аутентификации между участниками Cahoots. Таким образом, коммуникации Soroban основаны на Paynyms пользователей. Если вы не знакомы с Paynyms, я приглашаю вас ознакомиться с этой статьей для получения более подробной информации: [BIP47 - PAYNYM](https://planb.network/tutorials/privacy/paynym-bip47)


Проще говоря, Paynym - это уникальный идентификатор, связанный с вашим кошельком, который позволяет использовать различные функциональные возможности, включая зашифрованные сообщения. Paynym представлен в виде идентификатора и иллюстрации, представляющей робота. Вот пример моего в Testnet: ![paynym samourai wallet](assets/en/1.webp)

**Вкратце:**
- _Payjoin_ = Специфическая структура совместных транзакций;
- _Stowaway_ = Реализация Payjoin, доступная в Samourai и Sparrow Wallet;
- _Cahoots_ = Название, данное Samourai всем их типам совместных транзакций, включая Payjoin Stowaway;
- _Soroban_ = Протокол зашифрованной связи, установленный на Tor, позволяющий сотрудничать с другими пользователями в контексте транзакции Cahoots;
- _Paynym_ = Уникальный идентификатор кошелька, позволяющий общаться с другим пользователем на Soroban для осуществления транзакции Cahoots.

[**-> Узнать больше о транзакциях Payjoin и их полезности**](https://planb.network/tutorials/privacy/payjoin)

## Как установить соединение между Paynyms?

Для осуществления удаленной транзакции Cahoots, конкретно PayJoin (Stowaway) через Samourai, необходимо "следовать" за пользователем, с которым вы намереваетесь сотрудничать, используя их Paynym. В случае Stowaway это означает следование за человеком, которому вы хотите отправить биткойны.

**Вот процедура установления этой связи:**

Для начала вам нужно получить платежный код Paynym получателя для Payjoin. В приложении Samourai Wallet получатель должен нажать на иконку своего Paynym (маленького робота), расположенную в верхнем левом углу экрана, а затем кликнуть на свой никнейм Paynym, начинающийся с `+...`. Например, мой `+namelessmode0aF`. Если ваш сотрудник использует Sparrow Wallet, я приглашаю вас ознакомиться с нашим специализированным учебником, нажав здесь.

![connexion paynym samourai](assets/notext/2.webp)

Затем ваш сотрудник будет перенаправлен на свою страницу Paynym. Оттуда они могут либо поделиться с вами своими учетными данными Paynym, либо поделиться своим QR-кодом для сканирования. Для этого они должны нажать на маленькую иконку "поделиться", расположенную в верхнем правом углу их экрана.
![partager paynym samourai](assets/en/1.webp)

С вашей стороны, запустите приложение Samourai Wallet и таким же образом перейдите в меню "PayNyms". Если вы используете свой Paynym впервые, вам нужно будет получить идентификатор.

![demander un paynym](assets/notext/3.webp)

Затем нажмите на синий "+" в нижнем правом углу экрана.
![ajouter paynym collaborateur](assets/notext/4.webp)
Затем вы можете вставить платежный код вашего сотрудника, выбрав `COLLER LE CODE PAIEMENT`, или открыть камеру для сканирования их QR-кода, нажав `SCANNEZ LE CODE QR`. ![вставить идентификатор paynym](assets/notext/5.webp)
Нажмите кнопку `SUIVRE`.
![следовать за paynym](assets/notext/6.webp)
Подтвердите, нажав `YES`.
![подтвердить следование за paynym](assets/notext/7.webp)
Затем программа предложит вам кнопку `SE CONNECTER`. Для нашего учебника нажимать эту кнопку не обязательно. Этот шаг требуется только если вы планируете совершать платежи другому Paynym в рамках BIP47, что не относится к нашему учебнику.
![подключение paynym](assets/notext/8.webp)
Как только Paynym получателя будет отслеживаться вашим Paynym, повторите эту операцию в обратном направлении, чтобы получатель также начал следовать за вами. После этого вы сможете выполнить Payjoin.

## Как совершить Payjoin в кошельке Samourai?

Если вы выполнили эти предварительные шаги, вы наконец готовы выполнить транзакцию Payjoin! Для этого следуйте нашему видеоуроку:

![Видеоурок по Payjoin - кошелек Samourai](https://youtu.be/FXW6XZim0ww?si=EXalYwK1t9DT48aE)

**Внешние ресурсы:**
- https://docs.samourai.io/en/spend-tools#stowaway.