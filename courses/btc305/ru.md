---
name: Bitcoin и BTCPay Server
goal: Установка BTCPay Server для вашего бизнеса
objectives:
  - Понять, что такое btcpayserver.
  - Разместить и настроить BTCPay Server самостоятельно.
  - Использовать btcpayserver в вашем ежедневном бизнесе.
---

# Bitcoin и BTCPay Server

Это вводный курс по работе с BTCPay Server, написанный Алекосом и Басом, который был адаптирован в формат курса PlanB мелонтвистом и asi0.

НЕЗАВЕРШЕННАЯ ИСТОРИЯ

"Это ложь, мое доверие к вам нарушено, я сделаю вас устаревшими".

Произведено Фондом BTCPay Server

+++

# Введение

<partId>59e43fe3-b494-5da6-b4b4-9df5bdf08916</partId>

## Критические отзывы об авторе Bitcoin и BTCPay Server

<chapterId>e1fe6294-3c82-5203-9537-779f9087c35a</chapterId>

Давайте начнем с того, что такое BTCPay Server и откуда он взялся. Мы ценим прозрачность и определенные стандарты для формирования доверия в сфере Bitcoin.
Один из проектов в этой сфере нарушил эти ценности. Ведущий разработчик BTCPay Server, Николас Дорье, воспринял это лично и пообещал сделать их устаревшими. Вот мы много лет спустя и каждый день работаем над этим будущим, будучи полностью открытым исходным кодом.

> Это ложь, мое доверие к вам нарушено, я сделаю вас устаревшими.
> Николас Дорье

После слов Николаса пришло время начать строительство. Много работы было вложено в то, что мы теперь называем BTCPay Server. Больше людей хотели помочь с этим движением. Самые узнаваемые из них - r0ckstardev, MrKukks, Pavlenex и первый торговец, использовавший программное обеспечение, astupidmoose.

Что значит открытый исходный код и что входит в такой проект?

FOSS означает свободное и открытое программное обеспечение. Первое относится к условиям, которые позволяют любому копировать, изменять и даже распространять версии (даже с целью получения прибыли) программного обеспечения. Второе относится к открытому обмену исходным кодом, поощряя общественность вносить свой вклад и улучшать его.
Это привлекает опытных пользователей, энтузиастов вносить свой вклад в программное обеспечение, которым они уже пользуются и извлекают из него пользу, что со временем доказывает свое преимущество в адаптации по сравнению с проприетарным программным обеспечением. Это соответствует этике Bitcoin, согласно которой "информация стремится быть свободной". Это объединяет страстных людей, которые формируют сообщество и это просто более весело. Как и Bitcoin, FOSS неизбежен.

### Прежде чем мы начнем

Этот курс состоит из нескольких частей. Многими из них будет заниматься ваш учитель в классе, демонстрационные среды, к которым вы получите доступ, хостинг сервера для вас и, возможно, доменное имя. Если вы проходите этот курс самостоятельно, пожалуйста, имейте в виду, что среды, помеченные как DEMO, не будут доступны для вас.
Примечание. Если вы следуете этому курсу в классе, имена серверов могут отличаться в зависимости от настройки вашего класса. Переменные в именах серверов могут отличаться из-за этого.

### Структура курса

Каждая глава имеет цели и оценки знаний. В этом курсе мы рассмотрим каждую из них и представим сводку ключевых функций в каждом учебном блоке (т.е. главе). Иллюстрации представлены для обеспечения визуальной обратной связи и укрепления ключевых концепций в визуальном аспекте. Цели устанавливаются в начале каждого учебного блока. Эти цели выходят за рамки простого списка задач. Они предоставляют вам руководство к новому набору навыков. Оценки знаний постепенно усложняют настройку вашего BTCPay Server.

### Что получают студенты с курсом?

С курсом BTCPay Server студент сможет понять основные принципы Bitcoin, как технические, так и нетехнические. Обширное обучение использованию Bitcoin через BTCPay Server позволит студентам управлять собственной инфраструктурой Bitcoin.

### Важные веб-адреса или возможности для связи

Фонд BTCPay Server, который позволил Алекосу и Басу написать этот курс, находится в Токио, Япония. С фондом BTCPay Server можно связаться через веб-сайт:

- https://foundation.btcpayserver.org
- присоединяйтесь к официальным чат-каналам: https://chat.btcpayserver.org

## Введение в Bitcoin

<chapterId>5c0bc234-c188-5b4a-94d5-adee87a120e2</chapterId>

### Понимание Bitcoin через классные упражнения

Это классное упражнение, так что если вы проходите этот курс самостоятельно, вы не сможете его выполнить, но вы все равно можете пройти через это упражнение. Для выполнения этой задачи минимальное количество людей - от 9 до 11.

Упражнение начинается после просмотра введения "Как работают Bitcoin и блокчейн" от BBC.

![как работают bitcoin и блокчейн](https://youtu.be/mhE_vvwAiRc)

Для участия в этом упражнении требуется как минимум девять человек. Цель этого упражнения - физически понять, как работает Bitcoin. Играя каждую роль в сети, вы получите интерактивный и игровой способ обучения. Это упражнение не включает Lightning Network.

### Пример; Требуется 9 / 11 человек

Роли:

- 1 Покупатель
- 1 Продавец
- 7 до 9 узлов Bitcoin

**Настройка следующая:**

Покупатель покупает товар в магазине за Bitcoin.

**Сценарий 1 - Традиционная банковская система**

- Настройка:
  - Смотрите диаграммы/объяснения в приложенном Figjam - [Схема деятельности](https://www.figma.com/file/ckmvMq02Jm2MegSsVCDFhc/Day-1-Classroom-Activity?type=whiteboard&node-id=0-1&t=KR31ofMaJX6S95UL-0).
  - Получите трех студентов-добровольцев для игры в роли Покупателя (Алисы), Продавца (Боба) и Банка.
- Последовательность действий:
  - Покупатель- просматривает магазин онлайн и находит товар за 25 долларов, который хочет купить, и сообщает Продавцу, что хотел бы совершить покупку
  - Продавец- просит оплату.
  - Покупатель- отправляет информацию о карте Продавцу
  - Продавец- пересылает информацию в Банк (идентифицируя как свою, так и информацию/личность) с запросом на оплату
  - Банк собирает информацию о Покупателе и Продавце (Алисе и Бобе) и проверяет, достаточно ли средств на счету покупателя.
  - Снимает 25 долларов с счета Алисы, добавляет 24 доллара на счет Боба, берет 1 доллар за услугу
  - Продавец получает подтверждение от Банка и отправляет товар покупателю.
- Комментарии:
  - У Боба и Алисы должны быть отношения с банком.
  - Банк собирает идентифицирующую информацию о Бобе и Алисе.
  - Банк берет комиссию.
  - Банку необходимо доверять в вопросе хранения денег каждого участника все время.

**Сценарий 2 - Система Bitcoin**

- Настройка:
  - Смотрите диаграммы/объяснения в приложенном Figjam - [Схема деятельности](https://www.figma.com/file/ckmvMq02Jm2MegSsVCDFhc/Day-1-Classroom-Activity?type=whiteboard&node-id=0-1&t=KR31ofMaJX6S95UL-0).
- Замените банк на девять студентов, которые будут играть роль Компьютера (Узлы/Майнеры Биткойна) в сети для замены банка.
- Каждый из 9 Компьютеров имеет полную историческую запись всех прошлых транзакций (таким образом, точные балансы без подделок), а также набор правил:
  - Проверить, что транзакция правильно подписана (ключ подходит к замку)
  - Передавать и получать действительные транзакции участникам сети, отбрасывать недействительные (включая те, которые пытаются потратить те же средства дважды)
- Периодически обновлять/добавлять записи с новыми транзакциями, полученными от "случайного" компьютера, при условии, что все содержимое действительно (примечание: мы пока игнорируем компонент Доказательства Работы во всем этом для упрощения), в противном случае отклонять эти и продолжать как прежде до следующего "случайного" компьютера, отправляющего обновление
  - Надлежащая сумма была вознаграждена, если содержимое было действительным.
- Изобразите последовательность событий:
  - Покупатель- просматривает магазин онлайн и находит товар за 25 долларов, который хочет приобрести, и сообщает Продавцу, что хотел бы совершить покупку
  - Продавец- просит оплату, отправляя покупателю счет/адрес из своего кошелька.
  - Покупатель- создает транзакцию (отправляет BTC на сумму 25 долларов на адрес, предоставленный Продавцом) и транслирует ее в сеть Биткойн.
- Компьютеры- получают транзакцию и проверяют:
  - На отправляемом адресе есть как минимум BTC на сумму 25 долларов
  - Транзакция правильно подписана («открыта» покупателем)
  - Если это не так, транзакция не будет распространяться по сети, а если так, то она распространяется и ожидает.
  - Продавцы могут проверить, что транзакция находится в ожидании.
- Один компьютер "случайным" образом выбирается для предложения завершить предложенную транзакцию, транслируя "блок", содержащий ее; если все проверено, они получат вознаграждение в BTC.
  - ДОПОЛНИТЕЛЬНО/ПРОДВИНУТО - вместо случайного выбора Компьютера, симулируйте майнинг, позволяя Компьютерам бросать кости до тех пор, пока не произойдет некий предопределенный исход (например, первый, кто выбросит двойку, выбирается)
  - Также можно изобразить, что произойдет, если два Компьютера выиграют примерно одновременно, что приведет к разделению цепочки.
  - Компьютеры проверяют действительность, обновляют/добавляют записи в свои регистры, если правила соблюдены, и транслируют блок участникам.
  - Случайно выбранный компьютер получает вознаграждение за предложение действительного блока.
  - Продавец проверяет, что транзакция была завершена; таким образом, средства были получены, и товар был отправлен покупателю.
- Комментарии:
  - Обратите внимание, что не было необходимости в предварительных банковских отношениях.
  - Не требуется третья сторона для содействия; заменено кодом/стимулами.
  - Сбор данных кем-либо вне прямого обмена отсутствует, и между участниками должно обмениваться только необходимое количество информации (например, адрес доставки).
  - Между людьми не требуется доверие (кроме как Продавец отправляет товар), подобно покупке за наличные во многих отношениях.
  - Деньги принадлежат непосредственно физическим лицам.
  - В учетной записи Биткойна суммы показаны в долларах для упрощения, но на самом деле это BTC.
  - Мы симулируем трансляцию одной транзакции, но на самом деле в сети ожидают множество транзакций, и блоки включают тысячи транзакций одновременно. Узлы также проверяют, нет ли ожидающих транзакций двойной траты (в этом случае я бы отбросил все, кроме одной).
- Сценарии обмана:
  - Что, если у покупателя не было бы BTC на сумму 25 долларов?
    - Они не смогли бы создать транзакцию, потому что «разблокировка» и «владение» являются одним и тем же, и компьютеры проверяют, правильно ли подписана транзакция; в противном случае они отклоняют ее.
- Что если случайно выбранный компьютер попытается "изменить регистр"? - Блок будет отклонен, поскольку каждый другой компьютер имеет полную историю и заметит изменение, нарушая одно из их правил.
  - Случайный компьютер не получит вознаграждение, и никакие транзакции из их блока не будут завершены.

## Оценка знаний

<chapterId>1461f064-933d-50ea-8935-324b68ec5d5f</chapterId>

### Обсуждение в классе KA

Обсудите некоторые упрощения, сделанные на занятии в рамках второго сценария, и опишите, что на самом деле делает система Bitcoin более подробно.

### Повторение словаря KA

Определите следующие ключевые термины, введенные в предыдущем разделе:

- Узел
- Mempool
- Целевая сложность
- Блок

**Обсудите значение некоторых дополнительных терминов в группе:**

Blockchain, Транзакция, Двойная трат, Проблема византийских генералов, Майнинг, Доказательство работы (PoW), Хеш-функция, Вознаграждение за блок, Blockchain, Самая длинная цепочка, Атака 51%, Вывод, Блокировка вывода, Сдача, Сатоши, Публичный/Приватный ключ, Адрес, Криптография с открытым ключом, Цифровая подпись, Кошелек

# Введение в BTCPay Server

<partId>9c8a2d0c-9ba1-5c39-874c-f9eaf1bba663</partId>

## Понимание экрана входа в BTCPay Server

<chapterId>14aad54c-9bd8-54f2-9455-178b8ae63408</chapterId>

### Работа с BTCPay Server

Цель этого блока курса - получить общее представление о программном обеспечении BTCPay Server. В общей среде рекомендуется следовать демонстрации инструктора и следовать вместе с учебником BTCPay Server, чтобы следовать за учителем. Вы узнаете, как создать кошелек несколькими методами. Примеры включают настройки горячего кошелька и аппаратные кошельки, подключенные через BTCPay Server Vault. Эти задачи выполняются в демонстрационной среде, отображаемой и предоставляемой доступом вашим инструктором курса.

Если вы следуете этому курсу самостоятельно, вы можете найти список сторонних хостов для демонстрационных целей на https://directory.btcpayserver.org/filter/hosts. Мы настоятельно советуем не использовать эти сторонние варианты как производственные среды, но они служат правильными целями для введения в использование Bitcoin и BTCPay Server.

Как стажер-звезда BTCPay Server, у вас мог быть предыдущий опыт настройки узла Bitcoin. Этот курс будет специально адаптирован к программному стеку BTCPay Server.

Многие опции в BTCPay Server существуют в той или иной форме в другом программном обеспечении, связанном с Bitcoin кошельками.

### Экран входа в BTCPay Server

Когда вы входите в демонстрационную среду, вас просят «Войти» или «Создать аккаунт». Администраторы сервера могут отключить функцию создания новых аккаунтов по соображениям безопасности. Логотипы и цвета кнопок BTCPay Server могут быть изменены, поскольку BTCPay Server - это программное обеспечение с открытым исходным кодом. Сторонний хост может использовать White-label для программного обеспечения и изменить весь внешний вид.

![image](assets/en/0.webp)

### Окно создания аккаунта

Для создания аккаунтов на BTCPay Server требуются действительные строки адресов электронной почты; example@email.com будет действительной строкой для электронной почты.

Пароль должен быть не менее 8 символов длиной, включая буквы, цифры и символы. После установки пароля один раз, вам нужно будет проверить введенный пароль, чтобы убедиться, что он верен тому, что был введен в первом поле для пароля.
Когда поля "Email" и "Password" заполнены корректно, нажмите кнопку "Create Account". Это сохранит Email и пароль на экземпляре BTCPay Server инструктора.
![image](assets/en/1.webp)

**!Внимание!**

Если вы проходите этот курс самостоятельно, создание этого аккаунта может быть выполнено на стороннем хосте; поэтому мы снова упоминаем, что никогда не следует использовать эти среды для производственных целей, а только для обучения.

### Создание аккаунта администратором BTCPay Server

Администратор экземпляра BTCPay Server также может создавать аккаунты для BTCPay Server. Администратор экземпляра BTCPay Server может нажать на "Server Settings" (1), перейти на вкладку "Users" (2) и нажать кнопку "+ Add User" (3) в верхней правой части вкладки Users. В разделе (4.3) вы узнаете больше о контроле администратора над аккаунтами.

![image](assets/en/2.webp)

Как администратор, вам потребуется Email адрес пользователя и установка стандартного пароля. Рекомендуется администратору информировать пользователя о необходимости изменить этот пароль перед использованием аккаунта по соображениям безопасности. Если администратор НЕ установит пароль и на сервере настроен SMTP, пользователь получит письмо с пригласительной ссылкой для создания своего аккаунта и установки пароля самостоятельно.

### Пример

Следуя инструкциям инструктора, перейдите по предоставленной инструктором ссылке и создайте свой аккаунт в демонстрационной среде. Убедитесь, что ваш Email адрес и пароль сохранены в надежном месте; эти данные для входа вам понадобятся для выполнения остальных демонстрационных заданий в этом курсе.

Ваш инструктор мог заранее собрать Email адреса и отправить пригласительную ссылку перед этим упражнением. Если вам сказали, проверьте свой Email.

Проходя курс без инструктора, создайте свой аккаунт, используя демонстрационную среду BTCPay Server; перейдите на

https://mainnet.demo.btcpayserver.org/login.

Этот аккаунт следует использовать только для демонстрационных/обучающих целей и никогда для бизнеса.

### Сводка навыков

В этом разделе вы узнали следующее:

- Как создать аккаунт на хостинговом сервере через интерфейс.
- Как администратор сервера может вручную добавлять пользователей в настройках сервера.

### Оценка знаний

#### Концептуальный обзор

Приведите причины, почему использование Демо Сервера является плохой идеей для производственных целей.

## Управление учетной записью(ями)

<chapterId>b58ca6ee-b7fc-5e81-a6aa-c8ff212b4c55</chapterId>

### Управление аккаунтом на BTCPay Server

После создания аккаунта владельцем магазина, его можно управлять в нижнем левом углу интерфейса BTCPay Server. Под кнопкой Account находятся настройки более высокого уровня.

- Темный/Светлый режим.
- Переключатель "Скрыть конфиденциальную информацию".
- Управление аккаунтом.

![image](assets/en/3.webp)

### Темный и Светлый режим

Пользователи BTCPay Server могут выбирать между Темным или Светлым режимом интерфейса. Страницы, обращенные к клиенту, не изменятся. Они используют настройки предпочтений клиента относительно темного или светлого режима.

### Переключатель "Скрыть конфиденциальную информацию"

Кнопка "Скрыть конфиденциальную информацию" добавляет простой и быстрый слой безопасности. Когда вам нужно работать с вашим BTCPay Server, но в общественном месте могут быть люди, заглядывающие вам через плечо, включите "Скрыть конфиденциальную информацию", и все значения в BTCPay Server будут скрыты. Кто-то может заглядывать вам через плечо, но больше не сможет видеть значения, с которыми вы работаете.

### Управление аккаунтом

После создания учетной записи пользователя здесь можно управлять паролями, двухфакторной аутентификацией или API ключами.

### Управление аккаунтом - Аккаунт

При необходимости обновите ваш аккаунт, указав другой адрес электронной почты. Чтобы убедиться, что адрес электронной почты указан верно, BTCPay Server позволяет отправить проверочное письмо. Нажмите сохранить, если пользователь установил новый адрес электронной почты и подтвердил, что верификация прошла успешно. Имя пользователя остается таким же, как и предыдущий адрес электронной почты.

Пользователь может решить удалить свой аккаунт полностью. Это можно сделать, нажав кнопку удаления на вкладке Аккаунт.

![изображение](assets/en/4.webp)

**!Внимание!**

После смены адреса электронной почты имя пользователя для аккаунта не изменится. Предыдущий указанный адрес электронной почты останется именем для входа.

### Управление аккаунтом - Пароль

Студент может захотеть изменить свой пароль. Он может сделать это, перейдя на вкладку Пароль. Здесь ему необходимо ввести свой старый пароль и может изменить его на новый.

![изображение](assets/en/5.webp)

### Двухфакторная аутентификация (2FA)

Чтобы ограничить последствия утери пароля, вы можете использовать двухфакторную аутентификацию (2FA), относительно новый метод безопасности. Вы можете активировать двухфакторную аутентификацию через управление аккаунтом и вкладку двухфакторной аутентификации. После входа в систему с использованием вашего имени пользователя и пароля вам необходимо будет выполнить второй шаг.

BTCPay Server позволяет включить 2FA двумя способами: через приложения (Authy, Google, Microsoft Authenticator) или через устройства безопасности (FIDO2 или LNURL Auth).

### Двухфакторная аутентификация - на основе приложения

В зависимости от операционной системы вашего мобильного телефона (Android или iOS), пользователи могут выбрать следующие приложения:

1. Скачайте приложение для двухфакторной аутентификации;
   - Authy для [Android](https://play.google.com/store/apps/details?id=com.authy.authy) или [iOS](https://apps.apple.com/us/app/authy/id494168017)
   - Microsoft Authenticator для [Android](https://play.google.com/store/apps/details?id=com.azure.authenticator) или [iOS](https://apps.apple.com/us/app/microsoft-authenticator/id983156458)
   - Google Authenticator для [Android](https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=e%C2%80) или [iOS](https://apps.apple.com/us/app/google-authenticator/id388497605)
2. После скачивания и установки приложения Authenticator.
   - Отсканируйте QR-код, предоставленный BTCPay Server
   - Или введите сгенерированный ключ от BTCPay Server вручную в ваше приложение Authenticator.
3. Приложение Authenticator предоставит вам уникальный код. Введите уникальный код в BTCPay Server для верификации настройки и нажмите проверить, чтобы завершить процесс.

![изображение](assets/en/6.webp)

### Сводка навыков

В этом разделе вы узнали следующее:

- Варианты управления аккаунтом и различные способы управления аккаунтом на экземпляре BTCPay Server.
- Как настроить двухфакторную аутентификацию на основе приложения.

### Оценка знаний

#### Концептуальный обзор KA

Опишите, как двухфакторная аутентификация на основе приложения помогает защитить ваш аккаунт

## Создание нового магазина

<chapterId>463b3634-b49f-5512-a711-3b2e096fc2e0</chapterId>

### Мастер создания магазина

Когда новый пользователь входит в BTCPay Server, среда пуста и требует создания первого магазина. Мастер введения BTCPay Server предложит пользователю опцию "Создать ваш магазин" (1). Магазин можно рассматривать как Дом для ваших потребностей в Bitcoin. Новый узел BTCPay Server начнет с Синхронизации блокчейна Bitcoin (2). В зависимости от инфраструктуры, на которой работает BTCPay Server, это может занять от нескольких часов до нескольких дней. Текущая версия экземпляра отображается в правом нижнем углу интерфейса BTCPay Server. Это полезно для справки при устранении неполадок.
![изображение](assets/en/7.webp)

### Мастер создания магазина

Следуя этому курсу, вы начнете с немного другого экрана, чем на предыдущей странице. Поскольку ваш инструктор подготовил демо-среду, блокчейн Bitcoin был синхронизирован заранее, и поэтому вы не увидите статус синхронизации узлов.

Пользователь может решить удалить свой аккаунт полностью. Это можно сделать, нажав кнопку удаления на вкладке Аккаунт.

![изображение](assets/en/8.webp)

**!Внимание!**

Аккаунты BTCPay Server могут создавать неограниченное количество магазинов. Каждый магазин - это кошелек или "дом".

### Пример

Начните с нажатия на "Создать ваш магазин".

![изображение](assets/en/9.webp)

Это создаст ваш первый Дом и панель управления для использования BTCPay Server.

(1) После нажатия "Создать ваш магазин", BTCPay Server потребует от вас назвать магазин; это может быть что угодно, что будет вам полезно.

![изображение](assets/en/10.webp)

(2) Далее необходимо установить валюту магазина по умолчанию, будь то фиатная валюта или деноминация в стандарте Bitcoin / Sats. Для демо-среды мы установим ее как USD.

![изображение](assets/en/11.webp)

(3) Как последний параметр настройки магазина, BTCPay Server требует установить "Предпочтительный источник цен" для сравнения цены Bitcoin с текущей фиатной ценой, чтобы ваш магазин отображал правильный обменный курс между Bitcoin и установленной фиатной валютой магазина. Мы остановимся на выборе по умолчанию в демо-примере и установим его как биржу Kraken. BTCPay Server использует API Kraken для проверки обменных курсов.

![изображение](assets/en/12.webp)

(4) Теперь, когда эти параметры магазина установлены, нажмите на кнопку Создать, и BTCPay Server создаст панель управления вашего первого магазина, где мастер продолжит работу.

![изображение](assets/en/13.webp)

Поздравляем, вы создали свой первый магазин, и это завершает это упражнение.

![изображение](assets/en/14.webp)

### Сводка навыков

В этом разделе вы узнали:

- Создание магазина и настройка валюты по умолчанию в сочетании с предпочтениями источника цен.
- Каждый "Магазин" - это новый дом, отделенный от других магазинов в этой установке BTCPay Server.

# Введение в защиту ключей Bitcoin

<partId>25da22d8-fd37-51c5-af2a-58b9f3b046b2</partId>

## Понимание генерации ключей Bitcoin

<chapterId>d162735b-847b-578e-83b8-a044ab703ec5</chapterId>

### Что включает в себя генерация ключей bitcoin?

Когда создается кошелек Bitcoin, он создает так называемое "семя". В последней цели вы создали "семя", Серия слов, сгенерированных ранее, также известна как мнемонические фразы. Семя используется для вывода отдельных ключей Bitcoin и используется для отправки или получения Bitcoin. Фразы-семена никогда не должны делиться с третьими сторонами или ненадежными участниками.
Генерация сидов (seed generation) выполняется в соответствии со стандартом индустрии, известным как "Иерархически Детерминированный" (Hierarchical Deterministic, HD) фреймворк.
![изображение](assets/en/15.webp)

### Адреса

BTCPay Server создан для генерации нового Адреса. Это решает проблему повторного использования публичного ключа или Адреса. Использование одного и того же Публичного ключа значительно упрощает отслеживание всей вашей истории платежей. Восприятие ключей как ваучеров однократного использования значительно улучшит вашу конфиденциальность. Мы также используем Биткойн Адреса, не путайте их с Публичными ключами.

Адрес получается из Публичного ключа с помощью "хэширующего алгоритма". Однако большинство кошельков и транзакций будут отображать Адреса, а не эти публичные ключи. Адреса, как правило, короче публичных ключей и обычно начинаются с `1`, `3` или `bc1`, в то время как публичные ключи начинаются с `02`, `03` или `04`.

- Адреса, начинающиеся с `1.....`, по-прежнему очень распространены. Как упоминалось в главе Создание нового магазина, это устаревшие адреса. Этот тип адреса предназначен для транзакций P2PKH. P2Pkh использует кодировку Base58, что делает адрес чувствительным к регистру. Его структура основана на публичном ключе с дополнительной цифрой в качестве идентификатора.

- Адреса, начинающиеся с `bc1...`, постепенно становятся очень распространенными. Они известны как (нативные) SegWit Адреса. Они предлагают лучшую структуру комиссий, чем другие упомянутые Адреса. Нативные SegWit Адреса используют кодировку Bech32 и допускают только строчные буквы.

- Адреса, начинающиеся с `3...`, обычно все еще используются биржами для адресов депозитов. Эти адреса упоминаются в главе Создание нового магазина, как обернутые или вложенные SegWit адреса. Однако они также могут функционировать как "Мультиподписные Адреса". Когда используются как SegWit адреса, они также позволяют экономить на комиссиях за транзакции, хотя и меньше, чем Нативные SegWit. Адреса P2SH используют кодировку Base58. Это делает их чувствительными к регистру, как и устаревшие адреса.

- Адреса, начинающиеся с `2...`, являются адресами Testnet. Они предназначены для получения биткойнов в тестовой сети (tBTC). Никогда не путайте это и не отправляйте Биткойн на эти адреса. Для целей разработки вы можете создать кошелек для тестовой сети. В интернете есть множество кранов для получения биткойнов в тестовой сети. Никогда не покупайте Биткойн для тестовой сети. Биткойн для тестовой сети добывается. Это может быть причиной для разработчика использовать Regtest вместо этого. Это среда-песочница для разработчиков, в которой отсутствуют некоторые компоненты сети. Однако Биткойн, используемый в целях разработки, очень полезен.

### Публичные Ключи

Публичные ключи на практике сегодня используются реже. Со временем пользователи биткойна стали заменять их Адресами. Однако они все еще существуют и иногда используются. Публичные ключи, как правило, гораздо длиннее адресов. Как и в случае с адресами, они начинаются с определенного идентификатора.

- Во-первых, `02...` и `03...` являются очень стандартными идентификаторами публичных ключей, закодированными в формате SEC. Их можно обработать и превратить в адреса для получения, использовать для создания мультиподписных адресов или для проверки подписи. Транзакции Биткойна в первые дни использовали публичные ключи как часть транзакций P2PK.

- Однако кошельки HD используют другую структуру. `xpub...`, `ypub...` или `zpub...` называются расширенными публичными ключами, или xpubs. Эти ключи используются для генерации множества публичных ключей, поскольку они являются частью кошелька HD. Поскольку ваш xpub содержит записи о всей вашей истории, то есть о прошлых и будущих транзакциях, никогда не делитесь этими данными с ненадежными сторонами.

### Сводка Навыков

В этом разделе вы узнали следующее:

- Различия между адресами и типами данных открытых ключей, а также преимущества использования адресов вместо открытых ключей.

### Оценка знаний

Опишите преимущество использования новых адресов для каждой транзакции по сравнению с повторным использованием адресов или методами открытых ключей.

## Защита ключей с помощью аппаратного кошелька

<chapterId>c54a6d61-5a43-5fdb-93ae-c6750de9c612</chapterId>

### Хранение ключей Bitcoin

После генерации сид-фразы, список из 12 - 24 слов, сгенерированных в этой книге, требует надлежащего резервного копирования и защиты, поскольку эти слова являются единственным способом восстановления доступа к кошельку. Структура HD-кошельков и как она детерминированно генерирует адреса, используя эту одну сид-фразу, все ваши созданные адреса будут резервироваться с использованием этого одного списка мнемонических слов, представляющих вашу сид-фразу или фразу восстановления.

Храните вашу фразу восстановления в безопасности. Если к ней получит доступ кто-то, особенно с злым умыслом, он может переместить ваши средства. Хранение сид-фразы в безопасности и одновременное её помнить взаимосвязаны. Существует несколько методов хранения приватных ключей Bitcoin, каждый из которых имеет преимущества и недостатки, будь то в безопасности, конфиденциальности, удобстве использования или физических средствах. Из-за важности приватных ключей пользователи Bitcoin склонны хранить и надежно защищать эти ключи в "самохранении" вместо использования "опекунских" услуг, таких как банки. В зависимости от пользователя, он должен использовать либо решение для холодного хранения, либо горячий кошелек.

### Горячее и холодное хранение ключей Bitcoin

Обычно биткойн-кошельки классифицируются как Горячий Кошелек или Холодный Кошелек. Большинство компромиссов заключается в удобстве использования, простоте и рисках безопасности. Каждый из этих методов также может быть использован в опекунском решении. Однако здесь компромиссы в основном основаны на безопасности и конфиденциальности и выходят за рамки этого курса.

### Горячий кошелек

Горячие кошельки - это самый удобный способ взаимодействия с Bitcoin через мобильные, веб- или настольные программы. Кошелек всегда подключен к интернету, что позволяет пользователям отправлять или получать Bitcoin. Однако это также является его слабостью, так как кошелек всегда онлайн, он теперь более уязвим для атак хакеров или вредоносного ПО на вашем устройстве. В BTCPay Server горячие кошельки хранят приватные ключи на экземпляре. Любой, кто получит доступ к вашему магазину BTCPay Server, может украсть средства с этого адреса, если он злонамерен. Когда BTCPay Server работает в арендованной среде, вы всегда должны учитывать это в своем профиле безопасности и предпочтительно не использовать Горячий кошелек в таком случае. Когда BTCPay Server установлен на собственном оборудовании, защищенном и доверенном вами, профиль риска значительно снижается, но он никогда не исчезает!

### Холодный кошелек

Люди переводят свои Bitcoin в холодный кошелек, потому что это позволяет изолировать приватные ключи от интернета. Удаление интернет-соединения из уравнения снижает риск вредоносного ПО, шпионских программ и SIM-свопов. Считается, что холодное хранение превосходит горячее по безопасности и автономии, при условии принятия адекватных мер предосторожности для предотвращения потери приватных ключей Bitcoin. Холодное хранение наиболее подходит для больших сумм Bitcoin, которые не предполагается часто тратить из-за сложности настройки кошелька.

Существует несколько методов хранения ключей Bitcoin в холодном хранении, от бумажных кошельков до мозговых кошельков, аппаратных кошельков или, с самого начала, файла кошелька. Большинство кошельков используют BIP 39 для генерации сид-фразы. Однако в программном обеспечении Bitcoin Core до сих пор не достигнуто консенсуса по его использованию. Программное обеспечение Bitcoin Core все еще будет генерировать файл Wallet.dat, который вам нужно будет хранить в безопасном офлайн-месте.

### Резюме навыков

В этом разделе вы узнали:

- Различия между горячими и холодными кошельками с точки зрения функциональности и их компромиссов.

### Концептуальный обзор оценки знаний

- Что такое кошелек?
- В чем разница между горячими и холодными кошельками?

- Опишите, что подразумевается под "генерацией кошелька"?

## Использование ваших ключей Bitcoin

<chapterId>bff488de-5052-56e6-b696-97e896f762ae</chapterId>

### Кошелек BTCPay Server

BTCPay Server включает в себя следующие стандартные функции кошелька:

- Транзакции
- Отправка
- Получение
- Повторное сканирование
- Пулл-платежи
- Выплаты
- PSBT
- Общие настройки

### Транзакции

Администраторы могут видеть входящие и исходящие транзакции для кошелька, подключенного к этому конкретному магазину, в представлении транзакций. Каждая транзакция имеет различие между полученными и отправленными. Полученные будут зелеными, а исходящие транзакции будут красными. В представлении транзакций BTCPay Server администраторы также увидят набор стандартных меток.

| Тип транзакции  | Описание                                             |
| --------------- | ---------------------------------------------------- |
| App             | Платеж был получен через созданный в приложении счет |
| invoice         | Платеж был получен через счет                        |
| payjoin         | Не оплачено, таймер счета еще не истек               |
| payjoin-exposed | UTXO был раскрыт через предложение payjoin в счете   |
| payment-request | Платеж был получен через запрос на платеж            |
| payout          | Платеж был отправлен через выплату или возврат       |

### Как отправить

Функция отправки сервера BTCPay отправляет транзакции из вашего кошелька BTCPay Server на цепочке. BTCPay Server позволяет подписывать ваши транзакции для расходования средств несколькими способами. Транзакция может быть подписана с помощью:

- Аппаратный кошелек
- Кошельки, поддерживающие PSBT
- HD приватный ключ или восстановительные семена.
- Горячий кошелек

#### Аппаратный кошелек

BTCPay Server имеет встроенную поддержку аппаратных кошельков, позволяя вам использовать ваш аппаратный кошелек с BTCPay Vault без утечки информации в сторонние приложения или серверы. Интеграция аппаратного кошелька в BTCPay Server позволяет вам импортировать ваш аппаратный кошелек и расходовать входящие средства с простым подтверждением на вашем устройстве. Ваши приватные ключи никогда не покидают устройство, и все средства проверяются против вашего полного узла, так что нет утечки данных.

#### Подписание с помощью кошелька, поддерживающего PSBT

PSBT (Partially Signed Bitcoin Transactions - Частично подписанные биткойн-транзакции) - это формат обмена для биткойн-транзакций, которые еще необходимо полностью подписать. PSBT поддерживается в BTCPay Server и может быть подписан совместимыми аппаратными и программными кошельками.

Конструкция полностью подписанной биткойн-транзакции проходит следующие шаги:

- PSBT конструируется с конкретными входами и выходами, но без подписей
- Экспортированный PSBT может быть импортирован кошельком, поддерживающим этот формат
- Данные транзакции могут быть проверены и подписаны с использованием кошелька
- Подписанный файл PSBT экспортируется из кошелька и импортируется в BTCPay Server
- BTCPay Server производит окончательную биткойн-транзакцию
- Вы проверяете результат и транслируете его в сеть

#### Подписание с HD приватным ключом или мнемоническим семенем

Если вы создали кошелек до использования BTCPay Server, вы можете расходовать средства, вводя ваш приватный ключ в соответствующее поле. Установите правильный "AccountKeyPath" в настройках кошелька; иначе, вы не сможете расходовать средства.

#### Подписание с помощью горячего кошелька

Если вы создали новый кошелек при настройке вашего магазина и активировали его как горячий кошелек, он будет автоматически использовать семена, хранящиеся на сервере, для подписи.

### RBF (Replace-By-Fee)

Replace-By-Fee (RBF) — это функция протокола Bitcoin, которая позволяет вам заменить ранее отправленную транзакцию (пока еще не подтвержденную). Это позволяет случайным образом изменять "отпечаток" транзакции вашего кошелька или заменять его на транзакцию с более высокой комиссией, чтобы повысить ее приоритет в очереди на подтверждение (майнинг). Это эффективно заменит оригинальную транзакцию, поскольку транзакция с более высокой комиссией будет иметь приоритет, и после подтверждения аннулирует оригинальную (без двойной траты).
Нажмите кнопку "Расширенные настройки", чтобы просмотреть опции RBF;

![изображение](assets/en/16.webp)

- Случайная замена для большей конфиденциальности, позволяет автоматически заменять транзакцию для случайного изменения "отпечатка" транзакции.
- Да, Отметить транзакцию для RBF и заменить явно (Не заменяется по умолчанию, только по вводу)
- Нет, Не разрешать замену транзакции.

### Выбор монет

Выбор монет — это продвинутая функция, повышающая конфиденциальность, которая позволяет вам выбирать монеты, которые вы хотите потратить при создании транзакции. Например, оплата монетами, полученными недавно из смешивания.

Выбор монет работает нативно с функцией меток кошелька. Это позволяет вам маркировать входящие средства для более плавного управления UTXO и расходования.

BTCPay Server также поддерживает BIP-329 для управления метками. BIP-329 позволяет добавлять метки; если вы переводите с кошелька, поддерживающего этот конкретный BIP и устанавливаете метки, BTCPay Server распознает их и импортирует. При миграции серверов эта информация также может быть экспортирована и импортирована в новую среду.

### Как получить

Когда вы нажимаете на кнопку получения в BTCPay Server, генерируется неиспользованный адрес, который можно использовать для получения платежей. Администраторы также могут генерировать новый адрес, создавая новый "Счет".

BTCPay Server всегда просит сгенерировать следующий доступный адрес, чтобы избежать повторного использования адреса. После нажатия "Сгенерировать следующий доступный BTC адрес", BTCPay Server создал новый адрес и QR. Также вы можете сразу установить Метку для адреса для лучшего управления вашими адресами.

![изображение](assets/en/17.webp)

![изображение](assets/en/18.webp)

#### Повторное сканирование

Функция повторного сканирования основана на "Scantxoutset" Bitcoin Core 0.17.0 для сканирования текущего состояния блокчейна (называемого набором UTXO) на предмет монет, принадлежащих настроенной схеме производных. Повторное сканирование кошелька решает две проблемы, с которыми сталкиваются пользователи BTCPay Server.

1. Проблема лимита пропуска - Большинство сторонних кошельков являются легкими кошельками, которые используют один узел на многих пользователей. Легкие и полагающиеся на полные узлы кошельки ограничивают количество (обычно 20) адресов без баланса, которые они отслеживают в блокчейне, чтобы предотвратить проблемы с производительностью. BTCPay Server генерирует новый адрес для каждого счета. Учитывая вышеизложенное, после того как BTCPay Server генерирует 20 последовательных неоплаченных счетов, внешний кошелек прекращает получение транзакций, предполагая, что новых транзакций не произошло. Ваш внешний кошелек не покажет их, как только счета будут оплачены на 21-й, 22-й и т. д. С другой стороны, внутренне кошелек BTCPay Server отслеживает любой генерируемый им адрес вместе с гораздо большим лимитом пропуска. Он не зависит от сторонних сервисов и всегда может показывать корректный баланс.
2. Решение проблемы с лимитом гэпов - Если ваш [внешний/существующий кошелек](https://docs.btcpayserver.org/WalletSetup/#use-an-existing-wallet) позволяет настраивать лимит гэпов, простое решение - увеличить его. Однако большинство кошельков такую возможность не предоставляют. Единственные кошельки, позволяющие настраивать лимит гэпов, о которых нам известно, - это Electrum, Wasabi и Sparrow Wallet. К сожалению, с многими другими кошельками вы, скорее всего, столкнетесь с проблемой. Для лучшего пользовательского опыта и конфиденциальности рассмотрите возможность отказа от внешних кошельков и использования внутреннего кошелька BTCPay Server.

#### BTCPay Server использует “mempoolfullrbf=1”

BTCPay Server использует “mempoolfullrbf=1”; мы добавили это как настройку по умолчанию для вашей установки BTCPay Server. Однако мы также сделали это фрагментом, который вы можете отключить самостоятельно. Без “mempoolfullrbf=1”, если клиент осуществляет двойную трату платежа с транзакцией, не сигнализирующей о RBF, продавец узнает об этом только после подтверждения.

Администратор может захотеть отказаться от этой настройки. Следующей строкой вы можете изменить установленное по умолчанию значение.

```
BTCPAYGEN_EXCLUDE_FRAGMENTS="$BTCPAYGEN_EXCLUDE_FRAGMENTS;opt-mempoolfullrbf"
. btcpay-setup.sh -i**
```

### Настройки кошелька BTCPay Server

Настройки кошелька в BTCPay Server дают четкое и быстрое представление о общих настройках вашего кошелька. Все эти настройки предварительно заполнены, если кошелек был создан с помощью BTCPay Server.

![image](assets/en/19.webp)

Настройки кошелька в BTCPay Server дают четкое и быстрое представление о общих настройках вашего кошелька. Настройки кошелька BTCPay Server начинаются со статуса кошелька. Является ли он кошельком только для просмотра или горячим кошельком? В зависимости от типа кошелька, действия могут варьироваться от повторного сканирования кошелька на предмет пропущенных транзакций, удаления старых транзакций из истории, регистрации кошелька для платежных ссылок или замены и удаления текущего кошелька, прикрепленного к магазину. В настройках кошелька BTCPay Server администраторы могут установить метку для кошелька для лучшего управления им. Здесь администратор также сможет увидеть схему производных, ключ учетной записи (xpub), отпечаток и путь ключа. Платежи в настройках кошелька имеют только 2 основные настройки. Платеж считается недействительным, если транзакция не подтверждается в течение (установленных минут) после истечения срока действия счета. Считать счет подтвержденным, когда платежная транзакция имеет X количество подтверждений. Администраторы также могут установить переключатель для отображения рекомендуемых комиссий при платежах или установить вручную цель подтверждения в количестве блоков.

![image](assets/en/20.webp)

**!Внимание!**

Если вы проходите этот курс самостоятельно, создание этого аккаунта может быть чем-то, что вы могли бы сделать на стороннем хосте, поэтому мы снова упоминаем, что никогда не следует использовать их в производственных средах, а только для целей обучения.

### Пример

#### Настройка Bitcoin кошелька в BTCPay Server

BTCPay Server позволяет два способа настройки кошелька. Один из способов - импорт уже существующего Bitcoin кошелька. Импорт можно выполнить, подключив аппаратный кошелек, импортировав файл кошелька, введя расширенный публичный ключ, отсканировав QR-код кошелька или, наименее предпочтительно, введя вручную ранее созданный сид восстановления кошелька. В BTCPay Server также возможно создать новый кошелек. Существует два возможных способа настройки BTCPay Server при генерации нового кошелька.
Опция горячего кошелька в BTCPay Server позволяет использовать функции, такие как 'Payjoin' или 'Liquid'. Однако есть недостаток: восстановительная фраза, созданная для этого кошелька, будет храниться на сервере, откуда любой, кто имеет контроль Админа, может получить доступ к восстановительной фразе. Поскольку ваш приватный ключ производится из вашей восстановительной фразы, злоумышленник может получить доступ к вашим текущим и будущим средствам!
Чтобы снизить такой риск в BTCPay Server, Админ может установить в настройках сервера > Политики > "Разрешить неадминам создавать горячие кошельки для их магазинов" в значение нет, как это установлено по умолчанию. Для повышения безопасности этих горячих кошельков администратор сервера должен включить двухфакторную аутентификацию для аккаунтов, которым разрешено иметь горячие кошельки. Хранение приватных ключей на публичном сервере опасно и сопряжено с рисками. Некоторые из них аналогичны рискам Сети Молний (см. следующую главу о рисках Сети Молний).

Второй вариант, который предлагает BTCPay Server для создания нового кошелька, - это создание кошелька только для просмотра. BTCPay Server сгенерирует ваши приватные ключи один раз. После того как пользователь подтвердит, что он записал свою фразу-сид, BTCPay Server удалит приватные ключи с сервера. В результате ваш магазин теперь имеет кошелек только для просмотра, подключенный к нему. Чтобы потратить полученные на ваш кошелек только для просмотра средства, см. главу Как отправить, используя либо BTCPay Server Vault, PSBT (частично подписанная биткойн-транзакция), или, что наименее рекомендуется, вручную предоставляя вашу фразу-сид.

Вы создали новый 'Магазин' в последней части. Мастер установки продолжит работу, предложив "Настроить кошелек" или "Настроить узел Lightning". В этом примере вы будете следовать процессу мастера "Настроить кошелек" (1).

![изображение](assets/en/21.webp)

После нажатия "Настроить кошелек", мастер продолжит работу, запрашивая, как вы хотите продолжить; BTCPay Server теперь предлагает опцию подключения существующего биткойн-кошелька к вашему новому магазину. Если у вас нет кошелька, BTCPay Server предлагает создать новый. В этом примере будут следовать шаги для "создания нового кошелька" (2). Следуйте шагам, чтобы узнать, как "Подключить существующий кошелек" (1).

![изображение](assets/en/22.webp)

**!Примечание!**

Если вы проходите этот курс в классе, текущий пример и сгенерированная нами фраза-сид предназначены только для образовательных целей. На этих адресах никогда не должно быть никаких значительных сумм, кроме необходимых в течение упражнений.

(1) Продолжите мастер "Новый кошелек", нажав на кнопку "Создать новый кошелек".

![изображение](assets/en/23.webp)

(2) После нажатия "Создать новый кошелек" следующее окно мастера предложит опции "Горячий кошелек" и "Кошелек только для просмотра". Если вы следуете инструкциям преподавателя, ваша среда - это общая демонстрация, и вы можете создать только кошелек только для просмотра. Обратите внимание на разницу между обеими фигурами ниже. Поскольку вы находитесь в демо-среде и следуете инструкциям преподавателя, создайте "Кошелек только для просмотра" и продолжите с мастером "Новый кошелек".

![изображение](assets/en/24.webp)

![изображение](assets/en/25.webp)

(3) Продолжая мастер нового кошелька, вы теперь находитесь в разделе Создание BTC кошелька только для просмотра. Здесь мы можем установить тип адреса кошелька "Address type", который позволяет BTCPay Server выбрать предпочтительный тип адреса; на момент написания этого курса все еще рекомендуется использовать адреса bech32. Узнайте подробнее о адресах в первой главе этой части.

- Segwit (bech32)
- Native SegWit - это адреса, которые начинаются с `bc1q`. - Пример: `bc1qXXXXXXXXXXXXXXXXXXXXXX`
- Legacy
  - Адреса Legacy начинаются с цифры `1`.
  - Пример: `15e15hXXXXXXXXXXXXXXXXXXXX`
- Taproot (Для опытных пользователей)
  - Адреса Taproot начинаются с `bc1p`.
  - Пример: `bc1pXXXXXXXXXXXXXXXXXXXXXXXX`
- Обернутый Segwit
  - Адреса обернутого Segwit начинаются с `3`.
  - Пример: `37BBXXXXXXXXXXXXXXX`

Выберите segwit (рекомендуется) как предпочтительный тип адреса вашего кошелька.

![изображение](assets/en/26.webp)

(4) При настройке параметров кошелька, BTCPay Server позволяет пользователям установить необязательную фразу-пароль через BIP39, обязательно подтвердите ваш пароль.

![изображение](assets/en/27.webp)

(5) После настройки типа адреса кошелька и, возможно, установки некоторых дополнительных опций, нажмите Создать, и BTCPay Server сгенерирует ваш новый кошелек. Обратите внимание, что это последний шаг перед генерацией вашей фразы-семени. Убедитесь, что вы делаете это в окружении, где никто не сможет украсть фразу-семя, глядя на ваш экран.

![изображение](assets/en/28.webp)

(6) На следующем экране мастера BTCPay Server показывает вам фразу-семя для восстановления вашего вновь созданного кошелька; это ключи для восстановления вашего кошелька и подписания транзакций. BTCPay Server генерирует фразу-семя из 12 слов. Эти слова будут удалены с сервера после этого этапа настройки. Этот кошелек является исключительно кошельком только для просмотра. Рекомендуется не хранить эту фразу-семя в цифровом виде или в виде фотографического изображения. Пользователи могут продолжить работу в мастере только после того, как активно подтвердят, что они записали свою фразу-семя.

![изображение](assets/en/29.webp)

(7) После нажатия на Готово и обеспечения безопасности вновь сгенерированной фразы-семени Bitcoin, BTCPay Server обновит ваш магазин с прикрепленным новым кошельком и будет готов к приему платежей. В пользовательском интерфейсе, в левом навигационном меню, обратите внимание, как Bitcoin теперь выделен и активирован в разделе Кошелек.

![изображение](assets/en/30.webp)

### Пример: Запись фразы-семени

Это очень особенный и безопасный момент для использования Bitcoin. Как было сказано ранее, только вы должны иметь доступ или знания о вашей фразе-семени. Следуя инструкциям инструктора и класса, сгенерированная фраза должна использоваться только в рамках этого курса. Слишком много факторов, таких как любопытные глаза одноклассников, незащищенные системы и многие другие, делают эти ключи исключительно образовательными и ненадежными. Однако сгенерированные ключи все же следует хранить для примеров курса.

Первый метод, который мы будем использовать в данной ситуации, также самый менее безопасный, - это запись фразы-семени в правильном порядке. Карточка для записи фразы-семени находится в учебных материалах, предоставленных студенту или найденных на GitHub BTCPay Server. Мы будем использовать эту карточку для записи слов, сгенерированных на предыдущем шаге. Убедитесь, что вы записываете их в правильном порядке. После того как вы их записали, сверьте их с тем, что было дано программным обеспечением, чтобы убедиться, что вы записали их в правильном порядке. После того как вы их записали, отметьте флажок, подтверждающий, что вы правильно записали вашу фразу-семени.

### Пример: Хранение фразы-семени на аппаратном кошельке

В этом курсе мы касаемся хранения фразы-семени на аппаратном кошельке. Следование этому курсу под руководством инструктора может не всегда включать такое устройство. В материалах курса написан список аппаратных кошельков, которые подходят для этого упражнения.
Мы будем использовать хранилище BTCPay Server и аппаратный кошелек Blockstream Jade в этом примере.
Вы также можете следовать инструкциям по видео для справки о подключении аппаратного кошелька.
![BTCPay Server - Как подключить ваш аппаратный кошелек к BTCPay Vault.](https://youtu.be/s4qbGxef43A)

Скачать хранилище BTCPay Server: https://github.com/btcpayserver/BTCPayServer.Vault/releases

Убедитесь, что вы скачали правильные файлы для вашей системы. Пользователи Windows должны скачать пакет [BTCPayServerVault-2.0.5-setup.exe](https://github.com/btcpayserver/BTCPayServer.Vault/releases/download/Vault%2Fv2.0.5/BTCPayServerVault-2.0.5-setup.exe), пользователи Mac скачивают [BTCPayServerVault-osx-x64-2.0.5.dmg](https://github.com/btcpayserver/BTCPayServer.Vault/releases/download/Vault%2Fv2.0.5/BTCPayServerVault-osx-x64-2.0.5.dmg), а пользователи Linux должны скачать [BTCPayServerVault-Linux-2.0.5.tar.gz](https://github.com/btcpayserver/BTCPayServer.Vault/releases/download/Vault%2Fv2.0.5/BTCPayServerVault-Linux-2.0.5.tar.gz)

После установки хранилища BTCPay Server запустите программное обеспечение, кликнув по иконке на вашем рабочем столе. Когда хранилище BTCPay Server установлено правильно и запущено в первый раз, оно запросит разрешение на использование с веб-приложениями. Оно попросит предоставить доступ к конкретному BTCPay Server, с которым вы работаете. Примите эти условия. Хранилище BTCPay Server теперь начнет поиск аппаратного устройства. Как только устройство будет найдено, BTCPay Server распознает, что хранилище работает и получило данные вашего устройства.

**!Внимание!**

Не передавайте ваши SSH ключи или учетную запись администратора сервера никому, кроме администраторов, при использовании горячего кошелька. Любой, у кого есть доступ к этим учетным записям, будет иметь доступ к средствам в горячем кошельке.

### Сводка навыков

В этом разделе вы узнали следующее:

- Представление транзакций биткойн-кошелька и его различные категоризации.
- Различные варианты отправки из биткойн-кошелька, от аппаратных до горячих кошельков.
- Проблема лимита промежутков, с которой сталкиваются при использовании большинства кошельков, и как это исправить.
- Как сгенерировать новый биткойн-кошелек в BTCPay Server, включая сохранение ключей в аппаратном кошельке и резервное копирование фразы восстановления.

В этой цели вы узнали, как сгенерировать новый биткойн-кошелек в BTCPay Server. Мы еще не рассмотрели, как защитить или использовать эти ключи. В кратком обзоре этой цели вы узнали, как настроить первый магазин. Вы узнали, как сгенерировать фразу восстановления биткойн-кошелька.

### Практический обзор оценки знаний

Опишите метод генерации ключей и схему их защиты, а также компромиссы/риски данной схемы безопасности.

## BTCPay Server Lightning Wallet

<chapterId>1bbece7e-0197-57e6-a93a-561cf384d946</chapterId>

Когда администратор сервера настраивает новый экземпляр BTCPay Server, он может установить реализацию сети Lightning, LND, Core Lightning или Eclair; смотрите раздел Конфигурирование BTCPay Server для более подробных инструкций по установке.
Если за процессом следует класс, подключение узла Lightning к вашему серверу BTCPay осуществляется через пользовательский узел. Пользователь, который не является администратором сервера на BTCPay Server, по умолчанию не сможет использовать внутренний узел Lightning. Это сделано для защиты владельца сервера от потери его средств. Администраторы серверов могут установить плагин, чтобы предоставить доступ к своему узлу Lightning через LNBank; это выходит за рамки данной книги; подробнее о LNBank читайте на официальной странице плагина.

### Подключение внутреннего узла (администратор сервера)

Администратор сервера может использовать внутренний узел Lightning сервера BTCPay. Независимо от реализации Lightning, подключение к внутреннему узлу Lightning происходит одинаково.

Перейдите в ранее настроенный магазин и нажмите на "Lightning" кошелек в левом меню. Сервер BTCPay предлагает две возможности настройки: использование внутреннего узла (только для администратора сервера по умолчанию) или пользовательского узла (внешнее подключение). Администраторы серверов могут нажать на опцию "Использовать внутренний узел". Дополнительная настройка не требуется. Нажмите кнопку "сохранить" и обратите внимание на уведомление, гласящее: "BTC Lightning узел обновлен". Теперь магазин успешно получил возможности сети Lightning.

### Подключение внешнего узла (пользователь сервера/владелец магазина)

Поскольку владельцам магазинов по умолчанию не разрешено использовать узел Lightning администратора сервера. Необходимо выполнить подключение к внешнему узлу, будь то узел, принадлежащий владельцу магазина до настройки сервера BTCPay, плагин LNBank, если он предоставлен администратором сервера, или решение хранения данных, например, Alby.

Перейдите в ранее настроенный магазин и нажмите "Lightning" под кошельками в левом меню. Поскольку владельцам магазинов по умолчанию не разрешено использовать внутренний узел, этот вариант будет неактивен. Использование пользовательского узла - единственный вариант, доступный владельцам магазинов по умолчанию.

Серверу BTCPay необходима информация для подключения; предварительно созданный узел (или решение для хранения данных) предоставит эту информацию, специфичную для реализации Lightning. В сервере BTCPay владельцы магазинов могут использовать следующие подключения:

- C-lightning через TCP или Unix domain socket connection.
- Lightning Charge через HTTPS
- Eclair через HTTPS
- LND через REST proxy
- LNDhub через REST API

![image](assets/en/31.webp)

Нажмите "проверить соединение", чтобы убедиться, что вы правильно ввели данные для подключения. После подтверждения успешного соединения нажмите сохранить, и BTCPay Server покажет, что магазин обновлен с узлом Lightning.

### Управление внутренним узлом Lightning LND (администратор сервера)

После подключения внутреннего узла Lightning администраторы серверов заметят новые плитки на панели управления, специально для информации о Lightning.

- Баланс Lightning
- BTC в каналах
  - BTC открывающие каналы
  - BTC локальный баланс
  - BTC удаленный баланс
  - BTC закрывающие каналы
- BTC в блокчейне
  - BTC подтвержденные
  - BTC неподтвержденные
  - BTC зарезервированные
- Сервисы Lightning
  - Ride the Lightning (RTL).

Нажав либо на логотип Ride the Lightning в плитке "Сервисы Lightning", либо на "Lightning" под кошельками в левом меню, администраторы серверов могут перейти к RTL для управления узлом Lightning.

**Внимание!**

Если подключение внутреннего узла Lightning не удается - Если внутреннее подключение не удается, убедитесь:

1. Что узел Bitcoin в блокчейне полностью синхронизирован
2. Что внутренний узел Lightning "Включен" в разделе "Lightning" > "Настройки" > "Настройки BTC Lightning"
   Если вы не можете подключиться к вашему Lightning-узлу, попробуйте перезагрузить сервер или прочитайте дополнительные сведения в официальной документации BTCPay Server; https://docs.btcpayserver.org/Troubleshooting/ . Вы не сможете принимать платежи в Lightning в вашем магазине, пока ваш Lightning-узел не будет отображаться как "Онлайн". Попробуйте проверить свое соединение с Lightning, нажав на ссылку "Public Node Info".

### Кошелек Lightning

В опции кошелька Lightning на левой панели меню администраторы сервера найдут удобный доступ к RTL, их Public node Info и специфическим настройкам Lightning для их магазина BTCPay Server.

#### Внутренняя информация об узле

Администраторы сервера могут нажать на внутреннюю информацию об узле и посмотреть статус своего сервера (Онлайн/Оффлайн) и строку подключения для Clearnet или Tor.

![изображение](assets/en/32.webp)

#### Изменение подключения

Если владелец магазина решит использовать изменения в настройках Lightning - Изменить подключение.
Рядом с информацией о Public Node владельцы магазинов найдут эту опцию. Это вернет к первоначальной настройке для внешнего подключения к узлу Lightning, нужно заполнить новую информацию об узле Lightning, нажать сохранить и обновить магазин новой информацией об узле.

![изображение](assets/en/33.webp)

#### Сервисы

Если администратор сервера решит установить несколько сервисов для реализации Lightning, они будут перечислены здесь. Со стандартной реализацией LND администраторы будут иметь Ride The Lightning (RTL) как стандартный инструмент для управления узлом.

#### Настройки кошелька BTC Lightning

После добавления узла Lightning в магазин на предыдущем шаге, в настройках кошелька Lightning владельцы магазинов все еще могут выбрать деактивацию его для своего магазина, используя переключатель в верхней части настроек Lightning.

![изображение](assets/en/34.webp)

#### Опции платежа Lightning

Владельцы магазинов могут установить параметры для следующего, чтобы улучшить опыт использования Lightning для своих клиентов.

- Отображение сумм платежей Lightning в сатоши.
- Добавление подсказок для приватных каналов к счету Lightning.
- Объединение URL/QR-кодов платежей в цепочке и Lightning при оформлении заказа.
- Установка шаблона описания для счетов Lightning.

#### LNURL

Владельцы магазинов могут выбрать использование или неиспользование LNURL. URL сети Lightning, или LNURL, является предложенным стандартом для взаимодействий между плательщиком и получателем в сети Lightning. Короче говоря, LNURL - это bech32-кодированный URL, начинающийся с lnurl. От кошелька Lightning ожидается, что он декодирует URL, связывается с URL и ожидает объект JSON с дальнейшими инструкциями, в частности, с тегом, определяющим поведение knurl.

- Включить LNURL
- Классический режим LNURL
  - Для совместимости кошельков, Bech32-кодированный (классический) против простого текстового URL (предстоящий)
- Разрешить получателю передавать комментарий.

### Пример 1

#### Подключение к Lightning с внутренним узлом (Администратор)

Этот вариант доступен только если вы являетесь Администратором этого экземпляра или если Администратор изменил настройки по умолчанию, позволяющие пользователям использовать внутренний узел Lightning.

Как администратор, нажмите на Кошелек Lightning в левой панели меню. BTCPay Server предложит использовать один из двух вариантов для подключения узла Lightning: внутренний узел или настраиваемый внешний узел. Нажмите на использование внутреннего узла и сохраните.

#### Управление вашим узлом Lightning (RTL)

После подключения к внутреннему узлу Lightning, BTCPay Server обновится и покажет уведомление "BTC Lightning node updated", подтверждая, что вы теперь подключили Lightning к вашему магазину.

Управление узлом Lightning - задача для Администратора сервера. Это включает в себя:

- Управление транзакциями
- Управление ликвидностью
  - Входящая ликвидность
  - Исходящая ликвидность
- Управление пирами и каналами
  - Подключенные пиры
  - Комиссии за каналы
  - Статус каналов
- Регулярное создание резервных копий состояний каналов.
- Проверка отчетов о маршрутизации.
- В качестве альтернативы можно использовать такие сервисы, как Loop.

Управление узлом Lightning выполняется стандартно с помощью RTL (предполагается, что вы используете реализацию LND). Администраторы могут нажать на свой Lightning кошелек в BTCPay Server и найти кнопку для открытия RTL. Главная панель управления BTCPay Server теперь обновлена с плитками Lightning Network, включая быстрый доступ к RTL.

### Пример 2

#### Подключение к Lightning с помощью Alby

При подключении с кастодиальным сервисом, таким как Alby, владельцам магазинов сначала следует создать аккаунт, посетив: https://getalby.com/

![изображение](assets/en/35.webp)

После создания аккаунта Alby перейдите в ваш магазин на BTCPay Server.

Шаг 1: Нажмите "Настроить узел Lightning" на панели управления или "Lightning" под кошельками.

![изображение](assets/en/36.webp)

Шаг 2: Введите данные для подключения кошелька, предоставленные Alby. На панели управления Alby нажмите на Кошелек. Здесь вы найдете "Данные для подключения кошелька". Скопируйте эти данные. Вставьте данные от Alby в поле конфигурации подключения на сервере BTCPay.

![изображение](assets/en/37.webp)

Шаг 3: После предоставления BTCPay Server деталей подключения, нажмите кнопку "Тестировать подключение", чтобы убедиться, что подключение работает правильно. Обратите внимание на сообщение "Подключение к узлу lightning успешно" в верхней части экрана. Это подтверждает, что все работает как надо.

![изображение](assets/en/38.webp)

Шаг 4: Нажмите сохранить, и ваш магазин теперь подключен к узлу lightning от Alby.

![изображение](assets/en/39.webp)

**!Внимание!**

Никогда не доверяйте кастодиальному решению Lightning больше, чем вы готовы потерять.

### Резюме навыков

В этом разделе вы узнали:

- Как подключить внутренний или внешний узел Lightning
- Содержание и функции различных плиток, связанных с Lightning, на панели управления
- Как настроить кошелек Lightning с использованием Voltage Surge или Alby

### Практический обзор оценки знаний

Опишите некоторые из различных вариантов подключения кошелька Lightning к вашему магазину.

# Интерфейс BTCPay Server

<partId>25e88b81-e1ab-515f-a035-09f2a3075556</partId>

## Обзор панели управления

<chapterId>410ff28b-a272-5c91-93e0-48d5b28c53ab</chapterId>

BTCPay Server - это модульный программный пакет. Однако существуют стандарты, которым соответствует каждый BTCPay Server, и с которыми взаимодействуют администраторы/пользователи. Начиная с панели управления. Основная точка входа в каждый BTCPay Server после входа в систему. Панель управления дает обзор того, как ваш магазин работает, текущий баланс кошелька и последние транзакции за последние 7 дней. Поскольку это модульный вид, плагины могут использовать этот вид для своих целей и создавать свои плитки на панели управления. В этом учебном пособии мы будем говорить только о стандартных плагинах/приложениях и их соответствующих видах в BTCPay Server.

### Плитки панели управления

В основном виде панели управления BTCPay Server доступно несколько стандартных плиток. Эти плитки предназначены для того, чтобы владелец магазина или администратор мог быстро управлять своим магазином в одном обзоре.

- Баланс кошелька
- Активность транзакций
- Баланс Lightning (если Lightning включен в магазине)
- Сервисы Lightning (если Lightning включен в магазине)
- Недавние транзакции.
- Недавние счета
- Текущие активные краудфандинги
- Производительность магазина / самые продаваемые товары.
  Плитка "Баланс кошелька" предоставляет быстрый обзор средств и производительности вашего кошелька. Ее можно просмотреть в BTC или в фиатной валюте на графике за неделю, месяц или год.
  ![image](assets/en/40.webp)

### Активность транзакций

Рядом с плиткой "Баланс кошелька", BTCPay Server показывает краткий обзор ожидающих выплат, количество транзакций за последние 7 дней, и были ли в вашем магазине совершены возвраты. Нажатие на кнопку "Управление" переводит вас в управление ожидающими выплатами (узнайте больше о выплатах в BTCPay Server - глава "Платежи").

![image](assets/en/41.webp)

### Баланс Lightning

Отображается только при активации Lightning.

Когда администратор предоставил доступ к сети Lightning, на панели управления BTCPay Server теперь есть новая плитка с информацией о вашем узле Lightning. Сколько BTC находится в каналах, как это сбалансировано локально или удаленно (входящая или исходящая ликвидность), закрываются ли каналы или открываются, и сколько биткоинов хранится на узле Lightning в блокчейне.

![image](assets/en/42.webp)

### Сервисы Lightning

Отображается только при активном Lightning.

Помимо просмотра вашего баланса Lightning на панели управления BTCPay Server, администраторы также увидят плитку для Сервисов Lightning. Здесь администраторы могут найти быстрые кнопки для инструментов, которые они используют для управления своим узлом Lightning; например, Ride the Lightning является одним из стандартных инструментов с BTCPay Server для управления узлом Lightning.

![image](assets/en/43.webp)

### Недавние транзакции

Плитка недавних транзакций покажет самые последние транзакции вашего магазина. Одним кликом администратор экземпляра BTCPay Server теперь может увидеть последнюю транзакцию и проверить, требуется ли внимание к ней.

![image](assets/en/44.webp)

### Недавние счета

Плитка недавних счетов показывает 6 последних счетов, выставленных вашим BTCPay Server, включая статус и сумму счета. Плитка также включает кнопку "Просмотреть все" для легкого доступа к полному обзору счетов.

![image](assets/en/45.webp)

### Точка продаж и Краудфандинг

Поскольку BTCPay Server предоставляет набор стандартных плагинов или приложений, Точка продаж и Краудфандинг являются двумя основными плагинами BTCPay Server. С каждым магазином и кошельком пользователь BTCPay Server может создавать столько Точек продаж или Краудфандингов, сколько он считает нужным. Каждый из них создаст новую плитку на панели управления, показывающую производительность плагинов.

![image](assets/en/46.webp)

Обратите внимание на небольшое различие между плиткой Точки продаж и Краудфандинга. Администратор видит самые продаваемые товары в плитке Точки продаж. В плитке Краудфандинга это становится Топовыми привилегиями. Обе плитки имеют быстрые кнопки для управления соответствующим приложением и просмотра недавних счетов, созданных за счет топовых товаров или привилегий.

![image](assets/en/47.webp)

**!?Примечание!?**

Графики баланса и недавние транзакции доступны только для метода оплаты через блокчейн. Информация о балансах и транзакциях в сети Lightning находится в разработке. Начиная с версии BTCPay Server 1.6.0, доступны базовые балансы сети Lightning.

### Сводка навыков

В этом разделе вы узнали следующее:

- Основное расположение плиток на главной странице, известной как Панель управления.
- Базовое понимание содержания каждой плитки.

### Обзор оценки знаний

Перечислите столько плиток с Панели управления, сколько сможете вспомнить.

## BTCPay Server - Настройки магазина

<chapterId>e8faef7b-278d-550e-a511-bc3a442daf64</chapterId>

В программном обеспечении BTCPay Server мы знаем о двух типах настроек. Специфические настройки магазина BTCPay Server, кнопка настроек, найденная в левом меню ниже Dashboard, и настройки BTCPay Server, найденные в нижней части меню выше Account. Специфические настройки сервера BTCPay Server могут просматриваться только администраторами сервера.
Настройки магазина состоят из множества вкладок для категоризации каждого набора настроек.

- Общие
- Курсы
- Внешний вид при оформлении заказа
- Токены доступа
- Пользователи
- Роли
- Вебхуки
- Процессоры выплат
- Электронные письма
- Формы

### Общие

На вкладке Общие настройки владельцы магазинов устанавливают свой брендинг и стандартные настройки платежей. При первоначальной настройке магазина было задано имя магазина; это будет отражено в Общих настройках под Названием магазина. Здесь владелец магазина также может настроить свой веб-сайт в соответствии с брендингом и ID магазина для узнаваемости администратором в базе данных.

#### Брендинг

Поскольку BTCPay Server является FOSS (свободным и открытым программным обеспечением), владелец магазина может настроить брендинг под свой магазин. Установите цвет бренда, сохраните логотипы вашего бренда и добавьте пользовательский CSS для страниц, видимых покупателями/клиентами (Счета-фактуры, Запросы на оплату, Платежи по запросу).

#### Платежи

В настройках платежей владельцы магазинов могут установить стандартную валюту магазина (в биткойнах или любой фиатной валюте).

#### Разрешить всем создавать счета-фактуры

Эта настройка предназначена для разработчиков или строителей на базе BTCPay Server. С включенной этой настройкой для вашего магазина она позволяет внешнему миру создавать счета-фактуры на вашем экземпляре BTCPay Server.

#### Добавить дополнительную плату (сетевую плату) к счетам-фактурам

Функция в BTCPay для защиты продавцов от атак пыли или клиентов, которые могут привести к высоким расходам на платежи позже, когда продавцу нужно будет переместить большое количество биткойнов за раз. Например, клиент создал счет-фактуру на 20$ и оплатил его частично, платя 1$ 20 раз, пока счет-фактура не был полностью оплачен. Теперь у продавца большая транзакция, увеличивающая стоимость майнинга в случае, если продавец решит позже переместить эти средства. По умолчанию BTCPay применяет дополнительную сетевую стоимость к общей сумме счета-фактуры, чтобы покрыть этот расход для продавца, когда счет-фактура оплачивается несколькими транзакциями. BTCPay предлагает несколько вариантов для настройки этой функции защиты. Вы можете применить сетевую плату:

- Только если клиент совершает более одного платежа по счету-фактуре (В приведенном выше примере, если клиент создал счет-фактуру на 20\$ и оплатил 1\$, теперь общая сумма к оплате составляет 19\$ + сетевая плата. Сетевая плата применяется после первого платежа)
- За каждый платеж (включая первый платеж, в нашем примере общая сумма будет 20\$ + сетевая плата сразу же, даже при первом платеже)
- Никогда не добавлять сетевую плату (полностью отключает сетевую плату)

Хотя это защищает от транзакций пыли, это также может негативно сказаться на бизнесе, если это не объяснить должным образом. У клиентов могут возникнуть дополнительные вопросы, и они могут подумать, что вы перезаряжаете их.

#### Счет-фактура считается просроченным, если полная сумма не была оплачена после?

Таймер счета-фактуры по умолчанию установлен на 15 минут. Таймер является механизмом защиты от волатильности, поскольку он фиксирует количество биткойнов в соответствии с курсом биткойна к фиатным валютам. Если клиент не оплачивает счет-фактуру в установленный период, счет-фактура считается просроченным. Счет-фактура считается "оплаченным", как только транзакция видна в блокчейне (0 подтверждений), но считается "завершенным", когда он достигает количества подтверждений, определенных продавцом (обычно, 1-6). Таймер можно настраивать по минутам.

#### Считать счет-фактуру оплаченным, даже если оплаченная сумма на X% меньше ожидаемой?

Когда клиент использует кошелек на бирже для прямой оплаты счета, биржа взимает небольшую комиссию. Это означает, что такой счет не считается полностью оплаченным. Счет получает статус "частично оплачен". Здесь вы можете установить процентную ставку, если продавец хочет принимать недоплаченные счета.

### Тарифы

В BTCPay Server, когда генерируется счет, всегда необходима самая актуальная и точная цена Bitcoin к фиату. При создании нового магазина в BTCPay Server, администраторов просят установить предпочтительный источник цен; после настройки магазина, владельцы магазинов всегда могут изменить источник цен в этой вкладке.

#### Расширенное правило скриптования тарифов

В основном используется опытными пользователями. Если включено, владельцы магазинов могут создавать скрипты вокруг поведения цен и как взимать плату с их клиентов.

#### Тестирование

Быстрое тестировое место для ваших предпочтительных валютных пар. Это также включает функцию проверки стандартных валютных пар через REST запрос.

### Внешний вид оформления заказа

Вкладка внешнего вида оформления заказа начинается с настроек специфичных для счета и стандартного способа оплаты и позволяет включать конкретные способы оплаты, когда выполняются установленные требования.

#### Настройки счета

Стандартные способы оплаты. BTCPay Server в стандартной конфигурации имеет три варианта.

- BTC (через цепочку)
- BTC (LNURL-pay)
- BTC (Вне цепочки & Lightning)

Мы можем установить параметры для нашего магазина, где клиент будет взаимодействовать только с Lightning, когда цена меньше X суммы, и наоборот для транзакций через цепочку, когда X больше Y всегда представлять опцию оплаты через цепочку.

![изображение](assets/en/48.webp)

#### Оформление заказа

Начиная с выпуска BTCPay Server 1.7, был представлен новый интерфейс оформления заказа, Checkout V2, как его называют. С момента выпуска 1.9 это стало стандартом, администраторы и владельцы магазинов все еще могут установить оформление заказа на предыдущую версию. Используя переключатель "Использовать классическое оформление заказа", владелец магазина может вернуть магазин к предыдущему опыту оформления заказа. BTCPay Server также имеет набор предустановок для онлайн-коммерции или внутреннего опыта.

![изображение](assets/en/49.webp)

Когда клиент взаимодействует с магазином и генерирует счет, у счета есть время истечения. По умолчанию BTCPay Server устанавливает это время в 5 минут, и Администратор может установить это время как ему угодно. Страницу оформления заказа можно дополнительно настроить, проверив следующие параметры:

- Праздновать оплату, показывая конфетти
- Показывать заголовок магазина (Название и логотип)
- Показывать кнопку "Оплатить в кошельке"
- Объединять URL/QR для оплаты через цепочку и вне цепочки
- Отображать суммы платежей Lightning в Сатоши
- Автоматическое определение языка при оформлении заказа

![изображение](assets/en/50.webp)

Когда автоматическое определение языка не установлено, BTCPay Server по умолчанию будет отображать английский. Владелец магазина может изменить это стандартное значение на предпочитаемый им язык.

![изображение](assets/en/51.webp)

Нажмите на выпадающий список, и владельцы магазинов могут установить пользовательский HTML заголовок, который будет отображаться на странице оформления заказа.

![изображение](assets/en/52.webp)

Чтобы убедиться, что клиент знает свой способ оплаты, владелец магазина может явно установить свое оформление заказа так, чтобы пользователи всегда выбирали предпочитаемый способ оплаты. Когда счет оплачен, BTCPay Server позволяет клиенту вернуться в веб-магазин. Владельцы магазинов могут установить это перенаправление после оплаты клиентом автоматически.

![изображение](assets/en/53.webp)

#### Публичный чек

В настройках публичного чека владелец магазина может сделать страницы чеков публичными и показать список платежей на странице чека и QR-код чека, чтобы клиент мог легко получить к нему доступ цифровым способом.

### Токены Доступа

Токены доступа используются для подключения к определенным интеграциям с электронной коммерцией или кастомным интеграциям.

### Пользователи

Пользователи магазина - это те, кого владелец магазина может управлять: его сотрудниками, их аккаунтами и доступом к магазину. После того как сотрудники создают свои аккаунты, владелец магазина может добавить конкретных пользователей в магазин как Гостевых пользователей или владельцев. Для дальнейшего определения роли сотрудника обратитесь к следующему разделу о "Настройках магазина BTCPay Server - Роли".

### Роли

Владельцу магазина могут не хватать стандартных ролей пользователей. В настройках кастомных ролей владелец магазина может определить точные потребности для каждой роли в его бизнесе.

(1) Чтобы создать новую роль, нажмите кнопку "+ Добавить роль".

(2) Введите название роли, например, "Кассир".

(3) Настройте индивидуальные разрешения для роли.

- Изменять ваши магазины.
- Управлять связанными с вашими магазинами биржевыми аккаунтами.
  - Просматривать связанные с вашими магазинами биржевые аккаунты.
- Управлять вашими платежами на запрос.
- Создавать платежи на запрос.
  - Создавать неподтвержденные платежи на запрос.
- Изменять счета-фактуры.
  - Просматривать счета-фактуры.
  - Создавать счет-фактуру.
  - Создавать счета-фактуры с узлов Lightning, связанных с вашими магазинами.
- Просматривать ваши магазины.
  - Просматривать счета-фактуры.
  - Просматривать ваши запросы на платеж.
  - Изменять вебхуки магазинов.
- Изменять ваши запросы на платеж.
  - Просматривать ваши запросы на платеж.
- Использовать узлы Lightning, связанные с вашими магазинами.
  - Просматривать счета-фактуры Lightning, связанные с вашими магазинами.
  - Создавать счета-фактуры с узлов Lightning, связанных с вашими магазинами.
- Вносить средства на биржевые аккаунты, связанные с вашими магазинами.
- Снимать средства с биржевых аккаунтов на ваш магазин.
- Торговать средствами на биржевых аккаунтах вашего магазина.

Когда роль создана, ее название фиксируется и не может быть изменено в режиме редактирования.

### Вебхуки

В BTCPay Server достаточно просто создать новый "Вебхук". Во вкладке настроек магазина BTCPay Server - Вебхуки, владелец магазина может легко создать новый вебхук, нажав на "+ Создать Вебхук". Вебхуки позволяют BTCPay Server отправлять HTTP-события, связанные с вашим магазином, на другие серверы или интеграции электронной коммерции.

Вы находитесь в режиме создания Вебхука. Убедитесь, что вы знаете ваш Payload URL и вставьте его в ваш BTCPay Server. Пока вы вставили URL полезной нагрузки, под ним отображается секрет вебхука. Скопируйте секрет вебхука и предоставьте его на конечной точке. Когда все будет настроено, вы можете переключить в BTCPay Server на Автоматическую переотправку. Мы попытаемся переотправить любую неудачную доставку после 10 секунд, 1 минуты и до 6 раз после 10 минут. Вы можете переключаться между каждым событием или указывать события по вашим потребностям. Обязательно активируйте вебхук и нажмите Добавить вебхук, чтобы сохранить его.

Вебхуки не предназначены для совместимости с Bitpay API. В BTCPay Server есть два отдельных IPN (по терминологии BitPay: "Мгновенные Уведомления о Платеже").

- Webhook
- Уведомления

Используйте URL уведомлений только когда вы создаете счета-фактуры через Bitpay API.

### Процессоры Выплат

Процессоры выплат работают вместе с концепцией выплат в BTCPay Server. Агрегатор выплат позволяет объединять несколько транзакций и отправлять их одновременно. С помощью процессоров выплат владелец магазина может автоматизировать пакетные выплаты. BTCPay Server предлагает два метода автоматизированных выплат: через блокчейн (On-chain) и внеблокчейновые (Off-chain, LN).

Владелец магазина может настроить оба процессора выплат отдельно. Владелец магазина может захотеть запускать процессор через блокчейн один раз каждые X часов, в то время как внеблокчейновые выплаты могут происходить каждые несколько минут. Для выплат через блокчейн вы также можете установить цель, в каком блоке они должны быть включены. По умолчанию это установлено на 1 (или следующий доступный блок). Обратите внимание, что настройка процессора внеблокчейновых выплат имеет только таймер интервала и не имеет цели блока. Платежи в сети Lightning выполняются мгновенно.

![изображение](assets/en/62.webp)
![изображение](assets/en/63.webp)

Владельцы магазинов могут настроить процессор через блокчейн только если к их магазину подключен горячий кошелек (Hot-wallet).

![изображение](assets/en/64.webp)

После настройки процессора выплат вы можете быстро удалить или изменить его, вернувшись на вкладку процессора выплат в настройках магазина BTCPay Server.

**!?Обратите внимание!?**

Процессор выплат через блокчейн - Процессор выплат через блокчейн может работать только в магазине, настроенном с подключенным горячим кошельком. Если горячий кошелек не подключен, BTCPay Server не хранит ключи к кошельку и не сможет автоматически обрабатывать выплаты.

### Электронные письма

BTCPay Server может использовать электронные письма для уведомлений или, при правильной настройке, для восстановления аккаунтов, созданных на экземпляре, так как стандартный BTCPay Server не отправляет электронное письмо при потере пароля, например.

![изображение](assets/en/65.webp)

Прежде чем владелец магазина сможет настроить правила электронной почты для срабатывания при определенных событиях его магазина, мы должны настроить некоторые базовые параметры электронной почты. BTCPay Server требуются эти настройки для отправки электронных писем о событиях, основанных на вашем магазине, или для сброса пароля.

BTCPay Server упростил заполнение этой информации с помощью опции "Быстрое заполнение":

- Gmail.com
- Yahoo.com
- Mailgun
- Office365
- SendGrid

Используя опцию быстрого заполнения, BTCPay Server автоматически заполнит поля для SMTP-сервера и порта; теперь владельцу магазина остается только ввести свои учетные данные в адрес электронной почты, логин (который обычно совпадает с вашим адресом электронной почты) и пароль. Расширенная опция, которую BTCPay Server предлагает в настройках электронной почты, - это отключение проверок безопасности TLS-сертификата; по умолчанию эта опция включена.

![изображение](assets/en/66.webp)

С помощью правил электронной почты владелец магазина может настроить отправку электронных писем на определенные адреса при определенных событиях.

- Счет создан
- Счет получил платеж
- Счет обрабатывается
- Счет истек
- Счет урегулирован
- Счет недействителен
- Платеж по счету урегулирован

Если клиент предоставил адрес электронной почты, эти триггеры также могут отправлять информацию клиенту. Владельцы магазинов могут заранее заполнить строку темы, чтобы ясно объяснить, почему было отправлено это электронное письмо и какой триггер его вызвал.

![изображение](assets/en/67.webp)

### Формы

Поскольку BTCPay Server не собирает никаких данных, владелец магазина может захотеть добавить пользовательскую форму к процессу оформления заказа; таким образом, владелец магазина может собрать дополнительную информацию от своего клиента. Конструктор форм BTCPay Server состоит из двух частей: визуального и более продвинутого кодового представления форм.
При создании новой формы BTCPay Server открывает новое окно с запросом базовой информации о том, что вы хотите запросить в вашей новой форме. Сначала владелец магазина должен дать четкое название своей новой форме, это название НЕЛЬЗЯ изменить после его установки.
![image](assets/en/68.webp)

После того как владелец магазина дает форме название, вы также можете переключить переключатель "Разрешить общественное использование формы" в положение ON, и он станет зеленым. Это делается для того, чтобы форма использовалась в каждом месте, видимом покупателям. Например, если владелец магазина создает 1 отдельный счет-фактуру не через свою точку продаж, он все равно может захотеть собрать информацию от покупателя; переключение в положение ON позволяет собирать эту информацию.

![image](assets/en/69.webp)

Каждая форма начинается по крайней мере с 1 нового поля формы. Владелец магазина может выбрать, каким должен быть тип поля:

- Текст
- Число
- Пароль
- Электронная почта
- URL
- Телефонные номера
- Дата
- Скрытые поля
- Группа полей
- Текстовая область для открытых комментариев.
- Селектор опций

Каждый тип сопровождается своими параметрами для заполнения. Владелец магазина может настроить их по своему усмотрению. Ниже первого созданного поля владельцы магазинов могут продолжать добавлять новые поля в эту одну форму.

![image](assets/en/70.webp)

#### Расширенные пользовательские формы

BTCPay Server также позволяет вам создавать формы в коде. В частности, JSON. Вместо того чтобы смотреть на редактор, владельцы магазинов могут нажать на кнопку CODE рядом с редактором и перейти к коду своих форм. В определении поля можно установить только следующие поля; значения полей хранятся в метаданных счета-фактуры:

| Поле                  | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| .fields.constant      | Если true, .value должно быть установлено в определении формы, и пользователь не сможет изменить значение поля. (пример: версия определения формы)                                                                                                                                                                                                                                                                                                                                        |
| .fields.type          | HTML тип ввода текст, радио, чекбокс, пароль, скрытое, кнопка, цвет, дата, datetime-local, месяц, неделя, время, email, число, диапазон, поиск, url, select, tel                                                                                                                                                                                                                                                                                                                          |
| .fields.options       | Если .fields.type это select, список выбираемых значений                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| .fields.options.text  | Текст, отображаемый для этой опции                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| .fields.options.value | Значение поля, если выбрана эта опция                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| .fields.type=fieldset | Создает HTML fieldset вокруг дочерних .fields.fields (см. ниже)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| .fields.name          | Имя свойства JSON поля, как оно будет отображаться в метаданных счета-фактуры                                                                                                                                                                                                                                                                                                                                                                                                             |
| .fields.value         | Значение поля по умолчанию                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| .fields.required      | если true, поле будет обязательным                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| .fields.label         | Метка поля                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| .fields.helpText      | Дополнительный текст для объяснения поля.                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| .fields.fields        | Вы можете организовать свои поля в иерархии, позволяя дочерним полям быть вложенными в метаданные счета. Эта структура может помочь вам лучше организовать и управлять собранной информацией, делая ее более доступной и легкой для интерпретации. Например, если у вас есть форма, которая собирает информацию о клиенте, вы можете сгруппировать поля под родительским полем с названием клиент. В этом родительском поле у вас могут быть дочерние поля, такие как имя, Email и адрес. |

Имя поля представляет собой имя свойства JSON, которое хранит значение, предоставленное пользователем, в метаданных счета. Некоторые известные имена могут быть интерпретированы и изменить настройки счета.

| Имя поля         | Описание     |
| ---------------- | ------------ |
| invoice_amount   | Сумма счета  |
| invoice_currency | Валюта счета |

Вы можете автоматически предзаполнить поля счета, добавив строки запроса к URL формы, например, "?your_field=value".

Вот некоторые примеры использования этой функции:

- Помощь в вводе данных пользователем: Предзаполнение полей известной информацией о клиенте, чтобы упростить им заполнение формы. Например, если вы уже знаете адрес электронной почты клиента, вы можете предзаполнить поле электронной почты, чтобы сэкономить их время.
- Персонализация: Настройка формы в зависимости от предпочтений клиента или сегментации. Например, если у вас есть разные уровни клиентов, вы можете предзаполнить форму соответствующими данными, такими как уровень членства или конкретные предложения.
- Отслеживание: Отслеживание источника посещений клиентов с помощью скрытых полей и предзаполненных значений. Например, вы можете создать ссылки с предзаполненными значениями utm_media для каждого маркетингового канала (например, Twitter, Facebook, Email). Это помогает анализировать эффективность ваших маркетинговых усилий.
- A/B тестирование: Предзаполнение полей разными значениями для тестирования разных версий формы, что позволяет оптимизировать пользовательский опыт и коэффициенты конверсии.

### Сводка навыков

В этом разделе вы узнали следующее:

- Расположение и функции вкладок в Настройках магазина
- Множество опций для точной настройки обработки базовых обменных курсов, частичных платежей, незначительных недоплат и многого другого.
- Настройка внешнего вида оформления заказа, включая зависимость цены от основной цепи по сравнению с активацией Lightning в счетах.
- Управление уровнями доступа к магазину и разрешениями для разных ролей.
- Настройка автоматизированных электронных писем и их триггеров
- Создание пользовательских форм для сбора дополнительной информации о клиенте при оформлении заказа.

### Оценка знаний

#### Обзор KA

В чем разница между Настройками магазина и Настройками сервера?

#### Гипотетический KA

Опишите некоторые опции, которые вы могли бы выбрать в Внешний вид оформления заказа > Настройки счета, и почему.

## BTCPay Server - Настройки сервера

<chapterId>1dd858a2-49ea-586b-9bc1-75a65f508df6</chapterId>

BTCPay Server состоит из двух различных видов настроек. Одни посвящены Настройкам магазина, а другие - Настройкам сервера. Последние доступны только если вы являетесь администратором сервера, а не владельцем магазина. Администраторы сервера могут добавлять пользователей, создавать пользовательские роли, настраивать почтовый сервер, устанавливать политики, выполнять задачи по обслуживанию, проверять все сервисы, прикрепленные к BTCPay Server, загружать файлы на сервер или проверять Журналы.

### Пользователи

Как упоминалось в предыдущей части, Администраторы сервера могут приглашать пользователей на свой сервер, добавляя их во вкладку Пользователи.

### Пользовательские роли на уровне сервера

BTCPay Server знает два вида пользовательских ролей: специфические для магазина пользовательские роли и пользовательские роли на уровне сервера в настройках BTCPay Server. Обе имеют похожий набор разрешений; однако, если установлено через вкладку Настройки BTCPay Server - Роли, применяемая роль будет действовать на уровне сервера и применяться к нескольким магазинам. Обратите внимание на метку "На уровне сервера" у пользовательских ролей в настройках сервера.

### Серверные пользовательские роли

Набор разрешений для пользовательских ролей на уровне сервера:

- Изменение ваших магазинов.
- Управление биржевыми счетами, связанными с вашими магазинами.
  - Просмотр биржевых счетов, связанных с вашими магазинами.
- Управление вашими платежами на запрос.
- Создание платежей на запрос.
  - Создание неподтвержденных платежей на запрос.
- Изменение счетов-фактур.
  - Просмотр счетов-фактур.
  - Создание счета-фактуры.
  - Создание счетов-фактур с узлов Lightning, связанных с вашими магазинами.
- Просмотр ваших магазинов.
  - Просмотр счетов-фактур.
  - Просмотр ваших платежных запросов.
  - Изменение вебхуков магазинов.
- Изменение ваших платежных запросов.
  - Просмотр ваших платежных запросов.
- Использование узлов Lightning, связанных с вашими магазинами.
  - Просмотр счетов-фактур Lightning, связанных с вашими магазинами.
  - Создание счетов-фактур с узлов Lightning, связанных с вашими магазинами.
- Пополнение счетов на бирже, связанных с вашими магазинами.
- Снятие средств с биржевых счетов в ваш магазин.
- Торговля средствами на биржевых счетах вашего магазина.

**!?Обратите внимание!?**

Когда роль создается, ее имя фиксируется и не может быть изменено в режиме редактирования.

### Электронная почта

Настройки электронной почты на уровне сервера выглядят похоже на настройки электронной почты для конкретного магазина. Однако, эта настройка управляет не только триггерами для магазинов или журналами администратора. Эта настройка электронной почты также делает доступным восстановление пароля на сервере BTCPay при входе в систему. Работает аналогично настройкам для конкретного магазина; администраторы могут быстро заполнить параметры своей электронной почты, ввести учетные данные электронной почты, и сервер теперь может отправлять электронные письма.

### Политики

Администраторы политик сервера BTCPay могут установить некоторые настройки по темам, таким как настройки для существующих пользователей, настройки для новых пользователей, настройки уведомлений и настройки обслуживания. Эти настройки предназначены для регистрации новых пользователей как администраторов или обычных пользователей или даже для скрытия сервера BTCPay от поисковых систем, добавляя в заголовок вашего сервера.

#### Настройки для существующих пользователей

Доступные здесь опции отдельны от пользовательских ролей. Эти дополнительные разрешения могут сделать магазин или владельца магазина уязвимыми для атак. Политики, которые могут быть добавлены для существующих пользователей:

- Разрешить неадминистраторам использовать внутренний узел Lightning в их магазинах.
  - Это позволит владельцам магазинов использовать узел Lightning администратора сервера, а следовательно, и его средства! Будьте осторожны, это не решение для доступа к Lightning.
- Разрешить неадминистраторам создавать горячие кошельки для их магазинов.
  - Это позволит любому пользователю с аккаунтом на вашем сервере BTCPay создавать горячие кошельки и хранить их семена восстановления на сервере администратора. Это может сделать администратора ответственным за хранение средств третьих лиц!
- Разрешить неадминистраторам импортировать горячие кошельки для их магазинов.
  - Аналогично предыдущему пункту о создании горячих кошельков, эта политика позволяет импортировать горячий кошелек, с теми же опасностями, упомянутыми в разделе о создании горячих кошельков.

#### Настройки для новых пользователей

Мы можем установить некоторые важные настройки для управления новыми пользователями, приходящими на сервер. Мы можем установить подтверждение по электронной почте для новых регистраций, отключить создание новых пользователей через экран входа в систему и ограничить доступ неадминистраторов к созданию пользователей через API.

- Требовать подтверждение по электронной почте для регистрации.
  - Администратор сервера должен настроить сервер электронной почты!
- Отключить регистрацию новых пользователей на сервере
- Отключить доступ неадминистраторов к API-конечной точке создания пользователя.

По умолчанию на сервере BTCPay включено отключение регистрации новых пользователей и отключен доступ неадминистраторов к API-конечной точке создания пользователя. Это сделано с точки зрения безопасности, чтобы никто случайный, кто мог найти страницу входа BTCPay вашего сервера, не мог начать создавать аккаунты.

#### Настройки уведомлений

![image](assets/en/76.webp)

#### Настройки обслуживания

BTCPay Server - это проект с открытым исходным кодом, который размещается на GitHub. Каждый раз, когда BTCPay Server выпускает новую версию программного обеспечения, администраторы могут получать уведомления о доступности новой версии. Администраторам также может быть интересно предотвратить индексацию домена BTCPay Server поисковыми системами (Google, Yahoo, DuckDuckGo). Поскольку BTCPay Server является FOSS (свободным программным обеспечением с открытым исходным кодом), разработчики по всему миру могут захотеть создавать новые функции; BTCPay Server имеет экспериментальную функцию, которая при включении позволяет администратору использовать функции, не предназначенные для производства, исключительно в тестовых целях.

- Проверять релизы на GitHub и уведомлять, когда доступна новая версия BTCPay Server.
- Запретить поисковым системам индексировать этот сайт.
- Включить экспериментальные функции.

![image](assets/en/77.webp)

#### Плагины

BTCPay Server может добавлять плагины и расширять свой набор функций. Плагины по умолчанию загружаются из репозитория плагин-билдера BTCPay Server. Однако администратор может выбрать просмотр плагинов в состоянии предварительного выпуска, и если разработчик плагина разрешает, администратор сервера теперь может устанавливать бета-версии плагинов.

![image](assets/en/78.webp)

##### Настройки настройки

Стандартная установка BTCPay Server будет доступна через домен, установленный для нее при установке. Однако администратор сервера может переназначить корневой домен и отображать одно из созданных приложений из определенного магазина. Администратор сервера также может сопоставлять конкретные домены с конкретными приложениями.

- Отображать приложение в корне веб-сайта
  - Отображает список возможных приложений для показа на корневом домене.

![image](assets/en/79.webp)

- Сопоставить конкретные домены с конкретными приложениями.
  - Когда вы нажимаете, чтобы настроить конкретный домен для конкретных приложений, администратор может указать столько доменов, сколько необходимо, указывая на конкретные приложения.

![image](assets/en/80.webp)

#### Блок-эксплореры

BTCPay Server стандартно использует mempool.space в качестве блок-эксплорера для транзакций. Когда BTCPay Server генерирует новый счет, и к нему привязана транзакция, владелец магазина может нажать, чтобы открыть транзакцию; BTCPay Server стандартно будет указывать на mempool.space как на блок-эксплорер; администратор сервера может изменить это по своему усмотрению.

![image](assets/en/81.webp)

### Сервисы

Вкладка настроек BTCPay Server: Сервисы представляет собой обзор компонентов, используемых вашим BTCPay Server. Сервисы, которые ваш BTCPay Server предоставляет, могут варьироваться в зависимости от метода развертывания.

Администратор BTCPay Server может нажать на "Смотреть информацию" за каждым сервисом, чтобы открыть его и настроить конкретные параметры.

![image](assets/en/82.webp)

#### LND (gRPC)

BTCPay предоставляет сервис LND gRPC для внешнего использования; здесь вы найдете информацию для подключения; совместимые кошельки перечислены здесь. BTCPay Server также предоставляет QR-код для подключения, который можно сканировать и применять в мобильном кошельке.

Администраторы серверов могут открыть дополнительные детали, чтобы увидеть:

- Информацию о хосте
- Использование SSL
- Macaroon
- AdminMacaroon
- InvoiceMacaroon
- ReadonlyMacaroon
- Набор шифров GRPC SSL (GRPC_SSL_CIPHER_SUITES)

#### LND (REST)

BTCPay предоставляет сервис LND REST для внешнего использования; здесь вы найдете информацию для подключения; совместимые кошельки перечислены здесь. Среди совместимых кошельков - Joule, Alby и ZeusLN. BTCPay Server предоставляет QR-код для подключения, который можно сканировать и применять в совместимом кошельке.

- REST Uri
- Macaroon
- AdminMacaroon - InvoiceMacaroon
- ReadonlyMacaroon

#### Резервное копирование сида LND

Резервное копирование сида LND полезно для восстановления средств из вашего кошелька LND в случае повреждения вашего сервера. Поскольку узел Lightning является горячим кошельком, конфиденциальную информацию о сиде можно найти на этой странице.

LND документирует процесс восстановления. См. https://github.com/lightningnetwork/lnd/blob/master/docs/recovery.md для документации.

#### Ride The Lightning

Ride the Lightning - это инструмент управления узлом Lightning, созданный как программное обеспечение с открытым исходным кодом. BTCPay Server использует RTL как компонент управления узлом Lightning в своем стеке. Администраторы BTCPay Server могут получить доступ к RTL через настройки сервера - вкладку Сервисы или нажав на кошелек Lightning.

#### Полный узел P2P

Администраторы серверов могут захотеть подключить свой Bitcoin-узел к мобильному кошельку. Эта страница предоставляет информацию для удаленного подключения к вашему полному узлу через протокол P2P. На момент написания этой книги, BTCPay Server указывает кошельки Blockstream Green и Wasabi как совместимые кошельки. BTCPay Server предоставляет QR-код для подключения, сканируйте и применяйте в совместимом кошельке.

#### Полный узел RPC

Эта страница предоставляет информацию для удаленного подключения к вашему полному узлу через протокол RPC.

#### SSH

SSH используется для целей обслуживания. BTCPay Server показывает начальную команду подключения к вашему серверу и авторизованные публичные ключи SSH для подключения к вашему серверу. Администраторы серверов могут захотеть отключить изменения SSH через UI BTCPay Server.

#### Динамический DNS

Динамический DNS позволяет иметь стабильное DNS-имя, указывающее на ваш сервер, даже если ваш IP-адрес регулярно меняется. Это рекомендуется, если вы размещаете BTCPay Server дома и хотите иметь домен в чистом интернете для доступа к вашему серверу.

Обратите внимание, что вам нужно правильно настроить ваш NAT и установку BTCPay Server, чтобы получить сертификат HTTPS.

### Тема

BTCPay Server стандартно поставляется с двумя темами: светлой и темной. Их можно переключать, нажав на учетную запись в нижнем левом углу и переключаясь между темной темой или светлой темой. Администраторы BTCPay Server могут добавить свою тему, предоставив пользовательскую CSS-тему.

Администраторы могут расширить светлую/темную тему, добавив свой собственный пользовательский CSS или установив свою тему как полностью пользовательскую.

![изображение](assets/en/83.webp)

#### Брендинг сервера

Администраторы серверов могут изменить брендинг BTCPay Server, установив брендинг вашей компании для всего сервера. Поскольку BTCPay Server является FOSS, администраторы серверов могут использовать программное обеспечение под своим брендом и изменить его внешний вид в соответствии с потребностями своего бизнеса.

![изображение](assets/en/84.webp)

### Обслуживание

Как администратор сервера, ваши пользователи ожидают, что вы будете хорошо заботиться о сервере. Во вкладке Обслуживание BTCPay Server администратор может выполнить некоторое основное обслуживание. Установить доменное имя для экземпляра BTCPay Server, перезапустить или очистить сервер. Возможно, самое важное - запускать обновления.

BTCPay Server - это проект с открытым исходным кодом, который часто обновляется. Каждый новый релиз анонсируется либо через уведомления вашего BTCPay Server, либо через официальные каналы, через которые BTCPay Server общается.

![изображение](assets/en/85.webp)

#### Доменное имя

После настройки BTCPay Server администратор может захотеть изменить свое первоначальное доменное имя. Во вкладке Обслуживание администратор может изменить домен. После подтверждения и настройки соответствующих DNS-записей на домене, BTCPay Server обновляется и перезапускается, чтобы вернуться к новому домену.

![изображение](assets/en/86.webp)

#### Перезапуск

Перезапустите BTCPay Server и связанные службы.

![изображение](assets/en/87.webp)

#### Очистка

BTCPay Server работает с компонентами Docker; с обновлениями могут оставаться остатки образов Docker, временных файлов и т.д. Администраторы серверов могут очистить это и освободить место в своей среде, запустив скрипт очистки.
![image](assets/en/88.webp)

#### Обновление

Возможно, самая важная опция во вкладке Обслуживание. BTCPay Server создается сообществом, и поэтому его циклы обновления более частые, чем у большинства программных продуктов. Когда BTCPay Server имеет новый релиз, администраторы будут уведомлены в своем центре уведомлений. Нажав кнопку обновления, BTCPay Server проверит GitHub на предмет последнего релиза, обновит сервер и перезапустит его. Перед обновлением администраторам серверов всегда рекомендуется читать заметки к релизу, распространяемые через официальные каналы BTCPay Server.

![image](assets/en/89.webp)

### Логи

Столкновение с проблемой никогда не бывает приятным. Этот документ объясняет наиболее общий рабочий процесс и шаги для эффективного определения вашей проблемы и ее решения самостоятельно или с помощью сообщества.

Определение проблемы крайне важно.

#### Воспроизведение проблемы

Прежде всего, попытайтесь определить, когда происходит проблема. Попытайтесь воспроизвести проблему. Попробуйте обновить и перезапустить ваш сервер, чтобы проверить, можете ли вы воспроизвести вашу проблему. Если это лучше описывает вашу проблему, сделайте скриншот.

##### Обновление сервера

Проверьте вашу версию BTCPay Server, если она значительно старше [последней версии](https://github.com/btcpayserver/btcpayserver/releases) BTCPay Server. Обновление вашего сервера может решить проблему.

##### Перезапуск сервера

Перезапуск вашего сервера - это простой способ решить многие из наиболее распространенных проблем BTCPay Server. Вам может потребоваться использовать SSH для доступа к вашему серверу, чтобы перезапустить его.

##### Перезапуск службы

Для некоторых проблем может потребоваться перезапустить только определенную службу в вашей установке BTCPay Server. Например, перезапуск контейнера lets encrypt для обновления SSL-сертификата.

```bash
sudo su -
cd btcpayserver-docker
docker restart letsencrypt-nginx-proxy-companion
```

Используйте docker ps, чтобы найти имя другой службы, которую вы хотели бы перезапустить.

#### Просмотр логов

Логи могут предоставить важную информацию. В следующих абзацах мы опишем, как получить информацию из логов для различных частей BTCPay.

##### Логи BTCPay

Начиная с версии v1.0.3.8, вы можете легко получить доступ к логам BTCPay Server с фронтенда. Если вы администратор сервера, перейдите в Настройки сервера > Логи и откройте файл логов. Если вы не знаете, что означает конкретная ошибка в логах, упомяните об этом при устранении неполадок.

Если вы хотите более подробные логи и используете развертывание на Docker, вы можете просматривать логи конкретных контейнеров Docker с помощью командной строки. Смотрите эти [инструкции для доступа по ssh](https://docs.btcpayserver.org/FAQ/ServerSettings/#how-to-ssh-into-my-btcpay-running-on-vp%C2%80) к экземпляру BTCPay, работающему на VPS.

На следующей странице общий список имен контейнеров, используемых для BTCPay Server.

Запустите команды ниже, чтобы печатать логи по имени контейнера. Замените имя контейнера, чтобы просмотреть логи других контейнеров.

```bash
sudo su -
cd btcpayserver-docker
docker ps
docker logs --tail 100 generated_btcpayserver_1
```

| Логи для     | Имя контейнера                    |
| ------------ | --------------------------------- |
| BTCPayServer | generated_btcpayserver_1          |
| NBXplorer    | generated_nbxplorer_1             |
| Bitcoind     | btcpayserver_bitcoind             |
| Postgres     | generated_postgres_1              |
| proxy        | letsencrypt-nginx-proxy-companion |
| Nginx        | nginx-gen                         |
| Nginx        | nginx                             |
| c-lightning  | btcpayserver_clightning_bitcoin   |
| LND          | btcpayserver_lnd_bitcoin          |
| RTL          | generated_lnd_bitcoin_rtl_1       |
| Thunderhub   | generated_bitcoin_thub_1          |
| LibrePatron  | librepatron                       |
| Tor          | tor-gen                           |
| Tor          | tor                               |

###### Сеть Lightning LND - Docker

Существует несколько способов доступа к вашим логам LND при использовании Docker. Сначала войдите как root:

```bash
sudo su -
Перейдите в нужную директорию:
cd btcpayserver-docker
# Найдите имя контейнера:
docker ps
Выведите логи по имени контейнера:
docker logs --tail 100 btcpayserver_lnd_bitcoin
```

Кроме того, вы можете быстро вывести логи, используя ID контейнера (необходимы только первые уникальные символы ID, например, два самых левых символа):

```bash
docker logs 'добавьте ваш ID контейнера'
```

Если по какой-либо причине вам нужно больше логов

```bash
sudo su -
cd /var/lib/docker/volumes/generated_lnd_bitcoin_datadir/_data/logs/bitcoin/mainnet/
ls
```

Вы увидите что-то вроде

```bash
lnd.log lnd.log.13 lnd.log.15 lnd.log.16.gz lnd.log.17.gz
```

Чтобы получить доступ к несжатым логам этих файлов, используйте `cat lnd.log` или, если хотите другой, используйте `cat lnd.log.15`.

Чтобы получить доступ к сжатым логам в формате `.gzip`, используйте `gzip -d lnd.log.16.gz` (в данном случае мы получаем доступ к `lnd.log.16.gz`). Это должно дать вам новый файл, где вы можете сделать `cat lnd.log.16`. В случае, если вышеуказанное не работает, возможно, вам потребуется сначала установить gzip с помощью `sudo apt-get install gzip`.

###### Сеть Lightning c-lightning - Docker

```bash
sudo su -
docker ps
# Найдите ID контейнера c-lightning.
docker logs 'добавьте ваш ID контейнера здесь'
```

или используйте это

```bash
docker logs --tail 100 btcpayserver_clightning_bitcoin
```

Вы также можете получить информацию о логах с помощью команды cli c-lightning.

```bash
bitcoin-lightning-cli.sh getlog
```

#### Логи узла Bitcoin

Помимо [просмотра логов](https://docs.btcpayserver.org/Troubleshooting/#2-looking-through-the-logs) вашего контейнера Bitcoind, вы также можете использовать любые из [команд bitcoin-cli](https://developer.bitcoin.org/reference/rpc/index.html)

[(открывается в новом окне)](https://developer.bitcoin.org/reference/rpc/index.html) для получения информации от вашего узла bitcoin. BTCPay включает скрипт, позволяющий вам легко общаться с вашим узлом Bitcoin.

Внутри папки btcpayserver-docker получите информацию о блокчейне, используя ваш узел:

```bash
bitcoin-cli.sh getblockchaininfo
```

BTCPay Server имеет локальную файловую систему и загружает активы магазина (продукты), логотипы и брендинг напрямую на сервер. Файловая система сервера доступна только администраторам сервера; владельцы магазинов могут загружать свои логотипы/брендинг на уровне магазина.
Когда администратор сервера находится на вкладке Хранилище Файлов, можно напрямую загрузить на ваш сервер или изменить провайдера хранения файлов на Локальную файловую систему или Azure Blob Storage.

![изображение](assets/en/90.webp)

![изображение](assets/en/91.webp)

### Сводка навыков

В этом разделе вы узнали следующее:

- Разницу между настройками Магазина и Сервера, в частности, как это относится к Пользователям, Ролям и Электронной почте
- Установка политик для всего сервера по использованию и созданию горячих кошельков Lightning или Bitcoin, регистрации новых пользователей и уведомлений по электронной почте.
- Как добавить пользовательские темы (вместо предоставленных простых светлых/темных вариантов), а также создать пользовательские логотипы
- Выполнение простых задач по обслуживанию сервера через предоставленный графический интерфейс
- Устранение неполадок, включая получение деталей для любого из контейнеров Docker или вашего узла
- Управление хранением файлов

### Оценка знаний

#### Концептуальный обзор KA

В чем разница в ролях, назначенных через Настройки Сервера по сравнению с Настройками Магазина, и каково потенциальное использование одного над другим?

#### Практический обзор KA

Опишите некоторые возможные случаи использования, доступные на вкладке Политики.

#### Практический обзор KA

Опишите некоторые действия, которые администратор может регулярно выполнять на вкладке Обслуживание.

## BTCPay Server - Платежи

<chapterId>e2b71ff9-3f4f-5e71-9771-8e03fbbef00f</chapterId>

Счет-фактура - это документ, который продавец выставляет покупателю для сбора платежа.

В BTCPay Server счет-фактура представляет собой документ, который должен быть оплачен в течение определенного временного интервала по фиксированному обменному курсу. Счета-фактуры имеют срок действия, поскольку они фиксируют обменный курс в указанный временной промежуток, чтобы защитить получателя от колебаний цен.

Основой BTCPay Server является возможность действовать как система управления счетами-фактурами Bitcoin. Счет-фактура является важным инструментом для отслеживания и управления полученными платежами.

Если вы не используете встроенный [Кошелек](https://docs.btcpayserver.org/Wallet/) для ручного приема платежей, все платежи в магазине будут отображаться на странице Счета-фактуры. Эта страница сортирует платежи по дате и является центральным элементом для управления счетами-фактурами и устранения неполадок с платежами.

![изображение](assets/en/92.webp)

### Общее

#### Статусы счетов-фактур

В таблице ниже перечислены и описаны стандартные статусы счетов-фактур в BTCPay и предлагаются общие действия. Действия являются лишь рекомендациями. Пользователям предоставляется определить наилучший курс действий для их случая использования и бизнеса.

| Статус счета-фактуры              | Описание                                                                                                                     | Действие                                                                                                                                            |
| --------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| Новый                             | Не оплачен, таймер счета-фактуры еще не истек                                                                                | Нет действий                                                                                                                                        |
| Новый (частично оплачен)          | Оплачен, не полностью, таймер счета-фактуры еще не истек                                                                     | Нет действий                                                                                                                                        |
| Просрочен                         | Не оплачен, таймер счета-фактуры истек                                                                                       | Нет действий                                                                                                                                        |
| Просрочен (частично оплачен) \*\* | Оплачен, не в полном объеме, и просрочен                                                                                     | Связаться с покупателем для организации возврата или запроса доплаты. По желанию отметить счет-фактуру как урегулированную или недействительную     |
| Просрочен (оплачен поздно)        | Оплачен, в полном объеме, после истечения таймера счета-фактуры                                                              | Связаться с покупателем для организации возврата или обработки заказа, если поздние подтверждения приемлемы.                                        |
| Оплачено (переплата)              | Оплачено больше, чем сумма счета, расчет произведен, получено достаточное количество подтверждений                           | Связаться с покупателем для организации возврата излишне уплаченной суммы, или, по желанию, дождаться обращения покупателя                          |
| В обработке                       | Оплачено полностью, но не получено достаточное количество подтверждений, указанных в настройках магазина                     | Связаться с покупателем для организации возврата излишне уплаченной суммы, или, по желанию, дождаться обращения покупателя                          |
| В обработке (переплата)           | Оплачено больше, чем сумма счета, не получено достаточное количество подтверждений                                           | Дождаться расчета, затем связаться с покупателем для организации возврата излишне уплаченной суммы, или, по желанию, дождаться обращения покупателя |
| Оплачено                          | Оплачено полностью, получено достаточное количество подтверждений в магазине                                                 | Выполнить заказ                                                                                                                                     |
| Оплачено (помечено)               | Статус был вручную изменен на оплачено из статуса в обработке или недействительного                                          | Администратор магазина пометил платеж как оплаченный                                                                                                |
| Недействительно\*                 | Оплачено, но не получено достаточное количество подтверждений в указанный в настройках магазина срок                         | Проверить транзакцию в блокчейн-эксплорере, если она получила достаточное количество подтверждений, пометить как оплаченный                         |
| Недействительно (помечено)        | Статус был вручную изменен на недействительно из статуса оплачено или истекший                                               | Администратор магазина пометил платеж как недействительный                                                                                          |
| Недействительно (переплата)       | Оплачено больше, чем сумма счета, но не получено достаточное количество подтверждений в указанный в настройках магазина срок | Проверить транзакцию в блокчейн-эксплорере, если она получила достаточное количество подтверждений, пометить как оплаченный                         |

#### Детали счета

Страница деталей счета содержит всю информацию, связанную с счетом.

Информация о счете создается автоматически на основе статуса счета, курса обмена и т.д. Информация о продукте создается автоматически, если счет был создан с информацией о продукте, например, в приложении Point of Sale.

#### Фильтрация счетов

Счета можно фильтровать с помощью быстрых фильтров, расположенных рядом с кнопкой поиска, или с помощью расширенных фильтров, которые можно включить, нажав на ссылку (Помощь) вверху. Пользователи могут фильтровать счета по магазину, идентификатору заказа, идентификатору товара, статусу или дате.

#### Экспорт счетов

Счета BTCPay Server можно экспортировать в форматах CSV или JSON. Для получения дополнительной информации об экспорте счетов и учете.

#### Возврат средств по счету

Если по какой-либо причине вы хотите произвести возврат средств, вы можете легко создать возврат средств из представления счета.

#### Архивация счетов

В результате функции неповторного использования адресов в BTCPay Server, на странице счетов вашего магазина часто можно увидеть множество истекших счетов. Чтобы скрыть их из вашего представления, выберите их в списке и пометьте как архивированные. Счета, помеченные как архивированные, не удаляются. Оплата по архивированному счету все равно будет обнаружена вашим BTCPay Server (статус оплачено поздно). Вы можете просмотреть архивированные счета магазина в любое время, выбрав архивированные счета из выпадающего списка фильтра поиска.

#### Валюта по умолчанию

Валюта магазина по умолчанию, это было установлено при создании магазина.

#### Разрешить всем создавать счет

Вы должны включить эту опцию, если хотите разрешить внешнему миру создавать счета в вашем магазине. Эта опция полезна только если вы используете кнопку оплаты или если вы выставляете счета через API или сторонний HTML-сайт. Приложение PoS предварительно авторизовано и не требует включения этой опции для того, чтобы случайный посетитель мог открыть ваш магазин PoS и создать счет.

#### Добавить дополнительную плату (сетевую плату) к счету

- Только если клиент производит более одного платежа по счету
- При каждом платеже
- Никогда не добавлять сетевую плату

#### Счет истекает, если полная сумма не была оплачена через .. минут.

Таймер счета установлен по умолчанию на 15 минут. Таймер является механизмом защиты от волатильности, так как он фиксирует количество криптовалюты в соответствии с курсом крипто к фиату. Если клиент не оплатит счет в установленный период, счет считается просроченным. Счет считается "оплаченным", как только транзакция видна в блокчейне (0-подтверждений), но считается "завершенным", когда он достигает количества подтверждений, определенных продавцом (обычно, 1-6). Таймер можно настроить.

#### Считать счет оплаченным, даже если оплаченная сумма на ..% меньше ожидаемой.

В ситуации, когда клиент использует кошелек обменника для прямой оплаты счета, обменник берет небольшую комиссию. Это означает, что такой счет не считается полностью завершенным. Счет получает статус "частично оплаченный". Если продавец хочет принимать недоплаченные счета, вы можете установить здесь процентную ставку.

### Запросы

Запросы на оплату - это функция, которая позволяет владельцам магазинов BTCPay создавать долгосрочные счета. Средства переводятся на запрос на оплату по курсу обмена на момент оплаты. Это позволяет пользователям совершать платежи в удобное для них время без необходимости согласования или проверки курсов обмена с владельцем магазина в момент оплаты.

Пользователи могут оплачивать запросы частичными платежами. Запрос на оплату остается действительным до его полной оплаты или если владелец магазина требует установить время истечения. Адреса никогда не используются повторно. Новый адрес генерируется каждый раз, когда пользователь нажимает оплатить, создавая счет для запроса на оплату.

Владельцы магазинов могут печатать запросы на оплату (или экспортировать данные счета) для ведения учета и бухгалтерии. BTCPay автоматически маркирует счета как Запросы на Оплату в списке счетов вашего магазина.

#### Настройте Ваши Запросы на Оплату

- Сумма Счета - Установите Запрашиваемую Сумму Оплаты
- Деноминация - Показать Запрашиваемую Сумму в Фиате или Криптовалюте
- Количество Платежей - Разрешить только единичные платежи или частичные платежи
- Время Истечения - Разрешить платежи до даты или без истечения срока
- Описание - Текстовый Редактор, Таблицы Данных, Вставка Фото и Видео
- Внешний Вид - Цвет и Стиль с Темами CSS

![image](assets/en/93.webp)

#### Создать Запрос на Оплату

В левом меню перейдите в Запрос на Оплату и кликните "Создать Запрос на Оплату".

![image](assets/en/94.webp)

Укажите Имя Запроса, Сумму, Деноминацию Отображения, Связанный Магазин, Время Истечения & Описание (По Желанию)

Выберите опцию Разрешить плательщику создавать счета в их деноминации, если вы хотите разрешить частичные платежи.

Нажмите Сохранить & Просмотреть, чтобы ознакомиться с вашим запросом на оплату.

BTCPay создает URL для запроса на оплату. Поделитесь этим URL, чтобы просмотреть ваш запрос на оплату. Нужно несколько одинаковых запросов? Вы можете дублировать запросы на оплату, используя опцию Клонировать в главном меню.

![image](assets/en/95.webp)

**ВНИМАНИЕ**

Запросы на оплату зависят от магазина, что означает, что каждый запрос на оплату ассоциируется с магазином при создании. Убедитесь, что к вашему магазину подключен кошелек, к которому принадлежит запрос на оплату.

#### Оплаченный Запрос

Плательщик и запроситель могут просмотреть статус запроса на оплату после отправки платежа. Статус будет отображаться как Урегулировано, если платеж был получен полностью. Если были совершены только частичные платежи, в Долге будет показан оставшийся баланс.

![image](assets/en/96.webp)

#### Настройка Запросов на Оплату

Содержание описания можно редактировать с помощью текстового редактора запроса на оплату. Обе опции доступны, если вы хотите использовать дополнительные цветовые темы или пользовательские стили CSS.
Пользователи, не обладающие техническими знаниями, могут использовать [тему bootstrap](https://docs.btcpayserver.org/Development/Theme/#2-bootstrap-themes). Дополнительная настройка может быть выполнена путем предоставления дополнительного кода CSS, как показано ниже.

```css
:root {
  --btcpay-font-family-base: "Source Sans Pro", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --btcpay-primary: #7d4698;
  --btcpay-primary-accent: #59316b;
  --btcpay-body-text: #333a41;
  --btcpay-body-bg: #fff;
  --btcpay-bg-tile: #f8f9fa;
}

#mainNav {
  color: white;
  background: linear-gradient(#59316b, #331840);
}

#mainNav .btn-link {
  color: white;
}
```

### Платежи на вывод

Традиционно, получатель делится своим адресом Bitcoin для совершения платежа в Bitcoin, а отправитель позже отправляет деньги на этот адрес. Такая система называется платежом на отправку, поскольку отправитель инициирует платеж, в то время как получатель может быть недоступен, отправляя платеж получателю.

Но что, если поменять роли?

Что, если вместо того, чтобы отправитель инициировал платеж, отправитель позволяет получателю вывести платеж в удобное для него время? Это концепция платежа на вывод. Это позволяет реализовать несколько новых приложений, таких как:

- Сервис подписки (где подписчик позволяет сервису выводить деньги каждый определенный период времени)
- Возвраты (где продавец позволяет покупателю выводить деньги на свой кошелек, когда они сочтут это нужным)
- Оплата по времени для фрилансеров (где наниматель позволяет фрилансеру выводить деньги на его кошелек по мере отчета о времени)
- Патронаж (где патрон позволяет получателю выводить деньги каждый месяц для продолжения поддержки их работы)
- Автоматическая продажа (где клиент биржи позволяет бирже выводить деньги с его кошелька для продажи каждый месяц автоматически)
- Система вывода баланса (где сервис с большим объемом позволяет пользователям запрашивать вывод средств со своего баланса, сервис может затем легко обрабатывать все выплаты многим пользователям на фиксированных интервалах)

### Выплаты

Функциональность выплат связана с [Платежами на вывод](https://docs.btcpayserver.org/PullPayments/). Эта функция позволяет создавать выплаты в вашем BTCPay. Эта функция позволяет обрабатывать платежи на вывод (возвраты, выплаты зарплаты или выводы средств).

#### Пример 1: Возврат

Давайте начнем с примера возврата. Клиент купил товар в вашем магазине, но, к сожалению, должен вернуть товар. Они хотят возврата. В BTCPay вы можете создать [Возврат](https://docs.btcpayserver.org/Refund/) и предоставить клиенту ссылку для получения его средств. Как только клиент предоставит свой адрес и получит средства, это будет отображено в Выплатах.

Первый статус, который он имеет, - Ожидание одобрения. Клерки магазина могут проверить, если несколько из них ожидают, и после выбора вы используете кнопку Действия.

Опции на кнопке действий

- Одобрить выбранные выплаты
- Одобрить и отправить выбранные выплаты
- Отменить выбранные выплаты

Следующий шаг - Одобрить и отправить выбранные выплаты, так как мы хотим вернуть деньги клиенту. Проверьте адрес клиента, покажите сумму и решите, будут ли сборы вычитаться из возврата или нет. После проверки остается только подписать транзакцию.
Клиент теперь получает обновления на странице Заявок на Вывод Средств. Он может следить за транзакцией, так как ему предоставлена ссылка на блок-эксплорер и его транзакцию. Как только транзакция подтверждена, и статус изменяется на Завершено.

#### Пример 2: Зарплата

Теперь давайте рассмотрим выплату зарплаты, поскольку она осуществляется изнутри магазина, а не по запросу Клиента. Суть та же; используются Выплаты по Запросу. Но вместо создания возврата, мы совершим [Выплату по Запросу](https://docs.btcpayserver.org/PullPayments/).

Перейдите на вкладку Выплаты по Запросу в вашем сервере BTCPay. В верхнем правом углу нажмите кнопку Создать Выплату по Запросу.

Теперь мы находимся в процессе создания Выплаты, дайте ей имя и желаемую сумму в нужной валюте, заполните Описание, чтобы сотрудник понимал, о чем идет речь. Следующий этап аналогичен возвратам. Сотрудник указывает Адрес назначения и сумму, которую он хочет запросить из этой Выплаты. Он может решить сделать это 2 отдельными запросами на разные адреса, или даже частично запросить через Lightning.

Если есть несколько ожидающих Выплат, вы можете сгруппировать их для подписи и отправки. После подписи выплаты переходят на вкладку В процессе и показывают Транзакцию. Когда сеть принимает выплату, она переходит на вкладку Завершено. Вкладка Завершено предназначена исключительно для исторических целей. Она содержит обработанные Выплаты и соответствующие им транзакции.

### Выплаты по Запросу

#### Концепция

Когда отправитель настраивает Выплату по Запросу, он может настроить ряд свойств:

- Имя Запроса на Выплату
- Лимит суммы
- Единица измерения (например, BTC, SAT, USD)
- Способы оплаты
  - BTC в цепочке
  - BTC вне цепочки
- Описание
- Пользовательский CSS
- Конечная дата (необязательно для Lightning Network BOLT11)

После этого отправитель может поделиться выплатой по запросу с помощью ссылки с получателем, позволяя получателю создать выплату. Получатель выберет свою выплату:

- Какой способ оплаты использовать
- Куда отправить деньги

Как только выплата создана, она будет учитываться в пределах лимита выплаты по запросу за текущий период. Затем отправитель одобрит выплату, установив курс, по которому выплата будет отправлена, и произведет оплату.

Для отправителя мы предоставляем простой в использовании способ групповой оплаты нескольких выплат из [Внутреннего Кошелька BTCPay](https://docs.btcpayserver.org/Wallet/).

#### Greenfield API

Сервер BTCPay предоставляет полный API как для отправителя, так и для получателя, который документирован на странице `/docs` вашего экземпляра. (или на сайте документации https://docs.btcpayserver.org)

Поскольку наш API раскрывает полные возможности выплат по запросу, отправитель может автоматизировать платежи в соответствии со своими потребностями.

### Сводка навыков

В этом разделе вы узнали следующее:

- Глубокое понимание статусов счетов BTCPay Server, а также действий, которые можно на них выполнить.
- Настройка и управление механизмами счетов с продленным сроком действия, известными как Запросы.
- Дополнительные гибкие возможности платежей, открываемые уникальной функцией Выплат по Запросу BTCPay Server, в частности, как обрабатывать возвраты и выплаты зарплаты.

### Оценка знаний

#### Концептуальный обзор KA

В чем некоторые различия между счетами и запросами на оплату, и какая может быть хорошая причина для использования последних?

#### Концептуальный обзор KA

Как выплаты по запросу расширяют то, что обычно можно сделать в цепочке? Опишите некоторые случаи их использования.

## Стандартные плагины BTCPay Server

<chapterId>7d673dc4-bd5d-5411-819b-f135f1d86636</chapterId>

### Стандартные плагины и приложения

BTCPay сервер предлагает стандартный набор плагинов (приложений), которые превращают BTCPay сервер в платежный шлюз для электронной коммерции. С добавлением точки продаж, платформы для краудфандинга и простой кнопки оплаты, BTCPay сервер становится легким в развертывании решением.

### Точка продаж

Одним из стандартных плагинов BTCPay сервера является точка продаж (PoS). С помощью плагина PoS владелец магазина может создать веб-магазин непосредственно из BTCPay сервера, владельцу магазина не нужны сторонние решения для электронной коммерции для ведения веб-магазина. Веб-приложение PoS позволяет пользователям с магазинами реального мира легко принимать биткойны без комиссий или третьих лиц, напрямую в свой кошелек. PoS можно легко отобразить на планшетах или других устройствах, поддерживающих веб-просмотр. Пользователи могут легко создать ярлык на главном экране для быстрого доступа к веб-приложению.

#### Как создать новую точку продаж

BTCPay сервер позволяет владельцам магазинов быстро создавать точку продаж в нескольких макетах. BTCPay сервер понимает, что не каждый магазин является электронной коммерцией, и не каждый магазин является баром или рестораном, и он предлагает несколько стандартных настроек для вашей PoS.

Когда владелец магазина нажимает на "Точка продаж" в левом меню, BTCPay сервер теперь запросит название; это название будет видно в левом меню. Нажмите Создать, чтобы создать PoS.

![image](assets/en/97.webp)

#### Обновление вновь созданной точки продаж

После создания новой PoS следующий экран будет для обновления вашей точки продаж и добавления товаров для вашего магазина.

##### Название приложения

Название, данное здесь вашей точке продаж, будет видно в главном меню BTCPay сервера.

##### Отображаемое название

Публика увидит публичное название или имя при посещении вашего магазина. BTCPay сервер стандартно называет ваш магазин "Чайный магазин". Замените это на название вашего магазина.

![image](assets/en/98.webp)

#### Выбор стиля точки продаж

BTCPay сервер способен отображать свою точку продаж несколькими способами.

- Список продуктов
  - Вид магазина, где клиенты могут покупать только 1 продукт за раз.
- Список продуктов с корзиной.
  - Вид магазина, где клиенты могут покупать несколько товаров сразу и получать обзор корзины справа от своего экрана.
- Только клавиатура
  - Нет списка продуктов, только клавиатура для прямого выставления счетов.
- Печатный дисплей (Печатный список продуктов с QR)
  - Если вы не можете всегда отображать свой список продуктов в цифровом виде, вам нужно "офлайн" решение для продуктов; BTCPay сервер имеет печатный дисплей, который может функционировать как офлайн магазин.

![image](assets/en/99.webp)

#### Стиль точки продаж - Список продуктов

![image](assets/en/100.webp)

#### Стиль точки продаж - Список продуктов + Корзина

![image](assets/en/101.webp)

#### Стиль точки продаж - Только клавиатура

![image](assets/en/102.webp)

#### Стиль точки продаж - Печатный дисплей

![image](assets/en/103.webp)

#### Валюта

Владелец магазина может установить для своей точки продаж валюту, отличную от его общей установленной валюты по умолчанию. Валюта магазина по умолчанию автоматически заполнит это поле.

#### Описание

Расскажите миру о своем магазине; что вы продаете и по какой цене? Все, что объясняет ваш магазин, идет сюда.

#### Продукты

Когда создается Точка продаж, стандартный сервер BTCPay добавляет в магазин несколько товаров для справки. Нажмите кнопку "Редактировать" на любом из стандартных товаров, чтобы лучше понять каждую возможную опцию для товара.

Создание нового продукта в вашем магазине включает следующие поля:

- Название
- Цена (фиксированная, минимальная или настраиваемая)
- URL изображения
- Описание
- Инвентарь
- ID
- Текст кнопки "Купить"
- Включить/Отключить

Как только владелец магазина заполнит все поля нового продукта, нажмите на сохранить, и вы заметите, что раздел Продукты в Точке продаж теперь заполняется. Всегда убедитесь, что вы сохраняете в верхней правой части экрана, чтобы предотвратить потерю прогресса владельцами магазинов при добавлении продуктов.

Владельцы магазинов также могут использовать "Редактор кода" для настройки своих продуктов. Редактор кода требует базового понимания структур JSON.

#### Оформление заказа

Сервер BTCPay позволяет небольшую специфическую для PoS настройку оформления заказа. Владелец магазина может установить текст "Купить за x" или запросить конкретные данные клиента, добавив формы.

#### Чаевые

Не во всех магазинах нужна опция чаевых от их продаж. Владельцы магазинов могут включать или отключать это по мере необходимости для своего магазина. Если в магазине используется опция чаевых, владелец магазина может установить текст в поле для чаевых, который ему нравится. Чаевые на сервере BTCPay работают на основе процентной ставки. Владельцы магазинов могут добавлять несколько процентов с разделением запятыми.

#### Скидки

Как владелец магазина, вы можете предложить клиенту индивидуальную скидку при оформлении заказа; переключатель для Скидок становится доступным в кассе вашего магазина. Однако это очень не рекомендуется для систем самообслуживания.

#### Пользовательские платежи

Когда опция Пользовательских платежей включена, клиент может ввести свою цену, равную или выше оригинального счета, выставленного магазином.

#### Дополнительные опции

После настройки всего для вашей Точки продаж остаются некоторые дополнительные опции. Владельцы магазинов могут легко встроить свою PoS через Iframe или встроить кнопку оплаты, связанную с конкретным товаром магазина. Чтобы стилизовать только что созданный магазин PoS, владельцы могут добавить пользовательский CSS в нижней части дополнительных опций.

#### Удалить это приложение

Если владелец магазина хочет полностью удалить Точку продаж со своего сервера BTCPay, в нижней части обновления PoS владельцы магазинов могут нажать на кнопку "Удалить это приложение", чтобы полностью уничтожить свое приложение PoS. При нажатии на "Удалить это приложение", сервер BTCPay запросит подтверждение, путем ввода `DELETE` и подтверждения нажатием на кнопку Удалить. После удаления владелец магазина возвращается на панель управления сервера BTCPay.

### BTCPay Server - Краудфандинг

Наравне с плагином Точки продаж, сервер BTCPay предлагает возможность создать краудфандинг. Как и любая другая платформа краудфандинга, владельцы магазинов могут установить цель, создать бонусы за вклады и настроить их по своим нуждам.

#### Как настроить новый краудфандинг

Нажмите на плагин Краудфандинг через главное меню слева от вашего сервера BTCPay, ниже раздела Плагины. Теперь сервер BTCPay запросит название для Краудфандинга; это название также будет отображаться в левой панели меню.
Заголовок дан для Краудфандинга для общественности.

#### Слоган

Дайте краудфандингу однострочное описание, чтобы понять, о чем идет сбор средств.

![изображение](assets/en/107.webp)

#### URL изображения для анонса

У каждого краудфандинга есть главное изображение, один баннер, который вы узнаете сразу. Это изображение может быть сохранено на вашем сервере, если у вас есть административные права, администраторы могут загружать его в настройках сервера BTCPay Server - Файлы. Когда вы являетесь владельцем магазина, изображение должно быть загружено в интернет через сторонний хост (например, imgur).

#### Сделать краудфандинг публичным

Этот переключатель делает ваш краудфандинг публичным и, таким образом, видимым для внешнего мира. В целях тестирования или чтобы увидеть, правильно ли применена ваша тема, вы можете захотеть оставить этот параметр ВЫКЛ на период создания краудфандинга.

#### Описание

Расскажите миру о вашем краудфандинге, на что вы собираете средства? Все, что объясняет ваш краудфандинг, идет сюда.

![изображение](assets/en/108.webp)

#### Цель краудфандинга

Установите целевую сумму, которую должен собрать фонд для проекта, и в какой валюте должна быть выражена цель. Убедитесь, что если ваши цели установлены между датами, включите эти целевые и конечные даты под Целями в краудфандинге.

![изображение](assets/en/109.webp)

#### Бонусы

Бонусы очень помогают вашему краудфандингу. Это потому, что бонусы дают людям способ участвовать в вашей кампании. Они задействуют как эгоистичные, так и благотворительные мотивации. И они позволяют вам использовать расходы ваших сторонников, а не только их благотворительный кошелек -- можно догадаться, что более значимо.

Создание нового бонуса включает следующие поля:

- Название
- Цена (фиксированная, минимальная или настраиваемая)
- URL изображения
- Описание
- Количество
- ID
- Текст кнопки покупки
- Включить/Отключить

Как только владелец магазина заполнит все поля для создания нового бонуса, нажмите на сохранить, и вы заметите, что раздел Бонусы в краудфандинге теперь заполняется.

![изображение](assets/en/110.webp)

### BTCPay Server - Точка продаж

#### Вклады

Владельцы магазинов могут выбирать, как отображать Бонусы, как они сортируются или даже ранжируются по сравнению с другими бонусами. Однако, как только цели Краудфандинга достигнуты, владельцы магазинов могут захотеть остановить поступление пожертвований на этот сбор средств. Поэтому он может включить "Не разрешать дополнительные вклады после достижения цели". Это остановит краудфандинг от принятия пожертвований.

##### Поведение краудфандинга

Стандарт краудфандинга учитывает только счета, созданные с краудфандингом, в сторону цели. Однако могут быть случаи, когда владелец магазина хочет, чтобы все счета, выставленные в этом магазине, учитывались в сторону краудфандинга.

#### Дополнительные опции для настройки

BTCPay Server предлагает несколько дополнительных настроек. Добавьте звуки, анимации или даже темы для обсуждения к краудфандингу. Владельцы магазинов также могут изменить внешний вид и ощущение краудфандинга, введя свой собственный пользовательский CSS.

#### Удалить это приложение

Если владелец магазина хочет полностью удалить краудфандинг из своего BTCPay Server, внизу страницы обновления краудфандинга владельцы магазинов могут нажать на кнопку "Удалить это приложение", чтобы полностью уничтожить их приложение краудфандинга. При нажатии "Удалить это приложение", BTCPay Server запросит подтверждение, попросив ввести `DELETE` и подтвердить нажатием на кнопку Удалить. После удаления владелец магазина возвращается на панель управления BTCPay Server.

### BTCPay Server - Кнопка оплаты

Легко встраиваемые HTML и высоко настраиваемые кнопки оплаты позволяют владельцам магазинов получать чаевые и пожертвования. В левом меню BTCPay Server, ниже раздела Плагины, владельцы магазинов могут нажать на "Pay Button" (Кнопка оплаты) и выбрать Enable (Включить), чтобы создать кнопку оплаты.

#### Общие настройки

В общих настройках для кнопки оплаты владельцы магазинов могут установить:

- Стандартную цену
- Валюту по умолчанию
- Способ оплаты по умолчанию
  - Использовать стандарт магазина
  - BTC через блокчейн
  - BTC вне блокчейна (Lightning)
  - BTC вне блокчейна (LNURL-pay)
- Описание при оформлении заказа
- ID заказа

#### Опции отображения

Кнопку оплаты BTCPay Server можно настроить под разные стили. Кнопки могут иметь фиксированную или настраиваемую сумму, отображаемую либо с помощью ползунка, либо с помощью кнопок плюс и минус.

#### Использование модального окна

Создавая кнопку оплаты, владельцы магазинов могут выбрать её поведение при клике покупателя и показать её в модальном окне или на новой странице.

**!?Внимание!?**

Предупреждение: Кнопка оплаты должна использоваться только для чаевых и пожертвований.

Использование кнопки оплаты для интеграции с электронной коммерцией не рекомендуется, поскольку пользователь может изменить информацию, относящуюся к заказу. Для электронной коммерции следует использовать наш Greenfield API. Если этот магазин обрабатывает коммерческие транзакции, мы советуем вам создать отдельный магазин перед использованием кнопки оплаты.

#### Настройка текста кнопки оплаты

По умолчанию на кнопке оплаты BTCPay Server написано "Pay With BTCPay" (Оплатить через BTCPay). Владельцы магазинов могут изменить этот текст на желаемый и заменить логотип BTCPay Server на свой. Установите текст, используя "Pay Button Text" (Текст кнопки оплаты), и вставьте URL изображения под "Pay Button Image URL" (URL изображения кнопки оплаты).

##### Размер изображения

Размер изображения на кнопке может быть установлен только на три стандарта.

- 146x40px
- 168x46px
- 209x57px

#### Тип кнопки

BTCPay Server знает о трех состояниях кнопки оплаты.

- Фиксированная сумма
  - Ранее установленная цена указывается в общих настройках кнопки.
- Настраиваемая сумма
  - У кнопки оплаты BTCPay Server есть кнопки + и -, чтобы установить настраиваемую цену.
  - При использовании настраиваемой суммы, BTCPay Server будет запрашивать минимальную, максимальную сумму и то, как она должна постепенно увеличиваться.
  - Кнопки могут быть настроены на "Использовать простой стиль ввода". Это убирает кнопки +/-.
  - Разместить кнопку в линию, где кнопка и переключатели отображаются в одной линии.
- Ползунок
  - Похож на настраиваемую сумму, но визуально отличается наличием ползунка вместо кнопок +/-.
  - При использовании ползунка, BTCPay Server будет запрашивать минимальную, максимальную сумму и то, как она должна постепенно увеличиваться.

**!?Внимание!?**

Удаление кнопки оплаты можно выполнить в верхней части в предупреждающем описании.

#### Уведомления об оплате

IPN сервера (Мгновенное уведомление об оплате) предназначен для вебхуков и может быть заполнен URL для отправки данных после покупки.

#### Уведомления по электронной почте

Каждый раз, когда происходит оплата, BTCPay Server может уведомить владельца магазина.

#### Перенаправление в браузере

Когда покупатель завершает покупку, он будет перенаправлен на эту ссылку, если она установлена владельцем магазина.

#### Расширенные опции кнопки оплаты

Укажите дополнительные параметры строки запроса, которые должны быть добавлены к странице оформления заказа после создания счета. Например, `lang=da-DK` загрузит страницу оформления заказа на датском языке по умолчанию.

#### Использовать приложение в качестве конечной точки

Прямо связать кнопку оплаты с товаром в одном из приложений PoS или Crowdfund до этого.
Владельцы магазинов могут нажать на выпадающее меню и выбрать желаемое приложение; после выбора приложения владелец магазина может добавить товар, который нужно связать.

#### Сгенерированный код

Так как кнопка оплаты BTCPay Server является легко встраиваемым HTML, BTCPay Server показывает сгенерированный код для копирования на веб-сайт внизу после настройки кнопки оплаты.

Владельцы магазинов могут скопировать сгенерированный код на свой веб-сайт, и кнопка оплаты от BTCPay Server будет непосредственно активна на их веб-сайте.

#### Уведомления об оплате

IPN сервера (Мгновенное уведомление об оплате) предназначен для вебхуков и может быть заполнен URL-адресом для отправки данных о покупке.

#### Уведомления по электронной почте

Каждый раз, когда происходит оплата, BTCPay Server может уведомить владельца магазина.

#### Перенаправление в браузере

Когда покупатель завершает покупку, он будет перенаправлен на эту ссылку, если владелец магазина ее установил.

#### Расширенные опции кнопки оплаты

Укажите дополнительные параметры строки запроса, которые должны быть добавлены к странице оформления заказа после создания счета. Например, `lang=da-DK` загрузит страницу оформления заказа на датском языке по умолчанию.

#### Использование приложения в качестве конечной точки

Напрямую связать кнопку оплаты с товаром в одном из приложений PoS или Crowdfund ранее. Владельцы магазинов могут нажать на выпадающее меню и выбрать желаемое приложение, после выбора приложения владелец магазина может добавить товар, который нужно связать.

#### Сгенерированный код

Так как кнопка оплаты BTCPay Server является легко встраиваемым HTML, BTCPay Server показывает сгенерированный код для копирования на веб-сайт внизу после настройки кнопки оплаты. Владельцы магазинов могут скопировать сгенерированный код на свой веб-сайт, и кнопка оплаты от BTCPay Server будет непосредственно активна на их веб-сайте.

### Сводка навыков

В этом разделе вы узнали:

- Как использовать интегрированный плагин PoS от BTCPay Server для легкого создания пользовательского магазина
- Как использовать интегрированный плагин Crowdfund от BTCPay Server для легкого создания пользовательского приложения для сбора средств
- Генерация кода для пользовательской кнопки оплаты с использованием плагина кнопки оплаты

### Оценка знаний

#### Обзор KA

Какие три встроенных плагина поставляются стандартно с BTCPay Server? Несколькими словами опишите, как каждый из них может быть использован.

# Настройка BTCPay Server

<partId>ff38596c-7de3-5e5c-ba50-9b9edbbbb5eb</partId>

## Основное понимание установки BTCPay Server в среде LunaNode

<chapterId>d0a28514-ffcf-529b-9156-29141f0b060a</chapterId>

### Установка BTCPay Server на хостинге Env. (LunaNode)

Эти шаги предоставят всю необходимую информацию для начала использования BTCPay Server на LunaNode. Существует множество вариантов развертывания программного обеспечения.
Вы можете найти все детали BTCPay Server на https://docs.btcpayserver.org.

#### С чего начать?

В этой части вы познакомитесь с LunaNode как с провайдером хостинга, узнаете о первых шагах использования вашего BTCPay Server и как работать с Lightning Network. После того, как мы пройдем через все шаги, вы сможете запустить веб-магазин или платформу для сбора средств, принимающую Bitcoin!

Это один из многих способов развертывания BTCPay Server. Читайте нашу документацию для получения более подробной информации,

https://docs.btcpayserver.org.

### Развертывание BTCPay Server - LunaNode

Сначала перейдите на сайт LunaNode.com, где мы создадим новый аккаунт. Нажмите на "Sign Up" в верхнем правом углу или используйте мастер начала работы на их главной странице.
![image](assets/en/111.webp)

После того, как вы создали новый аккаунт, LunaNode отправляет письмо для верификации. После того как вы подтвердите аккаунт, в отличие от Voltage, вам сразу предлагается пополнить баланс вашего аккаунта. Этот баланс необходим для оплаты пространства на сервере и хостинга.

![image](assets/en/112.webp)

#### Пополнение баланса вашего аккаунта на LunaNode

После того как вы нажмете "Deposit credit", вы сможете выбрать, сколько вы хотите пополнить и каким способом вы хотите это сделать. LunaNode и BTCPay Server будут стоить от 10 до 20 долларов США в месяц.
В отличие от Voltage.cloud, вы получаете полный доступ к вашему Виртуальному Частному Серверу (VPS отсюда и далее) и, следовательно, имеете больше контроля над вашим сервером. После создания нового аккаунта, LunaNode отправляет письмо для верификации.
После подтверждения аккаунта, в отличие от Voltage, вам сразу предлагается пополнить баланс вашего аккаунта. Этот баланс необходим для оплаты пространства на сервере и хостинга.

#### Как развернуть новый сервер?

В этом руководстве мы пройдем через процесс создания набора API ключей и использования запускалки BTCPay Server, созданной LunaNode.

В вашей панели управления LunaNode нажмите на API в верхнем правом углу. Это откроет новую страницу. Нам нужно только задать имя для API ключа. Остальное будет настроено LunaNode и не будет охвачено в этом руководстве. Нажмите кнопку "Create API Credential".
После создания учетных данных API вы получите длинную строку букв и символов. Это ваш API ключ.

![image](assets/en/113.webp)

#### Как развернуть новый сервер?

У этих учетных данных есть 2 части, API ключ и API ID; нам понадобятся оба. Прежде чем перейти к следующему шагу, давайте откроем вторую вкладку в браузере и перейдем на https://launchbtcpay.lunanode.com/

Здесь вас попросят предоставить ваш API ключ и API ID. Это для подтверждения, что именно вы развертываете этот новый сервер. API ключ должен быть все еще открыт в предыдущей вкладке; если вы прокрутите таблицу ниже, вы найдете API ID.

Вернитесь на страницу с запускалкой, заполните поля вашим API ключом и ID, и нажмите продолжить.

![image](assets/en/114.webp)

На следующем шаге вы можете предоставить имя домена. Если у вас уже есть домен и вы хотите использовать его для BTCPay Server, убедитесь, что вы также добавили DNS запись (называемую `A` записью) для вашего домена. Если у вас нет домена, используйте предоставленный LunaNode домен вместо этого (вы можете изменить это позже в настройках BTCPay Server) и нажмите Продолжить.

Узнайте больше о настройке или изменении DNS записи для BTCPay Server; https://docs.btcpayserver.org/FAQ/Deployment/#how-to-change-your-btcpay-server-domain-name

#### Запуск BTCPay Server на LunaNode

После выполнения предыдущих шагов, мы можем настроить все опции для нашего нового сервера. Здесь мы выберем Bitcoin (BTC) в качестве поддерживаемой валюты; мы можем указать электронную почту, чтобы получать уведомления о продлении сертификатов шифрования; это не обязательно.
Это руководство направлено на настройку среды Mainnet (реальный мир Bitcoin); однако LunaNode также позволяет вам настроить это для Testnet или Regtest в целях разработки. В этом руководстве мы оставим опцию Mainnet.
Выберите вашу реализацию Lightning. LunaNode предлагает две разные реализации, LND и Core Lightning. Для этого руководства мы выберем LND. Между обеими реализациями есть небольшие, но значимые различия; для более подробной информации рекомендуем прочитать обширную документацию; https://docs.btcpayserver.org/LightningNetwork#getting-started-with-btcpay-server-and-core-lightning-cln

![изображение](assets/en/115.webp)

LunaNode предлагает несколько планов Виртуальной Машины (VM). Они отличаются диапазонами цен и спецификациями сервера. Для этого руководства будет достаточно плана m2; однако, если вы выбрали в качестве валюты не только Bitcoin, рассмотрите использование как минимум m4.

Ускорьте начальную синхронизацию блокчейна; это необязательно и зависит от ваших потребностей. Есть продвинутые опции, такие как установка Lightning Alias, указание на конкретный релиз GitHub или установка SSH ключей; ни одна из этих опций не будет затронута в этом руководстве.

После заполнения формы вам нужно нажать Launch VM, и Lunanode начнет создание вашей новой VM, включая установленный на ней BTCPay Server. Этот процесс занимает пару минут; как только ваш сервер будет готов, LunaNode предоставит вам ссылку на ваш новый BTCPay Server.

После процесса создания нажмите на ссылку к вашему BTCPay Server; здесь вас попросят создать учетную запись администратора.

![изображение](assets/en/116.webp)

### Сводка навыков

В этом разделе вы узнали:

- Создание и пополнение аккаунта на LunaNode
- Использование BTCPay Server Launcher для создания собственного сервера

### Оценка знаний

#### Концептуальный обзор KA

Опишите некоторые различия между запуском экземпляра BTCPay Server на VPS и созданием аккаунта на хостинговом экземпляре.

## Установка BTCPay Server в среде Voltage

<chapterId>11c7d284-b4d2-5542-872c-df9bd9c1491b</chapterId>

Вы познакомитесь с Voltage.cloud как с провайдером хостинга, узнаете о первых шагах использования вашего BTCPay Server и научитесь работать с Lightning Network. После того, как мы пройдем через все шаги, вы сможете управлять интернет-магазином или платформой для сбора средств, принимающей Bitcoin!

Это один из многих способов развертывания BTCPay Server. Читайте нашу документацию для получения более подробной информации,
https://docs.btcpayserver.org.

### Развертывание BTCPay Server - Voltage.cloud

Сначала перейдите на сайт Voltage.cloud и зарегистрируйте новый аккаунт. При создании аккаунта вы можете подписаться на 7-дневную бесплатную пробную версию. Либо нажмите на "Sign Up" в верхнем правом углу, либо используйте "Try a free 7 day trial" на их домашней странице.

![изображение](assets/en/117.webp)

После создания аккаунта нажмите кнопку `NODES` на вашей панели управления. Как только мы выберем Nodes и создадим новый узел, нам будут представлены возможные узлы, которые предлагает Voltage. Поскольку это руководство также касается LightningNetwork, в Voltage мы сначала должны выбрать нашу реализацию Lightning, прежде чем мы создадим BTCPay Server. Нажмите на LightningNode.

![изображение](assets/en/118.webp)
Здесь вам нужно будет выбрать, какой тип узла Lightning вы хотите. Voltage предлагает разнообразие вариантов для вашей световой установки. Это отличается от развертывания, например, с LunaNode. Для целей этого руководства будет достаточно Lite Node. Подробнее о различиях читайте на Voltage.cloud.
![image](assets/en/119.webp)

Дайте вашему узлу Имя, установите пароль и обезопасьте этот пароль. Если этот пароль будет потерян, вы потеряете доступ к вашим резервным копиям, и Voltage не сможет его восстановить. Создайте узел, и Voltage покажет вам прогресс. Voltage создал ваш узел Lightning. Теперь мы можем создать экземпляр BTCPay Server и напрямую получить доступ к сети Lightning.

Нажмите на "Узлы" в верхнем левом углу вашей панели управления. Здесь вы можете настроить следующую часть вашего экземпляра BTCPay Server. Нажмите "создать новый", как только вы окажетесь в обзоре узлов. Вы увидите экран, похожий на предыдущий. Теперь вместо узла Lightning мы выбираем BTCPay Server.

Voltage покажет вам геолокацию вашего BTCPay Server, хостинг расположен в регионе Запад США. Здесь вы также увидите стоимость хостинга сервера. Нажмите Создать и дайте вашему BTCPay Server имя. Включите Lightning, и Voltage покажет вам узел Lightning, созданный на предыдущем шаге. Нажмите Создать, и Voltage создаст экземпляр BTCPay Server.

![image](assets/en/120.webp)

После нажатия на создать, Voltage представит вам стандартные имя пользователя и пароль. Они похожи на ваш предыдущий установленный пароль в Voltage. Нажмите на кнопку Войти в аккаунт, чтобы перенаправить вас на ваш BTCPay Server.

Добро пожаловать в ваш новый экземпляр BTCPay Server. Поскольку мы уже настроили Lightning в процессе создания, он покажет вам, что Lightning уже включен!

### Сводка навыков

В этой главе вы узнали:

- Создание аккаунта на Voltage.cloud
- Шаги по запуску BTCPay Server вместе с узлом Lightning на аккаунте

### Оценка знаний

#### Концептуальный обзор

В чем некоторые ключевые отличия между настройками Voltage и LunaNode?

## Установка BTCPay Server на узле Umbrel

<chapterId>3298e292-6476-5fe0-836c-7fa021348799</chapterId>

По завершении этих шагов вы сможете принимать платежи в Lightning в вашем магазине BTCPay на вашей локальной сети. Этот процесс также применим, если вы используете узел umbrel в ресторане или бизнесе. Если вы хотите подключить этот магазин к публичному веб-сайту, следуйте продвинутому упражнению, чтобы открыть ваш узел umbrel для публичного доступа.

https://umbrel.com/

![image](assets/en/121.webp)

### Развертывание BTCPay Server - Umbrel

После того как ваш узел Umbrel полностью синхронизируется с блокчейном Bitcoin, перейдите в Umbrel App Store и ищите BTCPay Server в разделе Приложения.

![image](assets/en/122.webp)

Нажмите на BTCPay Server, чтобы увидеть детали приложения. Когда детали BTCPay Server открыты, в нижнем правом углу показаны требования для корректной работы приложения. Указано, что для работы требуются узлы Bitcoin и Lightning. Если вы еще не установили узел Lightning на вашем Umbrel, нажмите Установить. Этот процесс может занять несколько минут.

![image](assets/en/123.webp)

После установки вашего узла Lightning:

1. Нажмите открыть в деталях приложения или на приложении в панели управления Umbrels.
2. Нажмите настроить новый узел; вам будут показаны 24 слова для восстановления вашего узла Lightning.
3. Запишите их.

![image](assets/en/124.webp)
Umbrel запросит подтверждение введенных слов. После настройки узла Lightning вернитесь в магазин приложений Umbrel и найдите BTCPay Server. Нажмите кнопку установки, и Umbrel покажет, установлены ли необходимые компоненты и требует ли BTCPay Server доступа к этим компонентам. После установки нажмите Открыть в верхнем правом углу деталей приложения или откройте BTCPay Server через панель управления Umbrel.

Umbrel запросит подтверждение введенных слов.

![изображение](assets/en/125.webp)

**!?Примечание!?**

Убедитесь, что вы храните их в надежном месте, как было ранее изучено при хранении ключей.

После настройки узла Lightning вернитесь в магазин приложений Umbrel и найдите BTCPay Server. Нажмите кнопку установки, и Umbrel покажет, установлены ли необходимые компоненты и требует ли BTCPay Server доступа к этим компонентам.

![изображение](assets/en/126.webp)

После установки нажмите Открыть в верхнем правом углу деталей приложения или откройте BTCPay Server через панель управления Umbrel.

![изображение](assets/en/127.webp)

### Сводка навыков

В этом разделе вы узнали:

- Шаги по установке BTCPay Server с функциональностью Lightning на узле Umbrel

### Оценка знаний

#### Концептуальный обзор

В чем отличие настройки на Umbrel от двух предыдущих вариантов размещения?

# Заключение

<partId>d72e6fa5-0870-5f00-9143-9466ed22e2bd</partId>



## Оцените курс
<chapterId>d90bb93d-b894-551e-9fd6-6855c739a904</chapterId>
<isCourseReview>true</isCourseReview>

## Заключение курса

<chapterId>c07ac2a5-f97e-5c57-8a80-4955b48128d4</chapterId>

![изображение](assets/en/128.webp)

Вы также должны иметь общее представление о том, что такое Bitcoin, как он работает и как может масштабироваться с помощью вторичных слоев, таких как Lightning Network. В этом курсе мы подробно рассмотрели, как любой может использовать BTCPay Server, начиная от первоначальной установки до создания магазина и управления сложными счетами-фактурами, чтобы стать финансово независимым лицом или торговцем.

Поздравляем с завершением этого курса. Мы надеемся, что вам понравился контент, и вы продолжите использовать и изучать BTCPay Server, а также разделяете наш энтузиазм относительно обещающего будущего Bitcoin и растущего сообщества разработчиков и участников.

> **FOSS неизбежен.**

### Глоссарий

| Термин                                                                               | Определение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 51% Attack                                                                           | Действие, направленное на намеренное создание новой самой длинной цепочки блоков для замены блоков в блокчейне. Это позволяет заменять транзакции, которые были включены в блокчейн. Такого рода атака наиболее легко осуществима, когда у вас есть большинство мощности майнинга, поэтому ее называют «Атакой большинства» или «51% атакой».                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| AccountKey                                                                           | Ключ учетной записи для ребейза                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| AccountKeyPath                                                                       | Путь от корня к ключу учетной записи, префикс которого - отпечаток мастер-публичного ключа.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Адрес                                                                                | Биткойн-адреса компактно кодируют информацию, необходимую для оплаты получателю. Современный адрес состоит из строки букв и цифр, начинающейся с bc1 и выглядящей как bc1qw508d6qejxtdg4y5r3zarvary0c5xw7kv8f3t4. Адрес является сокращением для скрипта блокировки получателя, который может быть использован отправителем для перевода средств получателю. Большинство адресов либо представляют собой публичный ключ получателя, либо некоторую форму скрипта, определяющего более сложные условия расходования. Приведенный выше пример - это адрес bech32, кодирующий программу свидетеля, блокирующую средства на хеш публичного ключа (См. Pay-to-Witness-Public-Key-Hash). Существуют также более старые форматы адресов, начинающиеся с 1 или 3, которые используют кодировку адресов Base58Check для представления хешей публичных ключей или хешей скриптов. |
| Тип Адреса                                                                           | Адрес может представлять несколько различных скриптов. Адреса кодируются и имеют префикс для передачи их типа скрипта. Устаревшие адреса используют Base58, и когда устаревший адрес является хешем публичного ключа, так называемый адрес P2PKH, он начинается с ‘1’. Менее часто устаревший адрес является хешем скрипта, в этом случае он будет начинаться с ‘3’. В настоящее время все адреса SegWit кодируются в Bech32 и начинаются с префикса ‘bc1’.                                                                                                                                                                                                                                                                                                                                                                                                             |
| Приложение                                                                           | BTCPay Server имеет плагины, которые могут функционировать как самостоятельное приложение.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| BIP 329                                                                              | Экспорт/импорт меток кошелька                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| BIP49                                                                                | Определяет схему производных для HD-кошельков, использующих формат сериализации P2WPKH, вложенный в P2SH (BIP 141), для транзакций с отделенными свидетелями.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Биткойн-Адрес                                                                        | Алфавитно-цифровая строка, куда вы отправляете свои биткойны, и теперь они "живут" там. Является идентификатором, который состоит из строки примерно из 33 букв и цифр. В текущей версии протокола адрес начинается с 1, 3 или b. Наличие адреса получателя является необходимой частью для инициирования биткойн-транзакции. Биткойн-адреса генерируются из публичных ключей, и из одного набора публичных ключей можно сгенерировать несколько адресов для улучшения конфиденциальности. Биткойн-адреса действуют так же, как адреса электронной почты: если вы хотите отправить сообщение, вам нужно знать, куда оно идет, то же самое и с биткойнами. Перед отправкой биткойн-транзакции вам нужно убедиться, что адрес получателя точен, поскольку биткойн-транзакции необратимы, и вы можете отправить биткойны на адрес, который не принадлежит получателю.      |
| bitcoin против Bitcoin                                                               | Bitcoin - это денежная сеть, а bitcoin (с маленькой буквы) - это денежная единица в сети Bitcoin. Вы используете валюту или токен bitcoin для совершения транзакций в сети Bitcoin.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Блок                                                                                 | Блок - это структура данных в блокчейне Bitcoin, состоящая из заголовка и тела транзакций Bitcoin. Блок помечен временной меткой и ссылается на конкретный предшествующий (родительский) блок. При хешировании заголовка блока получается доказательство выполненной работы, которое делает блокчейн вероятностно неизменяемым. Блоки должны соответствовать правилам, установленным консенсусом сети, для расширения блокчейна. Когда блок добавляется в блокчейн, включенные транзакции считаются получившими первое подтверждение.                                                                                                                                                                                                                                                                                                                                   |
| Блок-Эксплорер                                                                       | Онлайн-инструмент, который позволяет искать реальную и историческую информацию о блокчейне, включая данные, связанные с блоками, транзакциями, адресами и многим другим.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Хэш блока                                                                            | Хэш блока — это хэш SHA-256 данных блока, обычно представляемый в шестнадцатеричном формате. Хэш блока можно интерпретировать как очень большое число. Для удовлетворения требованиям Proof-of-Work, хэш блока должен быть ниже определенного порога. Таким образом, все хэши блоков начинаются с ряда нулей, за которыми следует буквенно-цифровая строка. Некоторые блоки имеют до двадцати ведущих нулей, в то время как более ранние блоки имеют всего восемь. Количество требуемых нулей примерно демонстрирует сложность майнинга на момент публикации блока.                                                                                                                                                                                                                                                                                                     |
| Высота блока                                                                         | Каждый блок нумеруется в порядке возрастания, начиная с нуля.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Награда за блок                                                                      | Состоит из субсидии за блок (новосозданный биткойн) и суммы всех комиссий за транзакции, включенные в блок.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Размер блока                                                                         | Каждый блок имеет ограниченное количество данных, которое может вместить. Данные, которые не поместились в определенный блок, будут записаны в одном из следующих блоков. Что касается блоков биткойна, ранее они имели размер блока 1 МБ, однако после мягкого форка размер блока технически может вмещать до 4 МБ данных.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Субсидия за блок                                                                     | Количество нового биткойна, создаваемого в каждом блоке. Каждый произведенный и добавленный в блокчейн блок позволяет создателю блока создать определенное количество нового биткойна. Субсидия начиналась с 50 BTC за блок и уменьшается вдвое каждые 210 000 блоков или примерно каждые 4 года.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Блокчейн                                                                             | Распределенный журнал или база данных всех транзакций биткойна. Транзакции группируются в отдельные обновления, называемые блоками, ограниченные до 4 миллионов весовых единиц. Блоки производятся примерно каждые 10 минут посредством стохастического процесса, называемого майнингом. Каждый блок включает в себя вычислительно сложное "доказательство работы". Требование доказательства работы используется для регулирования интервалов между блоками и защиты блокчейна от атак с целью переписать историю: атакующему потребуется превзойти существующее доказательство работы, чтобы заменить уже опубликованные блоки, делая каждый блок вероятностно неизменным, поскольку он закопан под последующими блоками.                                                                                                                                             |
| BTCPAY Server Vault                                                                  | Для оптимального баланса между удобством использования, безопасностью и конфиденциальностью рекомендуется использовать кошелек BTCPay Server с аппаратным кошельком. BTCPay Vault создан для связи аппаратного кошелька и BTCPay Server.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Проблема византийских генералов                                                      | Проблема теории игр, которая описывает трудности, с которыми сталкиваются децентрализованные стороны при достижении консенсуса без опоры на доверенную центральную сторону. Название происходит от сценария, в котором несколько генералов осаждают Византию. Они окружили город, но им нужно коллективно решить, когда атаковать. Если все генералы атакуют одновременно, они победят, но если они атакуют в разное время, они проиграют. У генералов нет надежных каналов связи друг с другом, потому что любые сообщения, которые они отправляют или получают, могли быть перехвачены или обманом отправлены защитниками Византии. Как генералы могут организоваться для одновременной атаки?                                                                                                                                                                        |
| Цензура                                                                              | Контроль над тем, какая информация может быть передана массам. Когда речь идет о биткойне, цензура касается возможности остановки транзакции третьими сторонами.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Сдача                                                                                | Часть UTXO, возвращаемая в кошелек отправителя, обычно через другой адрес. Равна сумме входов минус сумма потраченных средств и комиссия за транзакцию.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Child Pays For Parent (CPFP)                                                         | Техника увеличения комиссии, при которой пользователь тратит выход с низкой комиссией из неподтвержденной транзакции в дочерней транзакции с высокой комиссией, чтобы стимулировать майнеров включить обе транзакции в блок.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Coinbase Transaction                                                                 | Первая транзакция в каждом блоке, которая распределяет награду за блок и комиссии за транзакции тому, кто добыл блок.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Coincidence of Wants                                                                 | Экономическое явление, при котором две стороны имеют предмет, который хочет другая сторона, поэтому они обмениваются этими предметами напрямую без использования денежного посредника.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Cold Storage                                                                         | Способ управления данными без подключения к интернету.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Cold Wallet                                                                          | Тип биткойн-кошелька, который безопасно хранит ваши приватные ключи в оффлайне, обычно на физическом устройстве. Также известен как аппаратный кошелек, он защищает ваши цифровые биткойны от онлайн-хакеров с помощью устройства, похожего на флешку, которое не подключено к интернету.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Command Line Interface (CLI)                                                         | Взаимодействие с устройством или компьютерной программой с помощью команд от пользователя или клиента и ответов от устройства или программы в виде строк текста.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Commitment Transaction                                                               | Транзакция обязательств — это биткойн-транзакция, подписанная обеими сторонами канала, которая кодирует последний баланс канала. Каждый раз, когда совершается новый платеж или перевод с использованием канала, баланс канала обновляется, и новая транзакция обязательств подписывается обеими сторонами. Важно, что в канале между Алисой и Бобом оба хранят свою версию транзакции обязательств, которая также подписана другой стороной. В любой момент канал может быть закрыт либо Алисой, либо Бобом, если они отправят свою транзакцию обязательств в блокчейн биткойна. Отправка старой (устаревшей) транзакции обязательств считается обманом (т.е. нарушением протокола) в сети Lightning и может быть наказана другой стороной, присвоившей все средства в канале для себя, через штрафную транзакцию.                                                     |
| Confirmation                                                                         | Как только транзакция включена в блок, она получает одно подтверждение. Как только добывается другой блок в блокчейне, транзакция получает два подтверждения, и так далее. Шесть или более подтверждений считаются достаточным доказательством того, что транзакция не может быть отменена.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Crowdfund (CF)                                                                       | Плагин по умолчанию для BTCPay Server, позволяющий владельцу магазина легко создать типичный сайт для краудфандинга. Они могут легко установить цель, создать бонусы за вклады и настроить его под свои нужды.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Cryptography                                                                         | Особая система, в которой исходное сообщение изменяется так, чтобы его могли получить только предполагаемые получатели.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Dashboard                                                                            | Центральная страница входа в BTCPay Server. Она предоставляет обзор всей активности магазина, отображаемой на ряде сводных плиток.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Demo                                                                                 | Относится к виртуальной среде, в которой проходят демонстрации программного обеспечения.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Deployment                                                                           | Развертывание программного обеспечения включает в себя все действия, которые делают систему программного обеспечения доступной для использования. Общий процесс развертывания состоит из нескольких взаимосвязанных действий с возможными переходами между ними.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Путь производного ключа                                                              | Данные, которые указывают иерархическому детерминированному (HD) кошельку, как получить конкретный ключ в дереве ключей. Пути производных ключей используются как стандарт Bitcoin и были введены вместе с HD кошельками как часть BIP 32.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Корректировка сложности                                                              | Корректировка цели сложности каждые 2016 блоков (примерно каждые две недели), чтобы попытаться обеспечить, что блоки добываются в среднем раз в 10 минут. Таким образом, создается постоянное время между блоками и постоянный выпуск новых биткоинов в сеть (через вознаграждение за блок).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Цель сложности                                                                       | Используется в майнинге, это число, которое хеш блока должен быть ниже, чтобы блок был добавлен в блокчейн.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Цифровая подпись                                                                     | Цифровая подпись - это математическая схема для проверки подлинности и целостности цифровых сообщений или документов. Это можно рассматривать как криптографическое обязательство, при котором сообщение не скрывается.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Делимость                                                                            | Свойство товара, который может быть разделен на меньшие части без потери ценности. Поскольку экономические транзакции часто происходят в различных количествах, валюта должна быть делимой, чтобы ее можно было широко использовать в экономике.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Docker                                                                               | Программное обеспечение, которое упаковывает программное обеспечение в стандартизированные единицы, называемые контейнерами, которые имеют все необходимое для работы программы, включая библиотеки, системные инструменты, код и среду выполнения.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Двойная трата                                                                        | Результат успешной траты некоторой суммы денег более одного раза. Bitcoin защищает от двойной траты, проверяя, что каждая транзакция, добавленная в блокчейн, соответствует правилам консенсуса; это означает проверку того, что входы для транзакции не были ранее потрачены.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Прочность                                                                            | Свойство денег, при котором валюта может сохранять свое первоначальное состояние со временем и выдерживать повторное использование. Прочная валюта должна быть способна выдержать потенциальные повреждения.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Electrum                                                                             | Electrum - один из самых популярных биткоин-кошельков, созданный в 2011 году.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Расширенный публичный ключ (Xpub)                                                    | Расширенный публичный ключ, также известный как Xpub, публичный ключ, который функционирует как родитель для ключей, производных от xpub, как особенность HD кошелька. Этот Xpub является стандартом, введенным в BIP 32. Кошельки используют его за кулисами для получения публичных ключей. Распространение Xpub не рекомендуется, ваши средства не будут под прямой угрозой перемещения, xpub не может получить приватные ключи. Преимущество распространения xpub может заключаться в целях краудфандинга в BTCPay Server. Xpub распространяется через онлайн-средства, в то время как приватные ключи остаются офлайн на аппаратном кошельке.                                                                                                                                                                                                                      |
| F.U.D.                                                                               | Сокращение от Fear, uncertainty and doubt (Страх, неопределенность и сомнение); Обычно вызывается намеренно, чтобы поставить конкурента в невыгодное положение.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Комиссия                                                                             | В контексте сети Lightning, узлы будут взимать комиссионные за пересылку платежей других пользователей. Отдельные узлы могут устанавливать свои собственные политики комиссий, которые будут рассчитываться как сумма фиксированной базовой комиссии и комиссии, зависящей от суммы платежа. В контексте Bitcoin, отправитель транзакции платит комиссию майнерам за включение транзакции в блок. Комиссии за транзакции Bitcoin не включают базовую комиссию и зависят линейно от веса транзакции, но не от суммы.                                                                                                                                                                                                                                                                                                                                                     |
| Fiat                                                                                 | Валюта, выпущенная государством, не обеспеченная товаром, таким как золото.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Finite                                                                               | Относится к ограниченному количеству биткойнов.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Fork                                                                                 | Изменение в протоколе или части кода. Форки обычно вводятся для обновления проекта. В сообществе открытого исходного кода форки существуют, потому что многие люди выбирают скачивать и запускать одно и то же программное обеспечение в разное время и не всегда обновляют его. Если два пользователя скачали и запустили версию 1 программного обеспечения, и только один пользователь обновился, когда была выпущена версия 2, пользователь, который обновился, использует форк версии 1.                                                                                                                                                                                                                                                                                                                                                                            |
| Funding Transaction                                                                  | Транзакция, используемая для открытия платежного канала. Стоимость (в биткойнах) финансирующей транзакции точно соответствует емкости платежного канала. Выход финансирующей транзакции - это скрипт мультиподписи 2 из 2 (multisig), где каждый партнер канала контролирует один ключ. Благодаря своей мультиподписной природе, ей можно распорядиться только по взаимному согласию между партнерами канала. В конечном итоге она будет потрачена одной из транзакций обязательств или закрывающей транзакцией.                                                                                                                                                                                                                                                                                                                                                        |
| Fungible                                                                             | Быть чем-то (таким как деньги или товар), что такой природы, что одна часть или количество может быть заменено другой равной частью или количеством при оплате долга или урегулировании счета.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Gap Limit                                                                            | Относится к стандартному количеству публичных адресов, которые проверяются на наличие транзакций в блокчейне для расчета баланса аккаунта. Транзакции, полученные на адрес за пределами лимита гэпа, не обнаруживаются.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Genesis Block                                                                        | Первый блок в блокчейне биткойна. Сатоши Накамото, создатель биткойна, добыл генезис-блок 3 января 2009 года и включил в него заголовок того дня из Financial Times: “Канцлер на грани второго спасения банков”.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Github                                                                               | Платформа и облачный сервис для разработки программного обеспечения и контроля версий с использованием Git, позволяющий разработчикам хранить и управлять своим кодом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Gossip Protocol                                                                      | Узлы LN отправляют и получают информацию о топологии сети Lightning через сообщения сплетен, которые обмениваются с их пирами. Протокол сплетен в основном определен в BOLT #7 и определяет формат сообщений node_announcement, channel_announcement и channel_update. Чтобы предотвратить спам, сообщения о объявлении узлов будут пересылаться только в случае, если у узла уже есть канал, и сообщения о объявлении каналов будут пересылаться только в случае, если финансирующая транзакция канала была подтверждена сетью биткойна. Обычно узлы Lightning соединяются со своими партнерами по каналу, но подключение к любому другому узлу Lightning для обработки сообщений сплетен также допустимо.                                                                                                                                                             |
| Gresham's Law                                                                        | Закон, утверждающий, что “плохие деньги вытесняют хорошие”. Другими словами, в экономике, где используются две валюты, люди будут тратить плохие деньги, которые постоянно обесцениваются, и держать хорошие деньги, которые сохраняют свою стоимость. Таким образом, плохие деньги будут доминировать в плане обращения и использования в повседневных транзакциях, в то время как хорошие деньги будут доминировать в плане сбережений и долгосрочных инвестиций.                                                                                                                                                                                                                                                                                                                                                                                                     |
| Halving                                                                              | Событие, которое уменьшает скорость выпуска биткойнов вдвое каждые 210 000 блоков (примерно каждые четыре года).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Хард Форк                                                                            | Изменение консенсуса, которое не совместимо с предыдущими версиями. Несовместимость с предыдущими версиями возникает, когда ранее недопустимое поведение становится допустимым. Для поддержания консенсуса после хард форка все узлы должны быть обновлены. В противном случае старые узлы будут отклонять транзакции или блоки как недействительные по старым правилам, в то время как обновленные узлы будут принимать их как действительные. По этой причине в Bitcoin стараются избегать хард форков любой ценой.                                                                                                                                                                                                                                                                                                                                                   |
| Аппаратный Кошелек (HWW)                                                             | Особый тип Bitcoin кошелька, который хранит приватные ключи пользователя в защищенном аппаратном устройстве.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Хеш-Функция                                                                          | Криптографическая хеш-функция - это математический алгоритм, который отображает данные произвольного размера в битовую строку фиксированного размера (хеш) и предназначен для того, чтобы быть односторонней функцией, то есть функцией, обратное преобразование которой является невыполнимым. Единственный способ воссоздать исходные данные из выходных данных идеальной криптографической хеш-функции - это попытка перебора возможных входных данных, чтобы увидеть, производят ли они совпадение.                                                                                                                                                                                                                                                                                                                                                                 |
| Хешрейт                                                                              | Мера того, сколько хешей в секунду в совокупности производят майнеры в сети Bitcoin. Один хеш - это попытка создать Доказательство Работы для блока.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Горячий Кошелек                                                                      | Устройство с внешними подключениями, особенно к интернету. Горячий кошелек - это Bitcoin кошелек, который подключается к интернету. Эти кошельки более удобны для повседневных расходов, но не так безопасны, как варианты холодного хранения, поскольку они взаимодействуют с интернетом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Начальная Загрузка Блока (IBD)                                                       | Процесс построения полной блокчейн Bitcoin с нуля. Когда новый узел настраивается и присоединяется к сети, он соединяется с другими узлами и запрашивает у них блоки. Новый узел обрабатывает эти блоки и строит блокчейн, пока не догонит и не синхронизируется с сетью.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Счет-Фактура                                                                         | Коммерческий документ, выдаваемый продавцом покупателю в связи с сделкой купли-продажи и указывающий продукты, количество и согласованные цены на продукты или услуги, которые продавец предоставил покупателю.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Знай Своего Клиента (KYC)                                                            | Законы, предназначенные для предотвращения использования финансовых институтов для незаконных денежных переводов, требующие, чтобы все финансовые счета были идентифицированы для физических лиц или организаций.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Слой 2                                                                               | Сеть, построенная поверх блокчейна, например, Lightning Network.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Устаревший Адрес                                                                     | Устаревшие адреса используют Base58, и когда устаревший адрес является хешем публичного ключа, так называемый адрес P2PKH, он начинается с ‘1’.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Lightning Network                                                                    | Протокол поверх Bitcoin. Создает сеть платежных каналов, которая позволяет бездоверительно пересылать платежи по сети с помощью HTLC и маршрутизации через луковицу. Другие компоненты Lightning Network включают протокол сплетни, транспортный слой и запросы на платеж.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Ликвидность                                                                          | Мера нескольких характеристик книги заказов конкретного актива на данном рынке. Ликвидность является индикатором того, какое влияние на цену актива окажет крупный заказ. Актив с большей ликвидностью имеет большую глубину книги заказов. Это означает, что он сможет поглотить больше заказов с меньшими колебаниями цены.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Самая длинная цепь (Longest Chain)                                                   | Цепочка блоков, создание которой потребовало наибольших усилий. Названа так, потому что интуитивно блокчейн, содержащий больше блоков, потребовал больше энергии для своего создания, чем цепь с меньшим количеством блоков, но более точно это цепь, создание которой требовало больше работы, так что более подходящим названием было бы "самая тяжелая цепь".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Основная цепь (Main Chain)                                                           | В контексте Сети Молнии (Lightning Network) это относится к Биткойн сети.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Средство обмена (Medium of Exchange)                                                 | Тип товара, который облегчает обмен другими товарами и услугами в экономике. Исторически в качестве средства обмена использовались предметы вроде ракушек, бусин и золота.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Мемпул (Mempool)                                                                     | Сокращение от "пул памяти", это временное хранилище для транзакций, которые были получены узлом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Майнер (Miner)                                                                       | Узел, занимающийся процессом построения блокчейна путем добавления новых блоков через процесс хеширования.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Майнинг (Mining)                                                                     | Процесс создания блока из недавних транзакций Биткойна и затем решения вычислительной задачи, требуемой в качестве доказательства работы. Это процесс, посредством которого обновляется общий реестр биткойнов (т.е., блокчейн Биткойна) и в который включаются новые транзакции. Это также процесс, посредством которого выпускается новый биткойн. Каждый раз, когда создается новый блок, майнинговый узел получает новый биткойн, созданный в транзакции coinbase этого блока.                                                                                                                                                                                                                                                                                                                                                                                      |
| Мультиподпись (Multisignature, multisig)                                             | Скрипт, требующий более одной подписи для авторизации расходования средств. Платежные каналы всегда кодируются как адреса мультиподписи, требующие одной подписи от каждого партнера платежного канала. В стандартном случае двухстороннего платежного канала используется адрес мультиподписи 2 из 2.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Узел (Node)                                                                          | Компьютер, участвующий в сети. В частности, в сетях Биткойн или Молнии (Lightning).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Выход (Output)                                                                       | Пакет биткойнов, созданный в биткойн-транзакции.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Блокировка выхода (Output Lock)                                                      | Набор требований, предъявляемых к выходу. Эти требования должны быть выполнены, чтобы можно было использовать выход в транзакции. Наиболее распространенным примером является простое требование наличия приватного ключа.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Адрес P2SH                                                                           | Адреса P2SH представляют собой кодировки Base58Check 20-байтового хеша скрипта. Адреса P2SH начинаются с "3". Адреса P2SH скрывают всю сложность, так что отправитель платежа не видит скрипт.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Адрес P2WPKH                                                                         | Формат адреса "родной SegWit v0", адреса P2WPKH кодируются в bech32 и начинаются с "bc1q".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Адрес P2WSH                                                                          | Формат адреса скрипта "родной SegWit v0", адреса P2WSH кодируются в bech32 и начинаются с "bc1q".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Частично подписанная биткойн-транзакция (Partially Signed Bitcoin Transaction, PSBT) | Стандарт Биткойна, который облегчает переносимость неподписанных транзакций, что позволяет нескольким сторонам легко подписывать одну и ту же транзакцию. Это особенно полезно, когда несколько сторон хотят добавить входы в одну и ту же транзакцию. PSBT был введен BIP 174 и позволяет пользователям более легко подписывать транзакции на устройстве холодного хранения, а затем транслировать подписанную транзакцию с устройства, подключенного к интернету.                                                                                                                                                                                                                                                                                                                                                                                                     |
| Поиск пути                                                                           | Процесс нахождения пути для платежа от источника к получателю в сети Lightning.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Pay-to-Public-Key-Hash (P2PKH)                                                       | P2PKH — это тип выхода, который блокирует биткойны на хеш публичного ключа. Выход, заблокированный скриптом P2PKH, может быть разблокирован (потрачен) путем предъявления публичного ключа, соответствующего хешу, и цифровой подписи, созданной соответствующим приватным ключом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Pay-to-Script-Hash (P2SH)                                                            | P2SH представляет собой универсальный тип выхода, который позволяет использовать сложные скрипты Bitcoin. С P2SH сложный скрипт, который детализирует условия использования выхода (скрипт выкупа), не представлен в блокирующем скрипте. Вместо этого значение блокируется на хеш скрипта, который должен быть представлен и выполнен для использования выхода.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Pay-to-Taproot (P2TR)                                                                | Активированный в ноябре 2021 года, Taproot — это новый тип выхода, который блокирует биткойны на дерево условий расходования или на одно корневое условие.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Pay-to-Witness-Public-Key-Hash (P2WPKH)                                              | P2WPKH — это эквивалент P2PKH в SegWit, использующий отдельный свидетель (segregated witness). Подпись для использования выхода P2WPKH помещается в дерево свидетелей вместо поля ScriptSig.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Pay-to-Witness-Script-Hash (P2WSH)                                                   | P2WSH — это эквивалент P2SH в SegWit, использующий отдельный свидетель. Подпись и скрипт для использования выхода P2WSH помещаются в дерево свидетелей вместо поля ScriptSig.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Payjoin                                                                              | Особый тип транзакции Bitcoin, при котором как отправитель, так и получатель вносят входы, чтобы нарушить общую эвристику владения входами, предположение, используемое для снижения приватности пользователей биткойнов.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Платежный канал                                                                      | Финансовые отношения между двумя узлами в сети Lightning, созданные с использованием биткойн-транзакции на мультиподписной адрес. Партнеры по каналу могут использовать канал для отправки биткойнов друг другу без регистрации всех транзакций в блокчейне Bitcoin. В типичном платежном канале в блокчейн добавляются только две транзакции: транзакция финансирования и транзакция обязательств. Платежи, отправленные через канал, не записываются в блокчейн и считаются происходящими "вне цепочки".                                                                                                                                                                                                                                                                                                                                                              |
| Запрос на платеж                                                                     | Функция, позволяющая владельцам магазинов BTCPay создавать долгосрочные счета. Средства, отправленные на запрос платежа, используют обменный курс на момент платежа. Это позволяет пользователям совершать платежи в удобное для них время без необходимости согласования или проверки обменного курса с владельцем магазина в момент платежа.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Выплата                                                                              | Функциональность выплат связана с Pull Payments. Эта функция позволяет вам обрабатывать платежи по запросу (возвраты, выплаты зарплаты или снятие средств).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Плагин                                                                               | Дополнение к программе, которое устанавливается на программу, расширяя ее возможности.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Точка продаж (PoS)                                                                   | Стандартный плагин сервера BTCPay, позволяющий владельцу магазина создать веб-магазин непосредственно из сервера BTCPay. Владельцу магазина не нужны сторонние решения для электронной коммерции для ведения веб-магазина.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Портативность                                                                        | Способность товара легко транспортироваться в пространстве. Портативность является важной характеристикой надежных денег; для того чтобы деньги были широко приняты и, следовательно, использовались, они должны легко перемещаться через границы, между людьми и на большие расстояния с относительной легкостью.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Доказательство Работы (PoW)                                                          | Данные, нахождение которых требует значительных вычислений, и которые любой желающий может легко проверить, чтобы доказать объем работы, необходимой для их получения. В Bitcoin майнеры должны найти числовое решение алгоритма SHA-256, которое соответствует общесетевому критерию, называемому целевым уровнем сложности.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Псевдоним                                                                            | Фальшивое имя, используемое индивидами для защиты их идентичности или создания репутации, отдельной от их реальной идентичности. Публичные ключи используются для того, чтобы пользователи Bitcoin могли получать биткоины, оставаясь псевдонимными в отношении блокчейна.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Криптография с Открытым Ключом                                                       | Включает в себя пару ключей, известных как открытый ключ и закрытый ключ, которые ассоциированы с сущностью, которая должна электронно аутентифицировать свою идентичность или подписывать или шифровать данные. Открытый ключ публикуется, а соответствующий закрытый ключ хранится в секрете. Данные, зашифрованные с помощью открытого ключа, могут быть расшифрованы только соответствующим закрытым ключом.                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Открытый/Закрытый Ключ                                                               | Пара ключей, используемая в криптографии с открытым ключом. Открытый ключ делится с другими открыто и может рассматриваться как номер счета, в то время как закрытый ключ хранится в секрете и может рассматриваться как пароль.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Платеж по Запросу                                                                    | Традиционно, для совершения платежа в Bitcoin, получатель делится своим биткоин-адресом, а отправитель позже отправляет деньги на этот адрес. Такая система называется платежом по инициативе отправителя, поскольку отправитель инициирует платеж, в то время как получатель может быть недоступен, фактически направляя платеж получателю. Вместо типичного сценария, когда отправитель "направляет" платеж, отправитель позволяет получателю запросить платеж в удобное для него время.                                                                                                                                                                                                                                                                                                                                                                              |
| Кроличья Нора                                                                        | Отсылка к "Алисе в Стране чудес", где герой отправляется в приключение, войдя в кроличью нору. В контексте Bitcoin это относится к кажущимся бесконечным темам, которые человек исследует и видит в новом свете, как только начинает понимать Bitcoin.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Получение                                                                            | Процесс получения биткоинов на предоставленный адрес.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Регистрация                                                                          | Процесс создания учетной записи или подписки на сервис, обычно путем выбора имени пользователя и пароля.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Замена через Комиссию (RBF)                                                          | Транзакция Bitcoin может быть обозначена как RBF, чтобы позволить отправителю заменить эту транзакцию другой похожей транзакцией, которая платит более высокую комиссию. Этот механизм существует, чтобы позволить пользователям реагировать, если сеть становится перегруженной и комиссии неожиданно повышаются.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Репозиторий                                                                          | В системах контроля версий репозиторий - это структура данных, которая хранит метаданные для набора файлов или структуры каталогов. В зависимости от того, распределенная ли система контроля версий, как Git или Mercurial, или централизованная, как Subversion, CVS или Perforce, весь набор информации в репозитории может быть дублирован на системе каждого пользователя или может поддерживаться на одном сервере. Среди прочего, некоторые метаданные, которые содержит репозиторий, включают историческую запись изменений в репозитории, набор объектов коммитов и набор ссылок на объекты коммитов, называемых головами.                                                                                                                                                                                                                                     |
| Повторное сканирование                                                               | Процесс сканирования текущего состояния набора UTXO на предмет монет, принадлежащих ранее настроенной схеме производных.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Ключ отзыва                                                                          | Каждый контракт с возможностью отзыва по времени (RSMC) содержит два ключа отзыва. Каждый партнер по каналу знает один ключ отзыва. Зная оба ключа отзыва, выход RSMC может быть потрачен в пределах предопределенного временного замка. При переговорах о новом состоянии канала старые ключи отзыва делятся, тем самым "аннулируя" старое состояние. Ключи отзыва используются для того, чтобы не допустить распространение партнерами по каналу старого состояния канала.                                                                                                                                                                                                                                                                                                                                                                                            |
| Маршрутизация                                                                        | Процесс использования пути Lightning Network для совершения платежа.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Комиссии за маршрутизацию                                                            | В сети Lightning комиссии, взимаемые за пересылку платежей других пользователей. Отдельные узлы могут устанавливать собственные политики комиссий, которые будут рассчитываться как сумма фиксированной базовой комиссии и комиссии за транзакцию, зависящей от суммы платежа.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Ликвидность                                                                          | Легкость, с которой товар может быть продан на рынке в любое время по желанию его владельца, с минимальной потерей в его цене.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Сатоши (sat)                                                                         | Сатоши - это наименьшая единица (номинал) биткойна, которая может быть записана в блокчейне. Один сатоши равен 1/100 миллиона (0.00000001) биткойна и назван в честь создателя Биткойна, Сатоши Накамото.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Сатоши Накамото                                                                      | Имя, используемое человеком или группой людей, которые разработали Биткойн и создали его первую референсную реализацию. В рамках реализации они также разработали первую блокчейн-базу данных. В процессе они первыми решили проблему двойных расходов для цифровой валюты. Их настоящая личность остается неизвестной.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Сатоши за байт                                                                       | Единица измерения приоритета транзакции, определяемая как комиссия за транзакцию в сатоши, деленная на размер транзакции в байтах.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Сатоши за верабайт                                                                   | Концепция, аналогичная Сатоши за байт, но для новых адресов, использующих Segwit. Равна размеру транзакции в весовых единицах, деленному на 4. Весовые единицы рассчитываются путем умножения размера транзакции (без свидетеля) на 3, добавленного к размеру транзакции, включая свидетеля.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Дефицитность                                                                         | Свойство товара, который не может быть беззатратно воспроизведен. Дефицитность не зависит от количества существующих единиц товара, а скорее от затратности производства дополнительных единиц.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Скрипт                                                                               | Биткойн использует систему скриптов для транзакций, называемую Bitcoin Script. Похожа на язык программирования Forth, она проста, основана на стеке и обрабатывается слева направо. Она намеренно не является Тьюринг-полной, без циклов или рекурсии.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Сид-фраза                                                                            | Список слов, которые хранят всю информацию, необходимую для восстановления средств Биткойн в блокчейне. Программное обеспечение кошелька обычно генерирует сид-фразу и инструктирует пользователя записать ее на бумаге. Если компьютер пользователя сломается или его жесткий диск станет непригодным для использования, он может снова загрузить то же программное обеспечение кошелька и использовать бумажный резервный копию, чтобы вернуть свои биткойны.                                                                                                                                                                                                                                                                                                                                                                                                         |
| Segregated Witness (SegWit)                                                          | Segregated Witness (SegWit) — это обновление протокола Bitcoin, введенное в 2017 году, которое добавляет новое поле свидетеля для подписей и других доказательств авторизации транзакций. Это новое поле свидетеля не учитывается при расчете идентификатора транзакции, что решает большинство классов изменчивости транзакций третьими сторонами. Segregated Witness был внедрен как мягкое разветвление и является изменением, которое технически делает правила протокола Bitcoin более ограничительными.                                                                                                                                                                                                                                                                                                                                                           |
| Self-Sovereignty                                                                     | Модель управления цифровыми идентификаторами, в которой физические или юридические лица имеют исключительное право на контроль своих аккаунтов и личных данных.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Send                                                                                 | Процесс отправки биткоина на адрес.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Sensitivity Mode                                                                     | Режим чувствительности активируется через переключатель в настройках магазина, в результате чего числовые значения (например, количество биткоинов) становятся скрытыми во всех представлениях.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Server Settings                                                                      | Настройки внутри BTCPay Server, которые применяются на уровне всего сервера (в отличие от настроек магазина, которые ограничены одним магазином).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| SHA-256                                                                              | Криптографическая хеш-функция. Является членом семейства хеш-функций под названием Secure Hashing Algorithm (SHA).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Shopify                                                                              | Канадская многонациональная компания в области электронной коммерции с главным офисом в Оттаве, Онтарио. Shopify — это название собственной платформы для интернет-магазинов и розничных систем продаж.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| SMTP                                                                                 | Простой протокол передачи почты (Simple Mail Transfer Protocol) — стандартный интернет-протокол для передачи электронной почты.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Soft Fork                                                                            | Обновление протокола, совместимое как с предыдущими, так и с новыми версиями, позволяющее старым и новым узлам продолжать использовать одну и ту же цепочку.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Software Stack                                                                       | В информатике набор программного обеспечения или компонентов, необходимых для создания полноценной платформы, так чтобы для поддержки приложений не требовалось дополнительное программное обеспечение.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Store                                                                                | Магазин внутри BTCPay Server можно рассматривать как "дом" для конкретного биткоин-кошелька, расширенный всеми функциями BTCPay Server.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Store Settings                                                                       | Настройки внутри BTCPay Server, специфичные для магазина.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Taproot                                                                              | Обновление Bitcoin, которое ввело несколько новых функций. Обновление описано в BIPs 340, 341 и 342 и вводит схему подписи Schnorr, Taproot и Tapscript. Вместе эти обновления вводят новые, более эффективные, гибкие и конфиденциальные способы передачи биткоина.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Thier's Law                                                                          | Закон, согласно которому хорошие деньги вытесняют плохие.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Third-Party Host                                                                     | Когда веб-сайт индивидуального предпринимателя или компании работает на серверах, принадлежащих и управляемых другой компанией. Альтернативой является размещение вашего веб-сайта на собственных серверах в собственном дата-центре.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Timelock                                                                             | Таймлок — это тип обременения, который ограничивает возможность траты некоторых биткоинов до определенного будущего времени или высоты блока. Таймлоки широко используются во многих биткоин-контрактах, включая платежные каналы и HTLCs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Топология                                                                            | Топология сети Lightning описывает форму сети Lightning как математический граф. Узлы графа - это узлы сети Lightning (участники сети/пиры). Рёбра графа - это платёжные каналы. Топология сети Lightning публично транслируется с помощью протокола gossip, за исключением необъявленных каналов. Это означает, что сеть Lightning может быть значительно больше, чем объявленное количество каналов и узлов. Знание топологии особенно интересно в процессе маршрутизации платежей на основе источника, когда отправитель ищет маршрут.                                                                                                                                                                                                                                                                                                                               |
| Транзакция                                                                           | Транзакции - это структуры данных, используемые Bitcoin для передачи биткоинов с одного адреса на другой. Несколько тысяч транзакций агрегируются в блок, который затем записывается (майнится) в блокчейне. Первая транзакция в каждом блоке, называемая транзакцией coinbase, генерирует новые биткоины.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Идентификатор транзакции (Transaction ID)                                            | Строка букв и цифр, которая идентифицирует конкретную транзакцию в блокчейне. Строка является просто двойным хешем SHA-256 транзакции. Этот хеш может быть использован для поиска транзакции на узле или в блок-эксплорере.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Двухфакторная аутентификация (2FA)                                                   | Метод безопасности управления идентификацией и доступом, который требует две формы идентификации для доступа к ресурсам и данным, часто с использованием вторичного устройства в дополнение к стандартному паролю входа.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Нецензурируемость                                                                    | Свойство, при котором никакая сущность не имеет возможности отменить транзакцию Bitcoin или внести в чёрный список кошелек или адрес.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Неподверженность конфискации                                                         | Свойство, при котором никакая сущность не может взять биткоины у сущности против её воли.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Нерасходованные выходы транзакций (UTXO)                                             | Выходы, которые ещё не были потрачены, и, следовательно, доступны для использования в новых транзакциях.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Пользовательский опыт (UX)                                                           | Как пользователь взаимодействует и переживает продукт, систему или услугу. Это включает в себя восприятие пользователя полезности, удобства использования и эффективности.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Пользовательский интерфейс (UI)                                                      | Точка взаимодействия и коммуникации человека с компьютером в устройстве.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Верифицируемость                                                                     | Свойство товара, который можно легко отличить от подделок и контрафактов.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Виртуальный                                                                          | Существующий на компьютере или в компьютерной сети либо симулируемый на них.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Виртуальная машина (VM)                                                              | В вычислительной технике виртуальная машина - это виртуализация или эмуляция компьютерной системы. Виртуальные машины основаны на архитектурах компьютеров и обеспечивают функциональность физического компьютера. Их реализации могут включать в себя специализированное оборудование, программное обеспечение или их комбинацию.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Виртуальный частный сервер                                                           | Виртуальный частный сервер - это виртуальная машина, продаваемая как услуга интернет-хостингом. Термин "виртуальный выделенный сервер" также имеет аналогичное значение. Виртуальный частный сервер работает со своей копией операционной системы, и клиенты могут иметь уровень доступа суперпользователя к этому экземпляру операционной системы, так что они могут устанавливать почти любое программное обеспечение, которое работает на этой ОС.                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Волатильность                                                                        | Мера степени изменчивости цены актива со временем. Активы, которые регулярно испытывают большие изменения в цене, более волатильны, в то время как активы с более стабильной ценой менее волатильны.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Кошелек                                                                              | Биткойн-кошельки хранят ключи пользователя, позволяя ему получать биткойны, подписывать транзакции и проверять баланс своего счета. Приватные и публичные ключи, хранящиеся в биткойн-кошельке, выполняют две разные функции, но связаны между собой при создании. Биткойн-кошельки содержат ключи пользователя, а не его фактические биткойны. Концептуально кошелек похож на связку ключей, поскольку он содержит множество пар приватных и публичных ключей. Эти ключи используются для подписания транзакций, позволяя пользователю доказать, что он владеет выходами транзакций в блокчейне, т.е. своими биткойнами. Все биткойны записываются в блокчейне в виде выходов транзакций.                                                                                                                                                                              |
| Wasabi Wallet                                                                        | Открытый, некастодиальный, ориентированный на конфиденциальность биткойн-кошелек для настольных компьютеров, реализующий бездоверительный CoinJoin.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Кошелек только для просмотра                                                         | Биткойн-кошельки, которые позволяют отслеживать ваши биткойны в холодном хранении, при этом отключая возможность тратить средства. Это потому, что кошельки только для просмотра не хранят и не используют приватные ключи, и поэтому не могут авторизовать любые траты от имени пользователя.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Кит                                                                                  | В контексте Биткойна китом называют человека, который владеет большим количеством биткойнов.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| White-Label                                                                          | Продукт или услуга, произведенные одной компанией, которые другие компании перебрендируют, чтобы создать впечатление, будто они их создали.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Белая книга                                                                          | Представляет новую идею или тему для обсуждения. Белая книга Биткойна представила Биткойн как «систему электронных денег от одного участника к другому», которая «не требует доверенных третьих сторон». Сатоши Накамото опубликовал белую книгу 31 октября 2008 года и отправил ее на электронную почту списка криптографов и криптопанков.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Обернутый Segwit                                                                     | Реализация дизайна, включенная в обновление SegWit, предназначенная для упрощения поддержки SegWit кошельками и другим программным обеспечением для Биткойна. Для достижения этой цели два нативных скрипта SegWit, P2WPKH и P2WSH, используются в качестве «redeemScript» транзакции P2SH, что приводит к типам скриптов обернутого SegWit P2SH-P2WPKH и P2SH-P2WSH соответственно.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

![изображение](assets/en/129.webp)

