---
name: BitcoinとBTC Pay Server
goal: あなたのビジネスのためにBTC Pay Serverをインストールする
objectives:
  - btcpayserverが何であるかを理解する。
  - 自己ホストとBTC Pay Serverの設定を行う。
  - 日常業務でbtcpayserverを使用する。
---

# BitcoinとBTCPay Server

これは、AlekosとBasによって書かれ、melontwistとasi0によってPlanBコースフォーマットに適応されたBTCPay Serverオペレーターの導入コースです。

未完成の物語

「これは嘘だ、私のあなたへの信頼は破れた、私はあなたを時代遅れにするだろう」。

BTCPay Server Foundationによって制作されました

+++

# 導入

<partId>59e43fe3-b494-5da6-b4b4-9df5bdf08916</partId>

## 著者のBitcoinとBTCPay Serverに対する高い評価

<chapterId>e1fe6294-3c82-5203-9537-779f9087c35a</chapterId>

BTCPay Serverが何であり、どこから来たのかを始めに説明しましょう。私たちは、Bitcoinの分野で信頼を形成するために透明性と一定の基準を重視しています。
あるプロジェクトがこれらの価値を破った。BTCPay ServerのリードデベロッパーであるNicolas Dorierはこれを個人的に受け取り、彼らを時代遅れにすると約束しました。ここに多くの年月が経ち、完全にオープンソースで、毎日この未来に向かって作業しています。

> これは嘘だ、私のあなたへの信頼は破れた、私はあなたを時代遅れにするだろう。
> Nicolas Dorier

Nicolasの言葉の後、建設を始める時が来ました。今私たちがBTCPay Serverと呼んでいるものに多くの作業が投入されました。この推進力に協力したいと思う人がもっと増えました。最も認識されているのはr0ckstardev、MrKukks、Pavlenex、そしてソフトウェアを使用した最初の商人であるastupidmooseです。

オープンソースとは何か、そのようなプロジェクトには何が含まれているのか？

FOSSはFree & Open-Source Softwareの略です。前者は、誰でもソフトウェアのコピー、変更、さらには（利益を得るための）バージョンの配布を許可する条件を指します。後者は、ソースコードを公開し、公衆がそれに貢献し、改善することを奨励することを指します。
これにより、既に使用しているソフトウェアに価値を見出し、貢献したいと熱心なユーザーが集まり、時間が経つにつれて、独占ソフトウェアよりも採用が勝ることが証明されます。これは、「情報は自由であるべきだ」というBitcoinの理念と一致しています。情熱を持った人々がコミュニティを形成し、単純にもっと楽しいです。Bitcoinのように、FOSSは避けられないものです。

### 始める前に

このコースは複数のパートで構成されています。多くはあなたの教室の先生が担当し、アクセスできるデモ環境、自分用のホストされたサーバー、場合によってはドメイン名が提供されます。このコースを独立して完了する場合は、DEMOとラベル付けされた環境が利用できないことに注意してください。
NB. 教室でこのコースを受講する場合、サーバー名はあなたの教室の設定によって異なる可能性があります。このため、サーバー名の変数は異なる場合があります。

### コース構造

各章には目標と知識評価があります。このコースでは、これらの各項目をカバーし、各レッスンブロック（つまり章）での主要機能の要約を行います。図解は視覚的なフィードバックを提供し、視覚的な側面で主要な概念を強化するために特集されています。目標は各レッスンブロックの開始時に設定されます。これらの目標はチェックリストを超えています。これらは新しいスキルセットへのガイドを提供します。知識評価は、あなたのBTCPay Serverの設定の進行に伴って徐々に難しくなります。

### コースを受講する学生は何を受け取りますか？
BTCPay Serverコースでは、学生はビットコインの基本原則を技術的にも非技術的にも理解することができます。BTCPay Serverを通じたビットコインの広範なトレーニングにより、学生は自身のビットコインインフラを操作できるようになります。

### 重要なウェブアドレスまたは連絡先

このコースを書くことを許可したBTCPay Server Foundationは、日本の東京にあります。BTCPay Server Foundationには、以下のウェブサイトを通じて連絡することができます。

- https://foundation.btcpayserver.org
- 公式チャットチャンネルに参加する:https://chat.btcpayserver.org

## ビットコイン入門

<chapterId>5c0bc234-c188-5b4a-94d5-adee87a120e2</chapterId>

### 教室でのビットコイン理解

これは教室での演習なので、このコースを自分で受講する場合、実際には行うことができませんが、この演習を通じて学ぶことができます。このタスクを完了するためには、最低でも9人から11人の人数が必要です。

演習は、BBCによる「ビットコインとブロックチェーンの仕組み」の紹介を視聴した後に始まります。

![ビットコインとブロックチェーンの仕組み](https://youtu.be/mhE_vvwAiRc)

この演習には少なくとも9人の参加者が必要です。この演習は、ビットコインの仕組みを物理的に理解することを目的としています。ネットワーク内の各役割を演じることで、インタラクティブで楽しい方法で学習します。この演習はライトニングネットワークを含みません。

### 例；9 / 11人が必要

役割は以下の通りです:

- 1人の顧客
- 1人の商人
- 7から9人のビットコインノード

**セットアップは以下の通りです:**

顧客がビットコインで商品を購入します。

**シナリオ1 - 伝統的な銀行システム**

- セットアップ:
  - 添付のFigjamの図解/説明を参照 - [アクティビティスキーマ](https://www.figma.com/file/ckmvMq02Jm2MegSsVCDFhc/Day-1-Classroom-Activity?type=whiteboard&node-id=0-1&t=KR31ofMaJX6S95UL-0)。
  - 顧客（アリス）、商人（ボブ）、銀行の役割を演じるために、3人の学生ボランティアを選びます。
- 一連のイベントを演じる:
  - 顧客- オンラインで店を見て、$25の商品を見つけ、購入したいと商人に伝える
  - 商人- 支払いを求める。
  - 顧客- 商人にカード情報を送る
  - 商人- 銀行に情報を転送し（自身と顧客の身元/情報を特定して）、支払いを要求する
  - 銀行は顧客と商人（アリスとボブ）についての情報を収集し、顧客の残高が十分であるかを確認する。
  - アリスのアカウントから\$25を差し引き、ボブのアカウントに\$24を追加し、サービスのために\$1を取る
  - 商人は銀行からの承認を受け取り、商品を顧客に発送する。
- コメント:
  - ボブとアリスは銀行との関係を持っていなければならない。
  - 銀行はボブとアリスの両方についての識別情報を収集する。
  - 銀行は手数料を取る。
  - 銀行は常時、各参加者のお金の保管を信頼されなければならない。

**シナリオ2 - ビットコインシステム**

- セットアップ:
  - 添付のFigjamの図解/説明を参照 - [アクティビティスキーマ](https://www.figma.com/file/ckmvMq02Jm2MegSsVCDFhc/Day-1-Classroom-Activity?type=whiteboard&node-id=0-1&t=KR31ofMaJX6S95UL-0)。
- 銀行を9人の学生に置き換え、コンピュータ（ビットコインノード/マイナー）の役割をネットワーク内で演じさせます。これにより、銀行を置き換えます。
- 9台のコンピュータは、これまでに行われたすべての過去の取引の完全な履歴記録（したがって偽造なしの正確な残高）を持っており、ルールのセットも持っています:
  - トランザクションが適切に署名されていることを確認します（鍵が錠に合う）
  - ネットワーク内のピアに有効な取引をブロードキャストおよび受信し、無効なもの（同じ資金を2回使おうとするものを含む）を破棄します
- 「ランダム」なコンピュータから受け取った新しい取引で定期的に記録を更新/追加します。すべての内容が有効である場合のみ（注:今のところ、これに対するプルーフオブワークコンポーネントは無視しています。簡単のため）、そうでなければこれらを拒否し、次の「ランダム」なコンピュータが更新を送信するまで以前と同じように続けます
  - 内容が有効であれば適切な量が報酬として与えられました。
- 一連のイベントを演じます:
  - 顧客- オンラインで店を閲覧し、$25の商品を見つけて購入したいと商人に伝えます
  - 商人- 顧客に請求書/アドレスを送信して支払いを求めます。
  - 顧客- 取引を構築（$25相当のBTCを商人が提供したアドレスに送信）し、ビットコインネットワークにブロードキャストします。
- コンピュータ- 取引を受信し、確認します:
  - 送信元のアドレスに少なくとも$25のBTCがある
  - 取引が適切に署名されている（顧客によって「解除」される）
  - そうでない場合、取引はネットワークを通じて伝播されず、そうであれば伝播され、待機状態になります。
  - 商人は取引が保留中であることを確認できます。
- 1台のコンピュータが「ランダム」に選ばれ、それを含む「ブロック」をブロードキャストして提案された取引を最終化することを提案します。チェックが通れば、BTC報酬を受け取ります。
  - オプション/上級 - ランダムにコンピュータを選択する代わりに、コンピュータにサイコロを振らせ、ある事前に決定された結果が発生するまで続けることでマイニングをシミュレートします（例:最初にダブルシックスを振ったものが選ばれる）
  - 2台のコンピュータがほぼ同時に勝利した場合に何が起こるかも演じることができます。これによりチェーン分割が発生します。
  - コンピュータは有効性をチェックし、ルールが満たされていればレジャーに記録を更新/追加し、ピアにブロックをブロードキャストします。
  - ランダムに選ばれたコンピュータは有効なブロックを提案した報酬を受け取ります。
  - 商人は取引が最終化され、したがって資金が受け取られ、商品が顧客に送られたことを確認します。
- コメント:
  - 事前に存在する銀行関係の必要はありませんでした。
  - 第三者による仲介は必要なく、コード/インセンティブに置き換えられました。
  - 直接の交換以外の誰もによるデータ収集はなく、参加者間で交換される必要があるのは必要最小限の情報のみです（例:配送先住所）。
  - 人々の間に信頼は必要ありません（商人が商品を送る以外は）、多くの点で現金購入のようです。
  - お金は個人が直接所有しています。
  - 簡単のためにビットコイン台帳はドルで表されていますが、実際にはBTCです。
  - 私たちは単一の取引がブロードキャストされることをシミュレートしていますが、実際には複数の取引がネットワークで保留中であり、ブロックには一度に数千の取引が含まれます。ノードはまた、二重支払い取引が保留中でないことを確認します（その場合は1つを除くすべてを破棄します）。
- 不正行為のシナリオ:
  - 顧客が$25のBTCを持っていなかった場合はどうなりますか？
    - 「解除」と「所有」が同じであり、コンピュータが取引が適切に署名されているかをチェックするため、取引を作成することはできません。そうでなければ、それらは拒否されます。
- ランダムに選ばれたコンピュータが「元帳を変更」しようとした場合はどうなるでしょうか？
    - そのブロックは拒否されます。なぜなら、他のすべてのコンピュータには完全な履歴があり、変更を検出し、彼らのルールの一つに違反するからです。
    - ランダムコンピュータは報酬を得られず、そのブロックからのトランザクションは最終的に承認されません。

## 知識評価

<chapterId>1461f064-933d-50ea-8935-324b68ec5d5f</chapterId>

### KA クラスルームディスカッション

第二のシナリオでのクラスルーム演習で行われた過剰な単純化について議論し、実際のビットコインシステムがより詳細に何を行っているかを説明してください。

### KA ボキャブラリーレビュー

前のセクションで紹介された以下のキータームを定義してください:

- ノード
- メンプール
- 難易度ターゲット
- ブロック

**グループとして追加の用語の意味を議論する:**

ブロックチェーン、トランザクション、ダブルスペンド、ビザンチン将軍問題、マイニング、プルーフ・オブ・ワーク（PoW）、ハッシュ関数、ブロック報酬、ブロックチェーン、最長チェーン、51%攻撃、アウトプット、アウトプットロック、変更、サトシ、公開/秘密キー、アドレス、公開鍵暗号、デジタル署名、ウォレット

# BTCPayサーバーの紹介

<partId>9c8a2d0c-9ba1-5c39-874c-f9eaf1bba663</partId>

## BTCPayサーバーログイン画面の理解

<chapterId>14aad54c-9bd8-54f2-9455-178b8ae63408</chapterId>

### BTCPayサーバーの操作

このコースブロックの目的は、BTCPayサーバーソフトウェアの一般的な理解を得ることです。共有環境では、講師のデモンストレーションに従い、BTCPayサーバーコースブックに沿って進めることをお勧めします。ホットウォレットのセットアップやBTCPayサーバーボールトを介して接続されたハードウェアウォレットを通じてウォレットを作成する方法を学びます。これらの目的は、コース講師によって表示され、アクセスが提供されるデモ環境で行われます。

このコースを独学で進める場合は、デモ目的でのサードパーティホストのリストをhttps://directory.btcpayserver.org/filter/hostsで見つけることができます。これらのサードパーティオプションを本番環境として使用することは強くお勧めしませんが、ビットコインとBTCPayサーバーの使用を紹介するための適切な目的を果たします。

BTCPayサーバーロックスタートレーニーとして、ビットコインノードのセットアップ経験があるかもしれません。このコースは、BTCPayサーバーソフトウェアスタックに特化して話をします。

BTCPayサーバーに存在する多くのオプションは、他のビットコインウォレット関連ソフトウェアのいくつかの形で存在します。

### BTCPayサーバーログイン画面

デモ環境へようこそと言われた際には、「ログイン」または「アカウントを作成」するよう求められます。セキュリティ上の理由から、新しいアカウントの作成機能をサーバー管理者が無効にすることがあります。BTCPayサーバーはオープンソースソフトウェアであるため、BTCPayサーバーのロゴやボタンの色を変更することができます。サードパーティホストはソフトウェアをホワイトラベル化し、外観を完全に変更することができます。

![image](assets/en/0.webp)

### アカウント作成ウィンドウ

BTCPayサーバーでのアカウント作成には、有効なメールアドレス文字列が必要です。example@email.comはメールアドレスの有効な文字列となります。

パスワードは、文字、数字、記号を含む少なくとも8文字でなければなりません。パスワードを一度設定した後、最初のパスワードフィールドに入力されたものと正しいかを確認するために、入力したパスワードを確認する必要があります。
メールアドレスとパスワードのフィールドが適切に入力されたら、「Create Account」ボタンをクリックしてください。これにより、メールアドレスとパスワードが講師のBTCPayサーバーインスタンスに保存されます。
![image](assets/en/1.webp)

**！注意！**

このコースを独学で進める場合、アカウントの作成は第三者のホストで行うことになるかもしれません。そのため、これらを本番環境としてではなく、訓練目的でのみ使用することを再度強調します。

### BTCPayサーバー管理者によるアカウント作成

BTCPayサーバーインスタンスの管理者も、BTCPayサーバーのアカウントを作成することができます。BTCPayサーバーインスタンスの管理者は、「Server Settings」(1)をクリックし、「Users」タブ(2)を選択、そしてユーザータブの右上にある「+ Add User」ボタン(3)をクリックできます。目標(4.3)では、アカウントの管理者制御について詳しく学びます。

![image](assets/en/2.webp)

管理者としては、ユーザーのメールアドレスを必要とし、標準的なパスワードを設定します。セキュリティ上の理由から、アカウントを使用する前にこのパスワードを変更するようユーザーに通知することが推奨されます。管理者がパスワードを設定しない場合、サーバーにSMTPが設定されていると、ユーザーはアカウントを作成し、自分でパスワードを設定するための招待リンクが記載されたメールを受け取ります。

### 例

講師によるコースを受講する場合、講師が提供したリンクに従ってデモ環境でアカウントを作成してください。メールアドレスとパスワードは安全に保存しておく必要があります。このコースの残りのデモ目標にはこれらのログイン情報が必要です。

講師が前もってメールアドレスを収集し、この演習前に招待リンクを送信している場合があります。指示された場合は、メールを確認してください。

講師なしでコースを受講する場合は、BTCPayサーバーのデモ環境を使用してアカウントを作成してください。以下にアクセスしてください。

https://mainnet.demo.btcpayserver.org/login.

このアカウントはデモンストレーション/訓練目的でのみ使用し、ビジネス用途には使用しないでください。

### スキルサマリー

このセクションでは、以下を学びました:

- ホストされたサーバー上でインターフェースを通じてアカウントを作成する方法。
- サーバー管理者がサーバー設定で手動でユーザーを追加する方法。

### 知識評価

#### KA 概念レビュー

デモサーバーを本番目的で使用することが悪いアイデアである理由を挙げてください。

## ユーザーアカウントの管理

<chapterId>b58ca6ee-b7fc-5e81-a6aa-c8ff212b4c55</chapterId>

### BTCPayサーバーでのアカウント管理

店舗オーナーがアカウントを作成した後、BTCPayサーバーUIの左下で管理することができます。アカウントボタンの下には、複数の上位レベルの設定があります。

- ダーク/ライトモード。
- 機密情報を隠すトグル。
- アカウント管理。

![image](assets/en/3.webp)

### ダークとライトモード

BTCPayサーバーのユーザーは、UIのライトまたはダークモードバージョンを選択できます。顧客向けページは変更されません。これらは顧客が好むダークまたはライトモードの設定を使用します。

### 機密情報を隠すトグル

機密情報を隠すボタンは、簡単で迅速なセキュリティレイヤーを提供します。公共の場で肩越しに人が覗き見る可能性がある場合にBTCPayサーバーを操作する必要があるときは、機密情報を隠すをオンにして、BTCPayサーバー内のすべての値を隠します。誰かが肩越しに見ることはできるかもしれませんが、取り扱っている値を見ることはできなくなります。

### アカウント管理

ユーザーアカウントが作成されたら、ここでパスワード、2FA、またはAPIキーを管理します。
### アカウント管理 - アカウント
オプションで、異なるメールアドレスでアカウントを更新できます。メールアドレスが正しいことを確認するために、BTCPayサーバーでは確認メールを送信することができます。新しいメールアドレスを設定し、確認が完了したとユーザーが確認した場合は保存をクリックしてください。ユーザー名は以前のメールアドレスと同じままです。

ユーザーは自分のアカウントを完全に削除することを決めるかもしれません。これは、アカウントタブで削除ボタンをクリックすることで行えます。

![image](assets/en/4.webp)

**！注意！**

メールアドレスを変更した後も、アカウントのユーザー名は変わりません。以前に指定されたメールアドレスがログイン名として残ります。

### アカウント管理 - パスワード

学生がパスワードを変更したい場合があります。これは、パスワードタブに移動して行うことができます。ここでは、古いパスワードを入力し、新しいものに変更することが求められます。

![image](assets/en/5.webp)

### 二要素認証 (2FA)

パスワードが盗まれた場合の影響を限定するために、二要素認証（2FA）を使用できます。これは比較的新しいセキュリティ方法です。アカウント管理と二要素認証のタブから二要素認証を有効にすることができます。ユーザー名とパスワードでログインした後、第二のステップを完了する必要があります。

BTCPayサーバーでは、2FAを有効にするための2つの方法、アプリベースの2FA（Authy、Google、Microsoft認証器）またはセキュリティデバイス（FIDO2またはLNURL Auth）を提供しています。

### 二要素認証 - アプリベース

モバイル電話のオペレーティングシステム（AndroidまたはiOS）に基づいて、ユーザーは以下のアプリから選択できます。

1. 二要素認証アプリをダウンロードします。
   - [Android](https://play.google.com/store/apps/details?id=com.authy.authy)または[iOS](https://apps.apple.com/us/app/authy/id494168017)用のAuthy
   - [Android](https://play.google.com/store/apps/details?id=com.azure.authenticator)または[iOS](https://apps.apple.com/us/app/microsoft-authenticator/id983156458)用のMicrosoft Authenticator
   - [Android](https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=e%C2%80)または[iOS](https://apps.apple.com/us/app/google-authenticator/id388497605)用のGoogle Authenticator
2. 認証アプリをダウンロードしてインストールした後。
   - BTCPayサーバーが提供するQRコードをスキャンします
   - または、BTCPayサーバーによって生成されたキーを手動で認証アプリに入力します。
3. 認証アプリはユニークなコードを提供します。BTCPayサーバーにそのユニークなコードを入力してセットアップを確認し、確認をクリックしてプロセスを完了します。

![image](assets/en/6.webp)

### スキルサマリー

このセクションでは、以下を学びました:

- BTCPayサーバーインスタンス上でのアカウント管理オプションと、アカウントを管理するさまざまな方法。
- アプリベースの2FAの設定方法。

### 知識評価

#### KA概念レビュー

アプリベースの2FAがどのようにしてアカウントを保護するのか説明してください。

## 新しいストアの作成

<chapterId>463b3634-b49f-5512-a711-3b2e096fc2e0</chapterId>

### ストア作成ウィザード
新しいユーザーがBTCPayサーバーにログインすると、環境は空であり、最初のストアが必要です。BTCPayサーバーの導入ウィザードはユーザーに「ストアを作成する」(1)オプションを提供します。ストアは、Bitcoinのニーズのためのホームと見なすことができます。新しいBTCPayサーバーノードは、Bitcoinブロックチェーンの同期から始まります(2)。BTCPayサーバーを実行するインフラストラクチャによって、これは数時間から数日かかることがあります。インスタンスの現在のバージョンは、BTCPayサーバーUIの右下隅に表示されます。これは、トラブルシューティング時に参照するのに便利です。
![image](assets/en/7.webp)

### ストア作成ウィザード

このコースを進むと、前のページとは少し異なる画面から始まります。講師がデモ環境を準備しているため、Bitcoinブロックチェーンは事前に同期されており、そのためノードの同期状態は表示されません。

ユーザーは自分のアカウント全体を削除することを決めるかもしれません。これは、アカウントタブの削除ボタンをクリックすることで行うことができます。

![image](assets/en/8.webp)

**！注意！**

BTCPayサーバーアカウントは無制限のストアを作成することができます。各ストアはウォレットまたは「ホーム」です。

### 例

「ストアを作成する」をクリックして始めます。

![image](assets/en/9.webp)

これにより、BTCPayサーバーを使用するための最初のホームとダッシュボードが作成されます。

(1) 「ストアを作成する」をクリックした後、BTCPayサーバーはストアの名前を要求します。これはあなたにとって有用なものであれば何でも構いません。

![image](assets/en/10.webp)

(2) 次に、デフォルトのストア通貨を設定する必要があります。これは、フィアット通貨またはBitcoin / Sats基準で表示されます。デモ環境では、これをUSDに設定します。

![image](assets/en/11.webp)

(3) ストア設定の最後のパラメータとして、BTCPayサーバーは「優先価格ソース」を設定して、Bitcoinの価格を現在のフィアット価格と比較し、ストアが設定したフィアット通貨とBitcoinの間の正しい為替レートを表示するよう要求します。デモ例ではデフォルトに従い、これをKraken取引所に設定します。BTCPayサーバーはKraken APIを使用して為替レートをチェックします。

![image](assets/en/12.webp)

(4) これらのストアパラメータが設定されたら、作成ボタンをクリックし、BTCPayサーバーはあなたの最初のストアのダッシュボードを作成し、ウィザードはそこで続きます。

![image](assets/en/13.webp)

おめでとうございます、あなたは最初のストアを作成しました、そしてこれでこの演習は終了です。

![image](assets/en/14.webp)

### スキルサマリー

このセクションでは、以下を学びました:

- ストアの作成と、価格ソースの好みと組み合わせたデフォルト通貨の設定。
- 各「ストア」は、このBTCPayサーバーのインストール上の他のストアから分離された新しいホームです。

# Bitcoinキーのセキュリティについての紹介

<partId>25da22d8-fd37-51c5-af2a-58b9f3b046b2</partId>

## Bitcoinキー生成の理解

<chapterId>d162735b-847b-578e-83b8-a044ab703ec5</chapterId>

### Bitcoinキーを生成することに何が関わっていますか？

Bitcoinウォレットを作成すると、いわゆる「シード」が生成されます。最後の目標で、「シード」を作成しました。以前に生成された一連の言葉もニーモニックフレーズとして知られています。シードは、個々のBitcoinキーを導出するために使用され、Bitcoinを送受信するために使用されます。シードフレーズは、第三者や信頼できないピアと共有してはいけません。
種の生成は、"Hierarchical Deterministic" (HD) フレームワークとして知られる業界標準に沿って行われます。
![image](assets/en/15.webp)

### アドレス

BTCPay Serverは、新しいアドレスを生成するように構築されています。これにより、公開鍵またはアドレスの再利用の問題が軽減されます。同じ公開鍵を使用すると、支払い履歴全体を非常に簡単に追跡できます。鍵を一回限りの使用券と考えると、プライバシーが大幅に向上します。また、Bitcoinアドレスも使用していますが、これを公開鍵と混同しないでください。

アドレスは、「ハッシュアルゴリズム」を通じて公開鍵から派生します。しかし、ほとんどのウォレットや取引では、公開鍵ではなくアドレスが表示されます。一般的に、アドレスは公開鍵よりも短く、通常は `1`、`3`、または `bc1` で始まりますが、公開鍵は `02`、`03`、または `04` で始まります。

- `1.....` で始まるアドレスは、今でも非常に一般的なアドレスです。新しいストアを作成する章で述べたように、これらはレガシーアドレスです。このアドレスタイプは、P2PKHトランザクション用です。P2PkhはBase58エンコーディングを使用し、アドレスは大文字と小文字を区別します。その構造は公開鍵に基づいており、識別子として追加の1桁があります。

- `bc1...` で始まるアドレスは、徐々に非常に一般的なアドレスに移行しています。これらは（ネイティブ）SegWitアドレスとして知られています。これらは、他の述べたアドレスよりも優れた料金構造を提供します。ネイティブSegWitアドレスはBech32エンコーディングを使用し、小文字のみを許可します。

- `3...` で始まるアドレスは、入金アドレスとして取引所によって一般的に使用されています。これらのアドレスは、新しいストアを作成する章で述べたように、ラップされたまたはネストされたSegWitアドレスです。しかし、これらは「マルチシグアドレス」としても機能する可能性があります。SegWitアドレスとして使用される場合、再びトランザクション手数料の節約がありますが、ネイティブSegWitほどではありません。P2SHアドレスはBase58エンコーディングを使用します。これにより、レガシーアドレスと同様に、大文字と小文字を区別します。

- `2...` で始まるアドレスはテストネットアドレスです。これらはテストネットビットコイン（tBTC）を受け取るためのものです。これらのアドレスにビットコインを送ることがないように注意してください。開発目的で、テストネットウォレットを生成することができます。テストネットビットコインを入手するための複数のフォーセットがオンラインで利用可能です。テストネットビットコインを購入しないでください。テストネットビットコインはマイニングされます。これは、開発者がRegtestを使用する理由かもしれません。これは、特定のネットワークコンポーネントが欠けている開発者向けのプレイグラウンド環境です。しかし、開発目的でビットコインは非常に有用です。

### 公開鍵

公開鍵は、今日では実際にはあまり使用されません。時間が経つにつれて、ビットコインユーザーはそれらをアドレスに置き換えてきました。それでも、公開鍵は存在し、時々使用されます。一般的に、公開鍵はアドレスよりもはるかに長い文字列です。アドレスと同様に、特定の識別子で始まります。

- 最初に、`02...` と `03...` は、SEC形式でエンコードされた非常に標準的な公開鍵識別子です。これらは処理され、受信用のアドレスに変換されたり、マルチシグアドレスを作成するために使用されたり、署名を検証するために使用されます。初期のビットコイン取引では、P2PKトランザクションの一部として公開鍵が使用されました。

- しかし、HDウォレットは異なる構造を使用します。`xpub...`、`ypub...` または `zpub...` は、拡張公開鍵、通称xpubsと呼ばれます。これらの鍵は、HDウォレットの一部として多くの公開鍵を導出するために使用されます。xpubは過去と未来の取引の記録を保持しているため、信頼できない第三者とこれらを共有しないでください。

### スキルサマリー

このセクションでは、以下を学びました:
- アドレスと公開鍵データタイプの違いと、公開鍵よりもアドレスを使用する利点。
### 知識評価

各トランザクションに新しいアドレスを使用する利点と、アドレスの再利用や公開鍵メソッドと比較した場合の説明

## ハードウェアウォレットによる鍵の保護

<chapterId>c54a6d61-5a43-5fdb-93ae-c6750de9c612</chapterId>

### ビットコインキーの保存

シードフレーズを生成した後、この本で生成される12〜24の単語のリストは適切なバックアップとセキュリティが必要です。これらの単語はウォレットへのアクセスを回復する唯一の方法だからです。HDウォレットの構造と、その一つのシードを使用してアドレスを決定的に生成する方法について、作成したすべてのアドレスは、シードまたはリカバリーフレーズを表すニーモニックワードのこの一つのリストを使用してバックアップされます。

リカバリーフレーズを安全に保管してください。悪意のある意図を持つ人にアクセスされた場合、資金を移動される可能性があります。シードを安全に保管しつつ覚えておくことは相互に関連しています。ビットコインのプライベートキーを保存する方法はいくつかあり、セキュリティ、プライバシー、利便性、物理的手段の面でそれぞれ利点と欠点があります。プライベートキーの重要性のため、ビットコインユーザーは銀行のような「カストディアル」サービスを使用するよりも、「自己保管」でこれらのキーを保存し、安全に保管する傾向があります。ユーザーによっては、コールドストレージソリューションまたはホットウォレットのいずれかを使用する必要があります。

### ビットコインキーのホットとコールドの保管

通常、ビットコインウォレットはホットウォレットまたはコールドウォレットとして区別されます。ほとんどのトレードオフは、利便性、使いやすさ、およびセキュリティリスクにあります。これらの方法は、カストディアンソリューションでも見られます。ただし、ここでのトレードオフは主にセキュリティとプライバシーに基づいており、このコースの範囲を超えています。

### ホットウォレット

ホットウォレットは、モバイル、ウェブ、またはデスクトップソフトウェアを通じてビットコインとやり取りする最も便利な方法です。ウォレットは常にインターネットに接続されており、ユーザーはビットコインを送受信できます。しかし、これはまたその弱点でもあり、常にオンラインであるウォレットは、デバイスのハッカーやマルウェアによる攻撃により脆弱になります。BTCPay Serverでは、ホットウォレットはインスタンス上にプライベートキーを保存します。悪意のある場合、BTCPay Serverストアにアクセスする人はこのアドレスから資金を盗むことができます。BTCPay Serverがホスト環境で実行される場合、セキュリティプロファイルでこれを常に考慮し、そのような場合にはホットウォレットを使用しないことが好ましいです。BTCPay Serverが所有するハードウェアにインストールされ、あなたによって安全で信頼されている場合、リスクプロファイルは大幅に低下しますが、決して消えることはありません！

### コールドウォレット

個人は、プライベートキーをインターネットから隔離できるため、ビットコインをコールドウォレットに移動します。インターネット接続を方程式から取り除くことで、マルウェア、スパイウェア、SIMスワップのリスクを減らします。適切な予防措置を講じる限り、セキュリティと自律性の面でコールドストレージはホットストレージよりも優れていると考えられています。コールドストレージは、ウォレットの設定の複雑さのため、頻繁に使用されることがない大量のビットコインに最も適しています。

コールドストレージでビットコインキーを保存する方法には、紙のウォレットから脳のウォレット、ハードウェアウォレット、または最初からのウォレットファイルまで、さまざまな方法があります。ほとんどのウォレットはBIP 39を使用してシードフレーズを生成します。ただし、Bitcoin Coreソフトウェア内では、それを使用することについてまだ合意に達していません。Bitcoin Coreソフトウェアは依然として、安全なオフラインの場所に保存する必要があるWallet.datファイルを生成します。

### スキルサマリー

このセクションでは、以下を学びました:

- 機能性とトレードオフの点でのホットウォレットとコールドウォレットの違い。

### 知識評価 概念レビュー
- ウォレットとは何ですか？
- ホットウォレットとコールドウォレットの違いは何ですか？

- 「ウォレットの生成」とはどういう意味ですか？

## あなたのBitcoinキーを使用する

<chapterId>bff488de-5052-56e6-b696-97e896f762ae</chapterId>

### BTCPayサーバーウォレット

BTCPayサーバーは、以下の標準的なウォレット機能を含んでいます:

- トランザクション
- 送金
- 受取
- 再スキャン
- プルペイメント
- 支払い
- PSBT
- 一般設定

### トランザクション

管理者は、この特定のストアに接続されたオンチェーンウォレットの入出金トランザクションをトランザクションビューで確認できます。各トランザクションは、受け取ったものと送ったものとで区別されます。受け取ったトランザクションは緑色で、送金トランザクションは赤色になります。BTCPayサーバーのトランザクションビュー内では、管理者は標準的なラベルのセットも確認できます。

| トランザクションタイプ | 説明                                          |
| ---------------- | ---------------------------------------------------- |
| App              | アプリ作成の請求書を通じて支払いが受け取られました  |
| invoice          | 請求書を通じて支払いが受け取られました              |
| payjoin          | 支払いされておらず、請求書のタイマーはまだ期限切れではありません        |
| payjoin-exposed  | 請求書のpayjoin提案を通じてUTXOが露出しました |
| payment-request  | 支払い要求を通じて支払いが受け取られました       |
| payout           | 支払いが払い戻しまたは支払いを通じて送金されました          |

### 送金方法

BTCPayサーバーの送金機能は、BTCPayサーバーのオンチェーンウォレットからトランザクションを送信します。BTCPayサーバーは、資金を使うためのトランザクションを署名するための複数の方法を提供します。トランザクションは以下の方法で署名できます；

- ハードウェアウォレット
- PSBTをサポートするウォレット
- HDプライベートキーまたはリカバリーシード
- ホットウォレット

#### ハードウェアウォレット

BTCPayサーバーは組み込みのハードウェアウォレットサポートを提供し、BTCPay Vaultを使用して第三者のアプリやサーバーに情報を漏らすことなくハードウェアウォレットを使用できます。BTCPayサーバー内のハードウェアウォレット統合により、ハードウェアウォレットをインポートし、デバイス上での簡単な確認で受け取った資金を使うことができます。プライベートキーはデバイスを離れることはなく、すべての資金はフルノードに対して検証されるため、データ漏洩はありません。

#### PSBTをサポートするウォレットでの署名

PSBT（Partially Signed Bitcoin Transactions、部分的に署名されたビットコイントランザクション）は、まだ完全に署名されていないビットコイントランザクションのための交換フォーマットです。PSBTはBTCPayサーバーでサポートされており、互換性のあるハードウェアおよびソフトウェアウォレットで署名できます。

完全に署名されたビットコイントランザクションの構築は、以下のステップを経ます:

- 特定の入力と出力を持つが署名のないPSBTが構築されます
- エクスポートされたPSBTは、このフォーマットをサポートするウォレットによってインポートされます
- トランザクションデータはウォレットを使用して検査および署名されます
- 署名されたPSBTファイルはウォレットからエクスポートされ、BTCPayサーバーでインポートされます
- BTCPayサーバーは最終的なビットコイントランザクションを生成します
- 結果を検証し、ネットワークにブロードキャストします

#### HDプライベートキーまたはニーモニックシードでの署名

以前にBTCPayサーバーを使用してウォレットを作成した場合、適切なフィールドにプライベートキーを入力することで資金を使うことができます。ウォレット>設定で適切な「AccountKeyPath」を設定しないと、支出ができません。

#### ホットウォレットでの署名

ストアを設定する際に新しいウォレットを作成し、それをホットウォレットとして有効にした場合、サーバーに保存されたシードを自動的に使用して署名します。

### RBF（Replace-By-Fee）
Replace-By-Fee（RBF）は、以前にブロードキャストされたトランザクション（まだ未確認の場合）を置き換えることができるBitcoinプロトコルの機能です。これにより、ウォレットのトランザクションフィンガープリントをランダム化するか、より高い手数料率で置き換えて、確認（マイニング）優先順位のキューでトランザクションを上位に移動させることができます。これにより、より高い手数料率が優先されるため、元のトランザクションは効果的に置き換えられ、一度確認されると、元のトランザクションは無効になります（ダブルスペンドはありません）。
「Advanced Settings」ボタンを押して、RBFオプションを表示します。

![image](assets/en/16.webp)

- より高いプライバシーのためにランダム化、トランザクションフィンガープリントのランダム化のために自動的にトランザクションを置き換えることを許可します。
- はい、RBFのためにトランザクションをフラグして明示的に置き換える（デフォルトでは置き換えられず、入力によってのみ置き換えられます）
- いいえ、トランザクションの置き換えを許可しない。

### コイン選択

コイン選択は、トランザクションを作成する際に使用したいコインを選択できる高度なプライバシー強化機能です。例えば、コンジョインミックスから新たに得たコインで支払う場合などです。

コイン選択は、ウォレットラベル機能とネイティブに連携します。これにより、UTXO管理と支出をスムーズにするために、受け取った資金にラベルを付けることができます。

BTCpay Serverは、ラベル管理のためにBIP-329もサポートしています。BIP-329は、特定のBIPをサポートしているウォレットから転送し、ラベルを設定した場合、BTCPay Serverがこれらを認識してインポートすることを可能にします。サーバーを移行する際には、この情報もエクスポートして新しい環境にインポートすることができます。

### 受け取り方

BTCPay Serverの受け取りボタンをクリックすると、支払いを受け取るために使用できる未使用のアドレスが生成されます。管理者は、「Invoice」を生成することによって新しいアドレスも生成できます。

BTCPay Serverは常に、アドレスの再利用を避けるために次に利用可能なアドレスを生成するように求めます。 「Generate next available BTC Address」をクリックした後、BTCPay Serverは新しいアドレスとQRを生成しました。また、アドレスの管理をより良くするために、直接ラベルを設定することもできます。

![image](assets/en/17.webp)

![image](assets/en/18.webp)

#### 再スキャン

Rescan機能は、Bitcoin Core 0.17.0の「Scantxoutset」に依存して、ブロックチェーンの現在の状態（UTXOセットと呼ばれる）をスキャンし、設定された導出スキームに属するコインを探します。ウォレットの再スキャンは、BTCPay Serverユーザーが経験する2つの問題を解決します。

1. ギャップリミット問題 - 多くのユーザー間でノードを共有するサードパーティのウォレットは、軽量ウォレットです。軽量およびフルノード依存のウォレットは、パフォーマンスの問題を防ぐために、ブロックチェーン上で追跡する残高のないアドレスの数（通常は20）を制限します。BTCPay Serverは、各インボイスに対して新しいアドレスを生成します。これを踏まえると、BTCPay Serverが連続して20の未払いインボイスを生成した後、外部ウォレットは新しいトランザクションが発生していないと仮定してトランザクションのフェッチを停止し、21番目、22番目などのインボイスが支払われた場合でも、外部ウォレットはそれらを表示しません。一方で、BTCPay Serverのウォレットは、生成した任意のアドレスとはるかに大きなギャップリミットを追跡し、サードパーティに依存せず、常に正確な残高を表示することができます。
2. ギャップリミットの解決策 - あなたの[外部/既存のウォレット](https://docs.btcpayserver.org/WalletSetup/#use-an-existing-wallet)がギャップリミットの設定を許可している場合、簡単な修正方法はそれを増やすことです。しかし、ほとんどのウォレットはこれを許可していません。私たちが知っているギャップリミットの設定を許可する唯一のウォレットはElectrum、Wasabi、そしてSparrow Walletです。残念ながら、他の多くのウォレットで問題に遭遇する可能性が高いです。最高のユーザーエクスペリエンスとプライバシーのために、外部ウォレットの使用をやめ、BTCPay Server内蔵ウォレットの使用を検討してください。
#### BTCPay Serverは「mempoolfullrbf=1」を使用します

BTCPay Serverは「mempoolfullrbf=1」を使用します。これをあなたのBTCPay Serverセットアップにデフォルトで追加しました。しかし、自分で無効にできるフラグメントも作成しました。「mempoolfullrbf=1」がない場合、顧客がRBFを示さないトランザクションで支払いを二重に支払った場合、商人は確認後にのみ知ることになります。

管理者はこの設定をオプトアウトしたいかもしれません。以下の文字列で、設定されたデフォルトを変更できます。

```
BTCPAYGEN_EXCLUDE_FRAGMENTS="$BTCPAYGEN_EXCLUDE_FRAGMENTS;opt-mempoolfullrbf"
. btcpay-setup.sh -i**
```

### BTCPay Serverウォレット設定

BTCPay Server内のウォレット設定は、ウォレットの一般的な設定の明確で迅速な概要を提供します。これらの設定は、ウォレットがBTCPay Serverで作成された場合には事前に設定されています。

![image](assets/en/19.webp)

BTCPay Server内のウォレット設定は、ウォレットの一般的な設定の明確で迅速な概要を提供します。これらの設定は、ウォレットがBTCPay Serverで作成された場合には事前に設定されています。BTCPay Serverのウォレット設定は、ウォレットのステータスから始まります。それはWatch-onlyウォレットですか、それともHotウォレットですか？ウォレットのタイプによって、行動は失われたトランザクションのためのウォレットの再スキャン、古いトランザクションの履歴からの剪定、支払いリンクのためのウォレットの登録、またはストアに添付された現在のウォレットの置換や削除から変わるかもしれません。BTCPay Serverのウォレット設定では、管理者はより良いウォレット管理のためにウォレットにラベルを設定できます。ここで、管理者はまた、Derivation Scheme、アカウントキー（xpub）、Fingerprint、およびKeypathを確認できます。ウォレット設定内の支払いには、主に2つの設定があります。請求書の有効期限後に（設定された分で）トランザクションが確認されない場合、支払いは無効とみなされます。支払いトランザクションがX回の確認を受けたときに請求書を確認済みとみなします。管理者は、支払い時に推奨される手数料を表示するトグルを設定するか、ブロック数で手動の確認ターゲットを設定することもできます。

![image](assets/en/20.webp)

**！注意！**

このコースを独学で進める場合、このアカウントの作成は第三者のホストで行うことになるかもしれませんが、再度申し上げますが、これらを本番環境として使用することはなく、訓練目的でのみ使用してください。

### 例

#### BTCPay Serverでビットコインウォレットを設定する

BTCPay Serverでは、ウォレットの設定に二つの方法があります。一つは、既に存在するビットコインウォレットをインポートする方法です。インポートは、ハードウェアウォレットを接続する、ウォレットファイルをインポートする、拡張公開キーを入力する、ウォレットのQRコードをスキャンする、または最も好ましくないが、以前に作成されたウォレット復旧シードを手で入力することによって行うことができます。BTCPay Serverでは、新しいウォレットを作成することも可能です。新しいウォレットを生成する際のBTCPay Serverの設定には、二つの可能な方法があります。
BTCPay Serverのホットウォレットオプションは、「Payjoin」や「Liquid」のような機能を可能にします。しかし、このウォレットのために生成されたリカバリーシードはサーバー上に保存されるため、管理者権限を持つ人がリカバリーシードを取得できるというデメリットがあります。プライベートキーはリカバリーシードから派生しているため、悪意のある者が現在および将来の資金にアクセスできる可能性があります！

BTCPay Serverでこのようなリスクを軽減するために、管理者はServer Settings > Policies > 「Allow non-admins to create hot wallets for their stores」をデフォルトの「no」に設定できます。これらのホットウォレットのセキュリティを強化するために、サーバー管理者はホットウォレットを持つことが許可されたアカウントに2FA認証を有効にするべきです。公開サーバー上にプライベートキーを保存することは危険であり、リスクを伴います。その一部はLightning Networkのリスクに似ています（Lightning Networkのリスクについては次の章を参照してください）。

BTCPay Serverが新しいウォレットを生成するために提供する2番目のオプションは、Watch-Onlyウォレットを作成することです。BTCPay Serverは一度だけあなたのプライベートキーを生成します。ユーザーがシードフレーズを書き留めたことを確認した後、BTCPay Serverはサーバーからプライベートキーを削除します。その結果、あなたのストアはWatch-Onlyウォレットを接続された状態になります。Watch-Onlyウォレットで受け取った資金を使うには、「How to Send」の章を参照してください。これには、BTCPay Server Vault、PSBT（部分的に署名されたビットコイントランザクション）、または、最も推奨されない方法ですが、手動でシードフレーズを提供する方法があります。

前の部分で新しい「Store」を作成しました。インストールウィザードは、「Set up a wallet」または「Set up a Lightning node」を設定するように求めて続行します。この例では、「Set up a wallet」ウィザードプロセスに従います（1）。

![image](assets/en/21.webp)

「Set up a wallet」をクリックすると、ウィザードはどのように進めたいかを尋ねて続行します。BTCPay Serverは現在、既存のBitcoinウォレットを新しいストアに接続するオプションを提供しています。ウォレットを持っていない場合、BTCPay Serverは新しいものを作成することを提案します。この例では、「create a new wallet」の手順に従います（2）。既存のウォレットを接続する方法を学ぶには、手順に従ってください。

![image](assets/en/22.webp)

**!注意!**

このコースを教室で受講する場合、現在の例と生成されたシードは教育目的のみのものです。これらのアドレスには、演習を通じて必要とされる金額以外に、大量のものを決して置いてはいけません。

(1) 「Create a new wallet」ボタンをクリックして、「New wallet」ウィザードを続けます。

![image](assets/en/23.webp)

(2) 「Create a new wallet」をクリックした後、ウィザードの次のウィンドウでは、「Hot wallet」と「Watch-only wallet」のオプションが表示されます。講師と一緒に進める場合、あなたの環境は共有のデモであり、Watch-onlyウォレットのみを作成できます。以下の図で両方の違いに注意してください。講師と一緒にデモ環境で進める場合は、「Watch-only wallet」を作成し、「New Wallet」ウィザードを続けます。

![image](assets/en/24.webp)

![image](assets/en/25.webp)

(3) 新しいウォレットウィザードを続けると、今度はBTC Watch-onlyウォレットセクションになります。ここではウォレットの「Address type」を設定します。BTCPay Serverでは、好みのアドレスタイプを選択できますが、このコースの執筆時点では、bech32アドレスの使用が依然として推奨されています。このパートの最初の章でアドレスについて詳しく学びましょう。

- Segwit (bech32)
- Native SegWitは`bc1q`で始まるアドレスです。
  - 例:`bc1qXXXXXXXXXXXXXXXXXXXXXX`
- レガシー
  - レガシーアドレスは数字の`1`で始まるアドレスです。
  - 例:`15e15hXXXXXXXXXXXXXXXXXXXX`
- Taproot（上級ユーザー向け）
  - Taprootアドレスは`bc1p`で始まります。
  - 例:`bc1pXXXXXXXXXXXXXXXXXXXXXXXX`
- Segwit wrapped
  - Segwit wrappedアドレスは`3`で始まります。
  - 例:`37BBXXXXXXXXXXXXXXX`

segwit（推奨）を好みのウォレットアドレスタイプとして選択してください。

![画像](assets/en/26.webp)

(4) ウォレットのパラメータを設定する際、BTCPay ServerではユーザーがBIP39を通じてオプションのパスフレーズを設定することができます。パスワードを確認することを忘れないでください。

![画像](assets/en/27.webp)

(5) ウォレットのアドレスタイプを設定し、必要に応じていくつかの高度なオプションを設定した後、[Create]をクリックすると、BTCPay Serverが新しいウォレットを生成します。これはシードフレーズを生成する前の最後のステップです。画面を見ている人にシードフレーズを盗まれないような環境でのみこれを行ってください。

![画像](assets/en/28.webp)

(6) ウィザードの次の画面では、BTCPay Serverは新しく生成されたウォレットのリカバリーシードフレーズを表示します。これらはウォレットの回復とトランザクションの署名に必要なキーです。BTCPay Serverは12語のシードフレーズを生成します。これらの言葉は、この設定画面の後にサーバーから消去されます。このウォレットは特にウォッチオンリーウォレットです。このシードフレーズをデジタルや写真画像で保存しないことをお勧めします。ユーザーは、シードフレーズを書き留めたことを積極的に認識している場合にのみ、ウィザードでさらに進むことができます。

![画像](assets/en/29.webp)

(7) [Done]をクリックして新しく生成されたビットコインのシードフレーズを確保した後、BTCPay Serverは新しいウォレットを添付してストアを更新し、支払いを受け取る準備ができます。ユーザーインターフェースの左側のナビゲーションメニューで、ビットコインがハイライト表示され、ウォレットの下でアクティブ化されていることに注意してください。

![画像](assets/en/30.webp)

### 例:シードフレーズの書き留め

これはビットコインを使用する非常に特別で安全な瞬間です。前述の通り、シードフレーズについてはあなただけがアクセスまたは知識を持つべきです。講師と教室に従って進む場合、生成されたシードはこのコースでのみ使用されるべきです。クラスメートからの視線、安全でないシステムなど、多くの要因がこれらのキーを教育用で信頼できないものにします。しかし、生成されたキーはコースの例のためにまだ保存されるべきです。

現在の状況で使用する最初の方法であり、最も安全でない方法は、シードフレーズを正しい順序で書き留めることです。シードフレーズカードは、学生に提供されるコース資料に含まれているか、BTCPay ServerのGitHubで見つかります。このカードを使用して、前のステップで生成された単語を書き留めます。正しい順序で書き留めるようにしてください。書き留めた後、ソフトウェアによって与えられたものと照らし合わせて、正しい順序で書き留めたことを確認してください。書き留めた後、シードフレーズを適切に書き留めたことを示すチェックボックスをクリックしてください。

### 例:ハードウェアウォレットにシードフレーズを保存する

このコースでは、ハードウェアウォレットにシードフレーズを保存することに触れます。このコースを講師に従って進める場合、そのようなデバイスが常に含まれるわけではありません。コースのガイド資料には、この演習に適したハードウェアウォレットのリストが書かれています。
この例では、BTCPay Server vaultとBlockstream Jadeハードウェアウォレットを使用します。
ハードウェアウォレットの接続方法については、ビデオを参照しながら進めることもできます。
![BTCPay Server - BTCPay Vaultでハードウェアウォレットを接続する方法](https://youtu.be/s4qbGxef43A)

BTCPay Server Vaultをダウンロード:https://github.com/btcpayserver/BTCPayServer.Vault/releases

システムに適したファイルをダウンロードしてください。Windowsユーザーは[BTCPayServerVault-2.0.5-setup.exe](https://github.com/btcpayserver/BTCPayServer.Vault/releases/download/Vault%2Fv2.0.5/BTCPayServerVault-2.0.5-setup.exe)パッケージを、Macユーザーは[BTCPayServerVault-osx-x64-2.0.5.dmg](https://github.com/btcpayserver/BTCPayServer.Vault/releases/download/Vault%2Fv2.0.5/BTCPayServerVault-osx-x64-2.0.5.dmg)を、Linuxユーザーは[BTCPayServerVault-Linux-2.0.5.tar.gz](https://github.com/btcpayserver/BTCPayServer.Vault/releases/download/Vault%2Fv2.0.5/BTCPayServerVault-Linux-2.0.5.tar.gz)をダウンロードしてください。

BTCPay Server Vaultをインストールした後、デスクトップのアイコンをクリックしてソフトウェアを起動します。BTCPay Server Vaultが正しくインストールされ、初めて起動されたとき、Webアプリケーションでの使用許可を求められます。作業している特定のBTCPay Serverへのアクセス許可を求められるので、これらの条件を受け入れてください。BTCPay Server Vaultはハードウェアデバイスを検索し始めます。デバイスが見つかると、BTCPay ServerはVaultが実行中でデバイスを取得したことを認識します。

**！注意！**

ホットウォレットを使用する際、SSHキーまたはサーバー管理アカウントを管理者以外の誰にも渡さないでください。これらのアカウントへのアクセス権を持つ者は、ホットウォレット内の資金にアクセスできるようになります。

### スキルサマリー

このセクションでは、以下を学びました:

- Bitcoinウォレットのトランザクションビューとその様々な分類。
- ハードウェアウォレットからホットウォレットまで、Bitcoinウォレットから送金する際の様々なオプション。
- ほとんどのウォレットで直面するギャップリミット問題と、その修正方法。
- BTCPay Server内で新しいBitcoinウォレットを生成する方法、ハードウェアウォレットにキーを保存し、リカバリーフレーズをバックアップする方法。

この目標では、BTCPay Server内で新しいBitcoinウォレットを生成する方法を学びました。まだキーの保護や使用方法については触れていません。この目標の概要では、最初のストアの設定方法、Bitcoinリカバリーシードフレーズの生成方法を学びました。

### 知識評価実践レビュー

キーを生成する方法とそれらを保護するためのスキーム、およびセキュリティスキームのトレードオフ/リスクについて説明してください。

## BTCPay Server Lightning Wallet

<chapterId>1bbece7e-0197-57e6-a93a-561cf384d946</chapterId>

サーバー管理者が新しいBTCPay Serverインスタンスをプロビジョニングする際、LND、Core Lightning、またはEclairなどのライトニングネットワーク実装を設定できます。より詳細なインストール手順については、BTCPay Serverの設定パートを参照してください。
教室で一緒に進める場合、LightningノードをBTCPayサーバーに接続する作業は、カスタムノードを通じて行われます。BTCPayサーバーのサーバー管理者でないユーザーは、デフォルトでは内部Lightningノードを使用することができません。これは、サーバーの所有者が自分の資金を失うことを防ぐためです。サーバー管理者は、プラグインをインストールして、LNBankを通じて自分のLightningノードへのアクセスを許可することができます。これは本書の範囲外です。公式プラグインページでLNBankについてさらに読んでください。

### 内部ノードの接続（サーバー管理者）

サーバー管理者は、BTCPayサーバーの内部Lightningノードを使用できます。Lightningの実装に関係なく、内部Lightningノードへの接続は同じです。

以前に設定したストアに移動し、左メニューの「Lightning」ウォレットをクリックします。BTCPayサーバーは2つの設定可能性を提供します。内部ノードの使用（デフォルトではサーバー管理者のみ）またはカスタムノード（外部接続）。サーバー管理者は「内部ノードを使用する」オプションをクリックできます。これ以上の設定は必要ありません。「保存」ボタンをクリックし、「BTC Lightningノードが更新されました」という通知に注意してください。ストアは、これで成功裏にLightningネットワークの機能を得ました。

### 外部ノードの接続（サーバーユーザー/ストアオーナー）

デフォルトでは、ストアオーナーはサーバー管理者のLightningノードを使用することが許可されていません。外部ノードへの接続が必要です。これは、BTCPayサーバーの設定前にストアオーナーが所有していたノード、サーバー管理者が提供する場合のLNBankプラグイン、またはAlbyのようなカストディアンソリューションのいずれかです。

以前に設定したストアに移動し、左メニューのウォレットの下にある「Lightning」をクリックします。デフォルトでは、ストアオーナーは内部ノードを使用することが許可されていないため、このオプションはグレーアウトされています。カスタムノードの使用は、デフォルトでストアオーナーに利用可能な唯一のオプションです。

BTCPayサーバーは接続情報を必要とします。以前に作成された（またはカストディアンソリューション）が、Lightning実装に特有のこの情報を提供します。BTCPayサーバー内で、ストアオーナーは以下の接続を使用できます。

- C-lightning via TCPまたはUnixドメインソケット接続。
- Lightning Charge via HTTPS
- Eclair via HTTPS
- LND via RESTプロキシ
- LNDhub via REST API

![image](assets/en/31.webp)

「接続テスト」をクリックして、接続の詳細を正しく入力したことを確認します。接続が正常であることが確認されたら、保存をクリックし、BTCPayサーバーはストアがLightningノードで更新されたことを表示します。

### 内部LightningノードLNDの管理（サーバー管理者）

内部Lightningノードに接続した後、サーバー管理者はダッシュボード上に特にLightning情報のための新しいタイルを見ることになります。

- Lightning残高
- チャネル内のBTC
  - BTC開設チャネル
  - BTCローカル残高
  - BTCリモート残高
  - BTCクロージングチャネル
- BTCオンチェーン
  - BTC確認済み
  - BTC未確認
  - BTC予約済み
- Lightningサービス
  - Ride the Lightning (RTL).

「Lightningサービス」タイルのRide the Lightningロゴまたは左メニューのウォレットの下の「Lightning」のいずれかをクリックすると、サーバー管理者はLightningノード管理のためのRTLにアクセスできます。

**注意！**

内部Lightningノードの接続に失敗した場合 - 内部接続が失敗した場合、以下を確認してください:

1. Bitcoinオンチェーンノードが完全に同期されている
2. 「Lightning」>「設定」>「BTC Lightning設定」の下で内部lightningノードが「有効」になっている
Lightningノードに接続できない場合は、サーバーを再起動するか、BTCPay Serverの公式ドキュメントで詳細を読んでください。https://docs.btcpayserver.org/Troubleshooting/ 。Lightningノードが「オンライン」と表示されるまで、店舗でLightning支払いを受け付けることはできません。「Public Node Info」リンクをクリックして、Lightning接続をテストしてみてください。

### Lightningウォレット

左側のメニューバーのLightningウォレットオプション内で、サーバー管理者はRTL、Public node Info、および自分のBTCPay Server店舗に特有のLightning設定への簡単なアクセスを見つけることができます。

#### 内部ノード情報

サーバー管理者は内部ノード情報をクリックして、サーバーの状態（オンライン/オフライン）とClearnetまたはTorの接続文字列を一目で確認できます。

![image](assets/en/32.webp)

#### 接続の変更

店舗のオーナーがLightning設定の中で接続を変更することを決めた場合 - 接続の変更。
Public Node情報の店舗の隣にこのオプションを見つけることができます。これにより、外部Lightningノード接続の初期設定に戻り、新しいLightningノード情報を入力し、保存して、新しいノード情報で店舗を更新します。

![image](assets/en/33.webp)

#### サービス

サーバー管理者がLightning実装のために複数のサービスをインストールすることを決めた場合、それらはここにリストされます。標準的なLND実装では、管理者はノード管理のための標準ツールとしてRide The Lightning (RTL)を持っています。

#### BTC Lightningウォレット設定

以前のステップで店舗にLightningノードを追加した後、Lightningウォレットの設定内で、店舗オーナーはそれを店舗で非アクティブにする選択をすることができます。これは、Lightning設定の上部にあるトグルを使用します。

![image](assets/en/34.webp)

#### Lightning支払いオプション

店舗のオーナーは、顧客のLightning体験を向上させるために、以下のパラメータを設定できます。

- Lightning支払い金額をSatoshiで表示。
- プライベートチャネルのホップヒントをLightning請求書に追加。
- チェックアウト時にオンチェーンとLightningの支払いURL/QRコードを統一。
- Lightning請求書の説明テンプレートを設定。

#### LNURL

店舗のオーナーは、LNURLを使用するかどうかを選択できます。Lightning Network URL、またはLNURLは、Lightning支払い者と受取人間の相互作用のための提案された標準です。簡単に言うと、LNURLはlnurlでプレフィックスされたbech32エンコードされたURLです。LightningウォレットはURLをデコードし、URLに連絡して、特にknurlの動作を定義するタグを含むさらなる指示を持つJSONオブジェクトを待つことが期待されます。

- LNURLを有効にする
- LNURLクラシックモード
  - ウォレットの互換性のため、Bech32エンコード（クラシック）対クリアテキストURL（今後の）
- 支払い者がコメントを渡すことを許可する。

### 例 1

#### 内部ノードでLightningに接続する（管理者）

このオプションは、このインスタンスの管理者である場合、または管理者が内部Lightningノードを使用できるようにデフォルト設定を変更した場合にのみ利用可能です。

管理者として、左側のメニューバーのLightningウォレットをクリックします。BTCPay Serverは、内部ノードまたはカスタム外部ノードの2つのオプションのいずれかを使用してLightningノードを接続するように求めます。内部ノードを使用するをクリックし、保存をクリックします。

#### Lightningノードの管理（RTL）

内部Lightningノードに接続した後、BTCPay Serverは「BTC Lightningノードが更新されました」という通知を更新して表示し、これで店舗にLightningが接続されたことを確認します。

Lightningノードの管理は、サーバーの管理者のタスクです。これには以下が含まれます。

- トランザクションの管理
- 流動性の管理
  - 受信流動性
  - 送信流動性
- ピアとチャネルの管理
  - 接続されたピア
  - チャネル手数料
  - チャネル状態
- チャネル状態の頻繁なバックアップの作成
- ルーティングレポートのチェック
- 代わりに、Loopのようなサービスを使用する。

すべてのライトニングノード管理は、LND実装で実行していると仮定して、RTLを使って標準的に行われます。管理者はBTCPayサーバーのライトニングウォレットをクリックし、RTLを開くボタンを見つけることができます。BTCPayサーバーのメインダッシュボードは、RTLへのクイックアクセスを含むライトニングネットワークタイルで更新されています。

### 例 2

#### Albyを使ってライトニングに接続する

Albyのようなカストディアンと接続する場合、店舗所有者は最初にアカウントを作成し、次のURLを訪れるべきです:https://getalby.com/

![image](assets/en/35.webp)

Albyアカウントを作成した後、BTCPayサーバーの店舗に行きます。

ステップ1: ダッシュボードで「Set up a Lightning node」をクリックするか、ウォレットの下で「Lightning」をクリックします。

![image](assets/en/36.webp)

ステップ2: Albyによって提供されたウォレット接続資格情報を挿入します。Albyのダッシュボードで、ウォレットをクリックします。ここで「Wallet Connection Credentials」を見つけることができます。これらの資格情報をコピーして、BTCPayサーバーの接続設定フィールドにAlbyからの資格情報を貼り付けます。

![image](assets/en/37.webp)

ステップ3: BTCPayサーバーに接続の詳細を提供した後、「Test Connection」ボタンをクリックして、接続が正しく機能していることを確認します。画面の上部に「Connection to lightning node successful」というメッセージが表示されることに注意してください。これは、すべてが順調に機能していることを確認します。

![image](assets/en/38.webp)

ステップ4: 保存をクリックし、あなたの店はAlbyによるライトニングノードと接続されています。

![image](assets/en/39.webp)

**!注意!**

あなたが失うことを望まない価値以上のカストディアンライトニングソリューションを信頼しないでください。

### スキルサマリー

このセクションで学んだこと:

- 内部または外部のライトニングノードを接続する方法
- ダッシュボードの様々なライトニング関連タイルの内容と機能
- Voltage SurgeやAlbyを使用してライトニングウォレットを設定する方法

### 知識評価 実践レビュー

あなたの店にライトニングウォレットを接続するための様々なオプションをいくつか説明してください。

# BTCPayサーバーインターフェース

<partId>25e88b81-e1ab-515f-a035-09f2a3075556</partId>

## ダッシュボード概要

<chapterId>410ff28b-a272-5c91-93e0-48d5b28c53ab</chapterId>

BTCPayサーバーはモジュラーなソフトウェアパッケージです。しかし、すべてのBTCPayサーバーには標準があり、管理者/ユーザーはそれらと対話します。ダッシュボードから始まります。ログイン後のすべてのBTCPayサーバーのメインエントリーポイントです。ダッシュボードは、店舗のパフォーマンス、ウォレットの現在の残高、過去7日間の最後のトランザクションの概要を提供します。これはモジュラービューであるため、プラグインはこのビューを利用して自分たちのタイルをダッシュボードに作成することができます。このコースブックでは、BTCPayサーバー全体での標準プラグイン/アプリとそれぞれのビューについてのみ話します。

### ダッシュボードタイル

BTCPayサーバーダッシュボードのメインビュー内には、いくつかの標準タイルがあります。これらのタイルは、店舗所有者または管理者が迅速に自分の店舗を一つの概要で管理するためのものです。

- ウォレット残高
- トランザクション活動
- ライトニング残高（店舗でライトニングが有効になっている場合）
- ライトニングサービス（店舗でライトニングが有効になっている場合）
- 最近のトランザクション
- 最近の請求書
- 現在活動中のクラウドファンド
- 店舗のパフォーマンス / 売れ筋商品
ウォレット残高タイルは、あなたのウォレットの資金とパフォーマンスの概要を素早く提供します。これは、週間、月間、または年間のグラフで、BTCまたは法定通貨で表示することができます。
![image](assets/en/40.webp)

### 取引活動

ウォレット残高タイルの隣に、BTCPayサーバーは保留中の支払い、過去7日間の取引数、および店舗が返金を発行したかどうかの概要を素早く表示します。管理ボタンをクリックすると、保畈中の支払いの管理画面に移動します（BTCPayサーバーの支払いについての章で詳しく学ぶ）。

![image](assets/en/41.webp)

### ライトニング残高

これは、ライトニングが有効になっている場合にのみ表示されます。

管理者がライトニングネットワークへのアクセスを許可した場合、BTCPayサーバーのダッシュボードには、あなたのライトニングノード情報を含む新しいタイルが表示されます。チャネル内のBTCの量、これがローカルまたはリモート（インバウンドまたはアウトバウンドの流動性）でどのようにバランスされているか、チャネルが閉鎖または開設されているか、およびライトニングノード上のオンチェーンに保持されているビットコインの量。

![image](assets/en/42.webp)

### ライトニングサービス

これは、ライトニングがアクティブな場合にのみ表示されます。

BTCPayサーバーのダッシュボードでライトニング残高を確認するだけでなく、管理者はライトニングサービスのタイルも表示されます。ここでは、管理者はライトニングノードを管理するために使用するツールのクイックボタンを見つけることができます。例えば、Ride the Lightningは、BTCPayサーバーでライトニングノード管理のための標準ツールの一つです。

![image](assets/en/43.webp)

### 最近の取引

最近の取引タイルは、あなたの店舗の最新の取引を表示します。BTCPayサーバーインスタンスの管理者は、最新の取引を一目で確認し、それに対する注意が必要かどうかを確認できます。

![image](assets/en/44.webp)

### 最近の請求書

最近の請求書タイルは、あなたのBTCPayサーバーによって生成された最新の6つの請求書を表示し、ステータスと請求書額を含みます。タイルには、「すべて表示」ボタンも含まれており、完全な請求書の概要に簡単にアクセスできます。

![image](assets/en/45.webp)

### ポイントオブセールとクラウドファンド

BTCPayサーバーは標準プラグインまたはアプリのセットを提供しており、ポイントオブセールとクラウドファンドはBTCPayサーバーの主要な2つのプラグインです。BTCPayサーバーのユーザーは、店舗とウォレットごとに、必要に応じて多数のポイントオブセールやクラウドファンドを生成できます。それぞれがプラグインのパフォーマンスを示す新しいダッシュボードタイルを作成します。

![image](assets/en/46.webp)

ポイントオブセールとクラウドファンドタイルのわずかな違いに注意してください。管理者は、ポイントオブセールタイルで最も売れたアイテムを見ます。クラウドファンドタイルでは、これがトップパークスになります。両方のタイルには、該当するアプリを管理し、トップアイテムまたはトップパークスによって生成された最近の請求書を表示するためのクイックボタンがあります。

![image](assets/en/47.webp)

**!?注意!?**

残高グラフと最近の取引は、オンチェーン支払い方法にのみ利用可能です。ライトニングネットワークの残高と取引に関する情報は、作業中です。BTCPayサーバーバージョン1.6.0時点で、基本的なライトニングネットワークの残高が利用可能になりました。

### スキルサマリー

このセクションでは、以下を学びました:

- メインランディングページのタイルの基本レイアウトはダッシュボードとして知られています。
- 各タイルの内容の基本的な理解。

### 知識評価レビュー

ダッシュボードから記憶できるだけ多くのタイルをリストアップしてください。

## BTCPayサーバー - ストア設定

<chapterId>e8faef7b-278d-550e-a511-bc3a442daf64</chapterId>
BTCPay Serverソフトウェア内では、2種類の設定が存在することがわかっています。BTCPay Serverストア固有の設定は、ダッシュボードの下にある左メニューバーで見つかる設定ボタンと、アカウントのすぐ上にあるメニューバーの下部にあるBTCPay Serverの設定です。BTCPay Serverサーバー固有の設定は、サーバー管理者のみが閲覧できます。
ストア設定は、各設定セットを分類するために多くのタブで構成されています。

- 一般
- レート
- チェックアウトの外観
- アクセストークン
- ユーザー
- 役割
- Webhooks
- 支払いプロセッサ
- メール
- フォーム

### 一般

一般設定タブでは、ストアオーナーはブランディングと支払いのデフォルトを設定します。ストアの初期設定時にストア名が付けられ、これは「ストア名」の下の一般設定に反映されます。ここでストアオーナーは、ブランディングに合わせて自分のウェブサイトを設定し、管理者がデータベースで認識できるようにストアIDを設定することもできます。

#### ブランディング

BTCPay ServerはFOSSであるため、ストアオーナーは自分のストアに合わせてカスタムブランディングを行うことができます。ブランドカラーを設定し、ブランドのロゴを保存し、公開/顧客向けページ（請求書、支払いリクエスト、プル支払い）にカスタムCSSを追加します。

#### 支払い

支払い設定では、ストアオーナーはストアのデフォルト通貨（ビットコインまたは任意の法定通貨）を設定します。

#### 誰でも請求書を作成できるようにする

この設定は、BTCPay Serverの上に構築する開発者やビルダーを対象としています。ストアでこの設定をオンにすると、外部の世界があなたのBTCPay Serverインスタンスで請求書を作成できるようになります。

#### 請求書に追加料金（ネットワーク料金）を加算する

BTCPay内の機能で、商人をダスト攻撃から保護したり、商人が一度に多くのビットコインを移動する必要があるときに後で高額な手数料を支払うクライアントから保護するためのものです。例えば、顧客が20ドルの請求書を作成し、請求書が完全に支払われるまで1ドルを20回支払った場合、商人は今、より大きな取引を持っており、商人が後でそれらの資金を移動することを決定した場合、採掘コストが増加します。デフォルトでは、BTCPayは請求書が複数の取引で支払われた場合、商人のその費用をカバーするために合計請求額に追加のネットワークコストを適用します。BTCPayは、この保護機能をカスタマイズするためのいくつかのオプションを提供します。ネットワーク料金を適用できます:

- 顧客が請求書に対して1回以上支払いを行った場合のみ（上記の例で、顧客が20ドルの請求書を作成し、1ドルを支払った場合、合計請求額は現在19ドル+ネットワーク料金です。ネットワーク料金は最初の支払い後に適用されます）
- すべての支払いに（最初の支払いを含む、私たちの例では、合計はすぐに20ドル+ネットワーク料金になります、最初の支払いでも）
- ネットワーク料金を決して追加しない（ネットワーク料金を完全に無効にする）

ダスト取引から保護する一方で、適切に伝えられない場合、ビジネスに対して否定的な影響を与える可能性があります。顧客は追加の質問を持ち、あなたが彼らに過剰請求していると考えるかもしれません。

#### 完全な金額が支払われていない場合、請求書はいつ期限切れになりますか？

請求書のタイマーはデフォルトで15分に設定されています。このタイマーは、ビットコインと法定通貨のレートに応じてビットコインの金額を固定するための保護メカニズムです。顧客が定義された期間内に請求書を支払わない場合、請求書は期限切れと見なされます。請求書は、トランザクションがブロックチェーン上で可視化されるとすぐに「支払われた」と見なされます（0確認）が、商人が定義した確認数に達すると「完了」と見なされます（通常、1-6）。タイマーは分単位でカスタマイズ可能です。

#### 支払われた金額が期待される金額よりX％少ない場合でも、請求書を支払ったとみなしますか？
顧客が請求書に直接支払うために取引所のウォレットを使用する場合、取引所は小額の手数料を取ります。これは、そのような請求書が完全に完了したとは見なされないことを意味します。請求書は「部分的に支払われた」というステータスを受け取ります。商人が未払いの請求書を受け入れたい場合は、ここでパーセンテージ率を設定できます。

### 料金

BTCPay Serverでは、請求書が生成されると、常に最新かつ正確なBitcoinから法定通貨への価格が必要です。新しい店舗をBTCPay Serverで作成する際、管理者は好みの価格源を設定するよう求められます。店舗が設定された後、店舗の所有者はこのタブでいつでも価格源を変更できます。

#### 高度な料金ルールスクリプティング

主にパワーユーザーによって使用されます。オンにすると、店舗の所有者は価格の挙動や顧客に対する請求方法に関するスクリプトを作成できます。

#### テスト

好みの通貨ペアのためのクイックテスト場所です。これには、RESTクエリを介してデフォルトの通貨ペアをチェックする機能も含まれています。

### チェックアウトの外観

チェックアウトの外観タブは、請求書固有の設定とデフォルトの支払い方法から始まり、設定された要件が満たされた場合に特定の支払い方法を有効にします。

#### 請求書設定

デフォルトの支払い方法。標準構成のBTCPay Serverには3つのオプションがあります。

- BTC (オンチェーン)
- BTC (LNURL-pay)
- BTC (オフチェーン & ライトニング)

価格がX額未満の場合に顧客がライトニングとのみ対話するように、またはXがYより大きい場合は常にオンチェーン支払いオプションを提示するように、私たちの店舗のパラメータを設定できます。

![image](assets/en/48.webp)

#### チェックアウト

BTCPay Serverリリース1.7時点で、新しいチェックアウトインターフェース、Checkout V2と呼ばれるものが導入されました。リリース1.9が標準化されて以来、管理者と店舗所有者は以前のリリースにチェックアウトを設定することができます。"Use the classic checkout"のトグルを使用することで、店舗所有者は店舗を以前のチェックアウト体験に戻すことができます。BTCPay Serverには、オンライン商取引または店内体験のための一連のプリセットもあります。

![image](assets/en/49.webp)

顧客が店舗と対話し、請求書を生成すると、請求書の有効期限があります。デフォルトではBTCPay Serverはこれを5分に設定し、管理者はこれを適切と思われるものに設定できます。チェックアウトページは、以下のパラメータをチェックすることでさらにカスタマイズできます:

- 支払いを祝って紙吹雪を表示
- 店舗のヘッダーを表示（名前とロゴ）
- 「ウォレットで支払う」ボタンを表示
- オンチェーンとオフチェーンの支払いのURL/QRを統一
- ライトニング支払い額をサトシで表示
- チェックアウト時に言語を自動検出

![image](assets/en/50.webp)

自動検出言語が設定されていない場合、BTCPay Serverはデフォルトで英語を表示します。店舗の所有者はこのデフォルトを好みの言語に変更できます。

![image](assets/en/51.webp)

ドロップダウンをクリックし、店舗所有者はチェックアウトページに表示されるカスタムHTMLタイトルを設定できます。

![image](assets/en/52.webp)

顧客が支払い方法を知ることができるように、店舗の所有者はチェックアウトで常にユーザーに好みの支払い方法を選択させるように明示的に設定できます。請求書が支払われた後、BTCPay Serverは顧客をウェブショップに戻すことを許可します。店舗の所有者は、顧客が支払った後に自動的にリダイレクトを設定できます。

![image](assets/en/53.webp)

#### 公開領収書

公開領収書設定内で、店舗の所有者は領収書ページを公開に設定し、領収書ページと顧客がデジタルで簡単にアクセスできる領収書のQRコードに支払いリストを表示できます。
### アクセストークン

アクセストークンは、特定のeコマース統合やカスタムビルド統合にペアリングするために使用されます。

### ユーザー

店舗のユーザーは、店舗オーナーがスタッフメンバー、そのアカウント、および店舗へのアクセスを管理できる場所です。スタッフメンバーがアカウントを作成した後、店舗オーナーは特定のユーザーをゲストユーザーやオーナーとして店舗に追加できます。スタッフの役割をさらに定義するには、「BTCPay Server Store設定 - 役割」の次のセクションを参照してください。

### 役割

店舗オーナーは、ユーザーの標準的な役割が十分でないと感じるかもしれません。カスタム役割設定では、店舗オーナーはビジネスの各役割に対する正確なニーズを定義できます。

(1) 新しい役割を作成するには、「+ 役割を追加」ボタンをクリックします。

(2) 例えば、「キャッシャー」という役割名を入力します。

(3) 役割の個々の権限を設定します。

- あなたの店舗を変更する。
- あなたの店舗にリンクされた取引アカウントを管理する。
  - あなたの店舗にリンクされた取引アカウントを表示する。
- あなたのプルペイメントを管理する。
- プルペイメントを作成する。
  - 承認されていないプルペイメントを作成する。
- 請求書を変更する。
  - 請求書を表示する。
  - 請求書を作成する。
  - あなたの店舗に関連するライトニングノードから請求書を作成する。
- あなたの店舗を表示する。
  - 請求書を表示する。
  - あなたの支払いリクエストを表示する。
  - 店舗のウェブフックを変更する。
- あなたの支払いリクエストを変更する。
  - あなたの支払いリクエストを表示する。
- あなたの店舗に関連するライトニングノードを使用する。
  - あなたの店舗に関連するライトニング請求書を表示する。
  - あなたの店舗に関連するライトニングノードから請求書を作成する。
- あなたの店舗にリンクされた取引アカウントに資金を預ける。
- あなたの店舗の取引アカウントから資金を引き出す。
- あなたの店舗の取引アカウントで資金を取引する。

役割が作成されると、名前は固定され、編集モードで変更することはできません。

### ウェブフック

BTCPay Server内では、「ウェブフック」を新しく作成するのは比較的簡単です。BTCPay Server Store設定のウェブフックタブで、店舗オーナーは「+ ウェブフックを作成」をクリックすることで簡単に新しいウェブフックを作成できます。ウェブフックは、BTCPay Serverがあなたの店舗に関連するHTTPイベントを他のサーバーやeコマース統合に送信することを可能にします。

ウェブフックの作成ビューにいます。Payload URLを知っていることを確認し、これをあなたのBTCPay Serverに貼り付けてください。Payload URLを貼り付けた下に、ウェブフックの秘密が表示されます。ウェブフックの秘密をコピーしてエンドポイントに提供してください。すべてが設定されたら、BTCPay Serverで自動再配信をトグルできます。配信に失敗した場合は、10秒後、1分後、そして10分後に最大6回まで再配信を試みます。必要に応じてすべてのイベントをトグルするか、ニーズに合わせてイベントを指定してください。ウェブフックを有効にして、「ウェブフックを追加」を押して保存してください。

ウェブフックは、Bitpay APIと互換性があるわけではありません。BTCPay Serverには2つの別々のIPN（BitPayの用語では「即時支払い通知」）があります。

- Webhookp
- 通知

Bitpay APIを通じて請求書を作成する場合は、通知URLのみを使用してください。

### 支払いプロセッサ
支払いプロセッサは、BTCPay Server内の支払いコンセプトと連携して動作します。支払いアグリゲーターは、複数のトランザクションを一括して処理し、一度に送信します。支払いプロセッサを使用すると、店舗オーナーは一括支払いを自動化できます。BTCPay Serverは、自動支払いのための2つの方法、オンチェーンとオフチェーン（LN）を提供しています。

店舗オーナーは、両方の支払いプロセッサを別々にクリックして設定することができます。店舗オーナーは、オンチェーンプロセッサをX時間ごとに一度だけ実行したいかもしれませんが、オフチェーンは数分ごとに実行されるかもしれません。オンチェーンの場合、どのブロックに含めるべきか目標を設定することもできます。デフォルトでは、これは1（または利用可能な次のブロック）に設定されています。オフチェーン支払いプロセッサの設定には、間隔タイマーのみがあり、ブロックターゲットはありません。ライトニングネットワークの支払いは即時に行われます。

![image](assets/en/62.webp)
![image](assets/en/63.webp)

店舗オーナーは、店舗にホットウォレットが接続されている場合にのみ、オンチェーンプロセッサを設定できます。

![image](assets/en/64.webp)

支払いプロセッサの設定後、BTCPay Server Storeの設定内の支払いプロセッサタブに戻ることで、迅速に削除または変更することができます。

**!?注意!?**

オンチェーンの支払いプロセッサ - オンチェーンの支払いプロセッサは、ホットウォレットが接続されて設定された店舗でのみ機能します。ホットウォレットが接続されていない場合、BTCPay Serverはウォレットの鍵を保持しておらず、支払いを自動的に処理することはできません。

### メール

BTCPay Serverは、通知用または、例えばパスワードを失った場合に標準的なBTCPay Serverがメールを送信しないように設定されている場合、アカウントの回復にメールを使用することができます。

![image](assets/en/65.webp)

店舗オーナーが特定のイベントでメールルールを発動させる前に、いくつかの基本的なメール設定を行う必要があります。BTCPay Serverは、店舗に基づいたイベントやパスワードリセットのためにメールを送信するために、これらの設定が必要です。

BTCPay Serverは、「クイックフィル」オプションを使用することで、この情報を入力することを容易にしました:

- Gmail.com
- Yahoo.com
- Mailgun
- Office365
- SendGrid

クイックフィルオプションを使用すると、BTCPay ServerはSMTPサーバーとポートのフィールドを事前に入力します。これで、店舗オーナーは自分のメールアドレス、ログイン（通常はメールアドレスと同じ）、およびパスワードの資格情報を入力するだけです。メール設定でBTCPay Serverが提供する高度なオプションは、TLS証明書のセキュリティチェックを無効にすることです。デフォルトでは、これは有効に設定されています。

![image](assets/en/66.webp)

メールルールを使用すると、店舗オーナーは特定のイベントが特定のメールアドレスにメールをトリガーするように設定できます。

- 請求書作成
- 請求書支払い受領
- 請求書処理中
- 請求書期限切れ
- 請求書決済
- 請求書無効
- 請求書支払い決済

顧客がメールアドレスを提供している場合、これらのトリガーは顧客にも情報を送信することができます。店舗オーナーは件名を事前に入力して、このメールがなぜ発生したのか、どのトリガーが原因かを明確にすることができます。

![image](assets/en/67.webp)

### フォーム

BTCPay Serverはデータを収集しないため、店舗オーナーはチェックアウト体験にカスタムフォームを追加したいと思うかもしれません。この方法で、店舗オーナーは顧客から追加情報を収集することができます。BTCPay Serverフォームビルダーは、視覚的な部分とフォームのより高度なコードビューの2つの部分で構成されています。
新しいフォームを作成する際、BTCPay Serverは新しいウィンドウを開き、新しいフォームで要求する内容に関する基本情報の入力を求めます。最初に、店舗オーナーは新しいフォームに明確な名前をつける必要があり、この名前は設定後に変更することはできません。
![image](assets/en/68.webp)

店舗オーナーがフォームに名前を付けた後、「公開用フォームを許可」のスイッチをONに切り替えると、緑色になります。これにより、フォームは顧客向けのすべての場所で使用されるようになります。例えば、店舗オーナーが自分の販売時点管理システムを通じずに1つの別の請求書を作成した場合でも、顧客から情報を収集したいと考えるかもしれません。このONに切り替えることで、その情報の収集が可能になります。

![image](assets/en/69.webp)

すべてのフォームは、少なくとも1つの新しいフォームフィールドから始まります。店舗オーナーはフィールドのタイプを選択できます。

- テキスト
- 数値
- パスワード
- メールアドレス
- URL
- 電話番号
- 日付
- 隠しフィールド
- フィールドセット
- 自由記述用のテキストエリア
- オプションセレクター

各タイプは、入力するパラメーターを持っています。店舗オーナーは自分の好みに合わせて設定できます。最初に作成されたフィールドの下に、店舗オーナーはこの1つのフォームに新しいフィールドを追加し続けることができます。

![image](assets/en/70.webp)

#### 高度なカスタムフォーム

BTCPay Serverでは、コードでフォームを構築することもできます。特にJSONです。エディタを見る代わりに、店舗オーナーはエディタの隣にあるCODEボタンをクリックして、フォームのコードに入ることができます。フィールド定義では、以下のフィールドのみを設定できます。フィールドの値は請求書のメタデータに保存されます。

| フィールド                 | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| .fields.constant      | trueの場合、.valueはフォーム定義で設定されなければならず、ユーザーはフィールドの値を変更することができません。（例:フォーム定義のバージョン）                                                                                                                                                                                                                                                                                                       |
| .fields.type          | HTML入力タイプ テキスト、ラジオ、チェックボックス、パスワード、隠し、ボタン、色、日付、datetime-local、月、週、時間、メールアドレス、数値、範囲、検索、URL、選択、電話                                                                                                                                                                                                                                                                                                |
| .fields.options       | .fields.typeがselectの場合、選択可能な値のリスト                                                                                                                                                                                                                                                                                                                                                                                                           |
| .fields.options.text  | このオプションの表示テキスト                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| .fields.options.value | このオプションが選択された場合のフィールドの値                                                                                                                                                                                                                                                                                                                                                                                                                  |
| .fields.type=fieldset | 子フィールド .fields.fields（下記参照）の周りにHTMLフィールドセットを作成します                                                                                                                                                                                                                                                                                                                                                                                              |
| .fields.name          | 請求書のメタデータに表示されるフィールドのJSONプロパティ名                                                                                                                                                                                                                                                                                                                                                                                    |
| .fields.value         | フィールドのデフォルト値                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| .fields.required      | trueの場合、フィールドは必須になります                                                                                                                                                                                                                                                                                                                                                                                                                                |
| .fields.label         | フィールドのラベル                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| .fields.helpText      | フィールドの説明のための追加テキスト                                                                                                                                                                                                                                                                                                                                                                                                           |
| .fields.fields        | 請求書のメタデータ内で子フィールドを親フィールド内にネストさせることにより、フィールドを階層構造で整理することができます。この構造は、収集した情報をより良く整理・管理し、アクセスや解釈を容易にするのに役立ちます。例えば、顧客情報を収集するフォームがある場合、customerという親フィールドの下にフィールドをグループ化できます。この親フィールド内には、name、Email、addressといった子フィールドが存在するかもしれません。 |
フィールド名は、請求書のメタデータにおいてユーザーが提供した値を格納するJSONプロパティ名を表します。よく知られた名前は解釈され、請求書の設定を変更することがあります。

| フィールド名       | 説明            |
| ---------------- | ---------------------- |
| invoice_amount   | 請求書の金額   |
| invoice_currency | 請求書の通貨 |

フォームのURLにクエリ文字列を追加することで、請求書のフィールドを自動的に事前入力することができます。例えば、"?your_field=value"のようにします。

この機能の使用例は以下の通りです:

- ユーザー入力の支援:既知の顧客情報でフィールドを事前入力し、フォームの完成を容易にします。例えば、顧客のメールアドレスを既に知っている場合、時間を節約するためにメールフィールドを事前入力できます。
- パーソナライゼーション:顧客の好みやセグメンテーションに基づいてフォームをカスタマイズします。例えば、異なる顧客層がある場合、会員レベルや特定のオファーなど、関連するデータでフォームを事前入力できます。
- トラッキング:隠されたフィールドと事前入力された値を使用して、顧客訪問のソースを追跡します。例えば、各マーケティングチャネル（例:Twitter、Facebook、Email）に対して事前入力されたutm_media値を持つリンクを作成できます。これにより、マーケティング努力の効果を分析できます。
- A/Bテスト:異なるフォームバージョンをテストするために、異なる値でフィールドを事前入力し、ユーザーエクスペリエンスとコンバージョン率を最適化できます。

### スキルサマリー

このセクションでは、以下を学びました:

- ストア設定のタブのレイアウトと機能
- 為替レートの微調整、部分支払い、わずかな未払いなどの取り扱いに関する多くのオプション
- 請求書における価格依存のメインチェーン対ライトニング有効化を含む、チェックアウトの外観のカスタマイズ
- 役割にわたるストアアクセスと権限の管理レベル
- 自動メールとそのトリガーの設定
- チェックアウト時に追加の顧客情報を収集するためのカスタムフォームの作成

### 知識評価

#### KAレビュー

ストア設定とサーバー設定の違いは何ですか？

#### KA仮説

チェックアウトの外観 > 請求書設定で選択するかもしれないオプションとその理由を説明してください。

## BTCPay Server - サーバー設定

<chapterId>1dd858a2-49ea-586b-9bc1-75a65f508df6</chapterId>

BTCPay Serverには、ストア設定とサーバー設定の2つの異なる設定ビューがあります。後者はサーバー管理者のみが利用可能で、ストアオーナーは利用できません。サーバー管理者は、ユーザーを招待し、カスタムロールを作成し、メールサーバーを設定し、ポリシーを設定し、メンテナンスタスクを実行し、BTCPay Serverに接続されたすべてのサービスをチェックし、サーバーにファイルをアップロードし、またはログをチェックすることができます。

### ユーザー

前述の部分で触れたように、サーバー管理者はユーザータブにユーザーを追加することで、彼らをサーバーに招待できます。

### サーバー全体のカスタムロール

BTCPay Serverは、ストア固有のカスタムロールとBTCPay Server設定内のサーバー全体のカスタムロールの2種類のカスタムロールを認識しています。両方とも類似の権限セットを持っていますが、BTCpay Server設定 - ロールタブを通じて設定された場合、適用されるロールはサーバー全体に適用され、複数のストアに影響します。サーバー設定内のカスタムロールには「サーバー全体」というタグが付いていることに注意してください。
### サーバー全体のカスタムロール

サーバー全体のカスタムロールの権限セット:

- ストアの変更。
- ストアにリンクされた取引所アカウントの管理。
  - ストアにリンクされた取引所アカウントの表示。
- 引き出し支払いの管理。
- 引き出し支払いの作成。
  - 承認されていない引き出し支払いの作成。
- 請求書の変更。
  - 請求書の表示。
  - 請求書の作成。
  - ストアに関連付けられたライトニングノードからの請求書の作成。
- ストアの表示。
  - 請求書の表示。
  - 支払いリクエストの表示。
  - ストアのウェブフックの変更。
- 支払いリクエストの変更。
  - 支払いリクエストの表示。
- ストアに関連付けられたライトニングノードの使用。
  - ストアに関連付けられたライトニング請求書の表示。
  - ストアに関連付けられたライトニングノードからの請求書の作成。
- ストアにリンクされた取引所アカウントへの資金の預け入れ。
- 取引所アカウントからストアへの資金の引き出し。
- ストアの取引所アカウントでの資金の取引。

**!?注意!?**

ロールが作成されると、名前は固定され、編集モードで変更することはできません。

### メール

サーバー全体のメール設定は、ストア固有のメール設定と似ています。しかし、この設定はストアや管理者ログのトリガーだけでなく、BTCPayサーバーのログイン時にパスワード回復を可能にします。ストア固有の設定と同様に、管理者はメールパラメータを簡単に入力し、メール認証情報を入力することで、サーバーはメールを送信できるようになります。

### ポリシー

BTCPayサーバーのポリシー管理者は、既存のユーザー設定、新規ユーザー設定、通知設定、メンテナンス設定などのトピックに関するいくつかの設定を行うことができます。これらは、新しいユーザーを管理者または通常のユーザーとして登録したり、サーバーヘッダーに追加することでBTCPayサーバーを検索エンジンから隠したりするためのものです。

#### 既存のユーザー設定

ここで利用可能なオプションはカスタムロールとは別です。これらの追加権限は、ストアやストアオーナーを攻撃に対して脆弱にする可能性があります。既存のユーザーに追加できるポリシー:

- 非管理者が自分のストアで内部ライトニングノードを使用できるようにする。
  - これにより、ストアオーナーはサーバー管理者のライトニングノード、つまり彼の資金を使用できるようになります！注意、これはライトニングへのアクセスを許可する解決策ではありません。
- 非管理者が自分のストアのためのホットウォレットを作成できるようにする。
  - これにより、BTCPayサーバーインスタンスにアカウントを持つ誰でもホットウォレットを作成し、その回復シードを管理者のサーバーに保存できるようになります。これにより、管理者が第三者の資金を保持する責任を負う可能性があります！
- 非管理者が自分のストアのためのホットウォレットをインポートできるようにする。
  - ホットウォレットの作成と同様のトピックで、このポリシーはホットウォレットのインポートを許可し、ホットウォレットの作成セクションで述べられた同じ危険性があります。

#### 新規ユーザー設定

サーバーに来る新規ユーザーを管理するために、いくつかの重要な設定を行うことができます。新規登録のための確認メールの設定、ログイン画面を通じての新規ユーザー作成の無効化、API経由でのユーザー作成への非管理者のアクセス制限ができます。

- 登録のための確認メールを要求する。
  - サーバー管理者はメールサーバーを設定している必要があります！
- サーバー上での新規ユーザー登録を無効にする
- 非管理者がユーザー作成APIエンドポイントへのアクセスを無効にする。

デフォルトでは、BTCPayサーバーは新規ユーザー登録を無効にし、非管理者がユーザー作成APIエンドポイントへのアクセスをオフにしています。これは、サーバーのBTCPayログインを見つけたかもしれないランダムな人がアカウントを作成し始めることができないように、セキュリティの観点からです。
#### 通知設定
![image](assets/en/76.webp)

#### メンテナンス設定

BTCPay ServerはGitHub上で生まれたオープンソースプロジェクトです。BTCPay Serverがソフトウェアの新しいバージョンをリリースするたびに、管理者は新しいバージョンが利用可能であることを通知されます。管理者は、検索エンジン（Google、Yahoo、DuckDuckGo）がBTCPay Serverのドメインをインデックスしないようにすることも望むかもしれません。BTCPay ServerはFOSSであるため、世界中の開発者が新機能を作成したいと考えています。BTCPay Serverには、オンにすると実験的な機能があり、管理者は本番用ではない機能を純粋にテスト目的で使用できます。

- GitHubでリリースをチェックし、新しいBTCPay Serverバージョンが利用可能になったときに通知します。
- このサイトのインデックス作成を検索エンジンに拒否させる
- 実験的な機能を有効にする。

![image](assets/en/77.webp)

#### プラグイン

BTCPay Serverはプラグインを追加して機能セットを拡張できます。デフォルトでは、プラグインはBTCPay Serverプラグインビルダーリポジトリからロードされます。しかし、管理者はプレリリース状態のプラグインを見ることを選択し、プラグイン開発者が許可する場合、サーバー管理者は今プラグインのベータバージョンをインストールできます。

![image](assets/en/78.webp)

##### カスタマイズ設定

標準のBTCPay Serverデプロイメントは、インストール時に設定されたドメインを通じてアクセス可能になります。しかし、サーバー管理者はルートドメインを再マッピングし、特定のストアから作成されたアプリのいずれかを表示することができます。サーバー管理者は、特定のドメインを特定のアプリにマッピングすることもできます。

- ウェブサイトのルートにアプリを表示
  - ルートドメインに表示する可能性のあるアプリのリストを表示します。

![image](assets/en/79.webp)

- 特定のドメインを特定のアプリにマッピング。
  - 特定のアプリに特定のドメインを設定するためにクリックすると、管理者は必要なだけ多くのドメインを特定のアプリに指定できます。

![image](assets/en/80.webp)

#### ブロックエクスプローラー

標準として、BTCPay Serverはトランザクションのブロックエクスプローラーとしてmempool.spaceを使用します。BTCPay Serverが新しい請求書を生成し、それにトランザクションが関連付けられている場合、店舗オーナーはトランザクションを開くためにクリックできます。BTCPay Serverは標準でブロックエクスプローラーとしてmempool.spaceを指しますが、サーバー管理者はこれを好みに応じて変更できます。

![image](assets/en/81.webp)

### サービス

BTCPay Serverの設定:サービスタブは、BTCPay Serverが使用するコンポーネントの概要です。BTCPay Serverが公開するサービスは、デプロイメント方法によって異なる場合があります。

BTCPay Server管理者は、「情報を見る」をクリックして各サービスを開き、特定の設定を設定できます。

![image](assets/en/82.webp)

#### LND (gRPC)

BTCPayは外部消費のためにLNDのGRPCサービスを公開しています。この特定の設定メニューで接続情報を見つけることができ、互換性のあるウォレットがここにリストされています。BTCPay Serverはまた、モバイルウォレットでスキャンして適用するためのQRコードを提供します。

サーバー管理者は、詳細を開いて以下を確認できます。

- ホストの詳細
- SSLの使用
- マカルーン
- AdminMacaroon
- InvoiceMacaroon
- ReadonlyMacaroon
- GRPC SSL Cipher suite (GRPC_SSL_CIPHER_SUITES)

#### LND (REST)

BTCPayは外部消費のためにLNDのRESTサービスを公開しています。ここで接続情報を見つけることができ、互換性のあるウォレットがリストされています。互換性のあるウォレットには、Joule、Alby、ZeusLNが含まれます。BTCPay Serverは接続用のQRコードを提供し、互換性のあるウォレットでスキャンして適用します。

- REST Uri
- マカルーン
- AdminMacaroon- InvoiceMacaroon
- ReadonlyMacaroon

#### LNDシードバックアップ

LNDシードバックアップは、サーバーの破損の場合にLNDウォレットから資金を回復するのに役立ちます。Lightningノードはホットウォレットであるため、このページで機密シード情報を見つけることができます。

LNDは回復プロセスを文書化しています。ドキュメントについては、https://github.com/lightningnetwork/lnd/blob/master/docs/recovery.md を参照してください。

#### Ride The Lightning

Ride the Lightningは、オープンソースソフトウェアとして構築されたLightningノード管理ツールです。BTCPayサーバーは、そのスタック内のLightningノード管理コンポーネントとしてRTLを使用しています。BTCPayサーバーの管理者は、サーバー設定のサービスタブを通じて、またはLightningウォレットをクリックすることでRTLにアクセスできます。

#### フルノードP2P

サーバー管理者は、ビットコインノードをモバイルウォレットに接続したい場合があります。このページでは、P2Pプロトコルを介してフルノードにリモートで接続するための情報を公開しています。この本を書いている時点で、BTCPayサーバーはBlockstream GreenとWasabiウォレットを互換ウォレットとしてリストしています。BTCPayサーバーは接続用のQRコードを提供し、互換ウォレットでスキャンして適用します。

#### フルノードRPC

このページでは、RPCプロトコルを介してフルノードにリモートで接続するための情報を公開しています。

#### SSH

SSHはメンテナンス目的で使用されます。BTCPayサーバーは、サーバーに到達するための初期接続コマンドと、サーバーに接続するために認証されたSSH公開鍵を表示します。サーバー管理者は、BTCPayサーバーのUIを通じてSSHの変更を無効にしたいかもしれません。

#### ダイナミックDNS

ダイナミックDNSを使用すると、IPアドレスが定期的に変更されても、サーバーを指す安定したDNS名を持つことができます。これは、自宅でBTCPayサーバーをホスティングしていて、サーバーにアクセスするためのクリアネットドメインを持ちたい場合に推奨されます。

NATとBTCPayサーバーのインストールを適切に設定する必要があります。

### テーマ

標準として、BTCPayサーバーにはライトモードとダークモードの2つのテーマが付属しています。これらは、左下のアカウントをクリックし、ダークテーマまたはライトテーマを切り替えることで変更できます。BTCPayサーバーの管理者は、カスタムCSSテーマを提供することで自分のテーマを追加することができます。

管理者は、独自のカスタムCSSを追加することでライト/ダークテーマを拡張したり、完全なカスタムとして自分のカスタムテーマを設定したりすることができます。

![image](assets/en/83.webp)

#### サーバーブランディング

サーバー管理者は、会社のサーバー全体のブランディングを設定することで、BTCPayサーバーのブランディングを変更できます。BTCPayサーバーはFOSSであるため、サーバー管理者はソフトウェアをホワイトラベル化し、ビジネスに合った外観に変更することができます。

![image](assets/en/84.webp)

### メンテナンス

サーバー管理者として、ユーザーはサーバーの良好な管理を期待しています。BTCPayサーバーのメンテナンスタブ内で、管理者はいくつかの基本的なメンテナンスを行うことができます。ドメイン名をBTCPayサーバーインスタンスに設定し、サーバーを再起動またはクリーンアップします。おそらく最も重要なことは、アップデートを実行することです。

BTCPayサーバーはオープンソースプロジェクトであり、頻繁に更新されます。新しいリリースは、BTCPayサーバーの通知またはBTCPayサーバーが通信する公式チャンネルのいずれかによって発表されます。

![image](assets/en/85.webp)

#### ドメイン名

BTCPayサーバーが設定された後、管理者は元のドメインから変更したいかもしれません。メンテナンスタブ内で、管理者はドメインを変更できます。確認をクリックし、ドメイン上で適切なDNSレコードを設定した後、BTCPayサーバーは更新されて新しいドメインに戻ります。

![image](assets/en/86.webp)

#### 再起動

BTCPayサーバーと関連サービスを再起動します。

![image](assets/en/87.webp)

#### クリーンアップ
BTCPay ServerはDockerコンポーネントを使用して動作します。更新時には、Dockerイメージや一時ファイルなどの残留物が発生することがあります。サーバー管理者は、Cleanスクリプトを実行することでこれらをクリーンアップし、環境のスペースを回復することができます。
![image](assets/en/88.webp)

#### アップデート

メンテナンスタブで最も重要なオプションかもしれません。BTCPay Serverはコミュニティによって構築されているため、その更新サイクルはほとんどのソフトウェア製品よりも頻繁です。BTCPay Serverに新しいリリースがあると、管理者は通知センターで通知されます。更新ボタンをクリックすると、BTCPay ServerはGitHubで最新リリースをチェックし、サーバーを更新して再起動します。更新する前に、サーバー管理者は常にBTCPay Serverの公式チャンネルを通じて配布されるリリースノートを読むことが推奨されます。

![image](assets/en/89.webp)

### ログ

問題に直面することは決して楽しいものではありません。このドキュメントでは、問題を効率的に特定し、自分自身またはコミュニティの助けを借りて解決するための最も一般的なワークフローと手順を説明します。

問題を特定することが重要です。

#### 問題の再現

まず最初に、問題が発生するタイミングを特定しようとしてください。問題を再現してみてください。サーバーを更新して再起動し、問題を再現できるか確認してください。問題をよりよく説明する場合は、スクリーンショットを撮ってください。

##### サーバーの更新

BTCPay Serverのバージョンが[最新バージョン](https://github.com/btcpayserver/btcpayserver/releases)のBTCPay Serverよりもかなり古い場合は、サーバーを更新してください。サーバーを更新することで問題が解決する可能性があります。

##### サーバーの再起動

サーバーを再起動することは、最も一般的なBTCPay Serverの問題の多くを解決する簡単な方法です。サーバーを再起動するためには、SSHを使用してサーバーにアクセスする必要があるかもしれません。

##### サービスの再起動

一部の問題に対しては、BTCPay Serverデプロイメント内の特定のサービスのみを再起動する必要があります。たとえば、SSL証明書を更新するためにlets encryptコンテナを再起動するなどです。

```bash
sudo su -
cd btcpayserver-docker
docker restart letsencrypt-nginx-proxy-companion
```

再起動したい別のサービスの名前を見つけるためにdocker psを使用してください。

#### ログを通じての確認

ログは重要な情報を提供することができます。以下の段落では、BTCPayのさまざまな部分のログ情報を取得する方法について説明します。

##### BTCPayのログ

v1.0.3.8以降、サーバー管理者はフロントエンドから簡単にBTCPay Serverのログにアクセスできます。サーバー管理者の場合は、サーバー設定 > ログに移動し、ログファイルを開いてください。ログ内の特定のエラーの意味がわからない場合は、トラブルシューティング時にそれを言及してください。

より詳細なログが必要で、Dockerデプロイメントを使用している場合は、コマンドラインを使用して特定のDockerコンテナのログを表示できます。VPS上で実行されているBTCPayのインスタンスにSSHでアクセスする[指示を参照してください](https://docs.btcpayserver.org/FAQ/ServerSettings/#how-to-ssh-into-my-btcpay-running-on-vp%C2%80)。

次のページでは、BTCPay Serverで使用されるコンテナ名の一般的なリストがあります。

以下のコマンドを実行して、コンテナ名別にログを出力します。他のコンテナのログを表示するには、コンテナ名を置き換えてください。

```bash
sudo su -
cd btcpayserver-docker
docker ps
docker logs --tail 100 generated_btcpayserver_1
```

| ログ対象     | コンテナ名                        |
| ------------ | --------------------------------- |
| BTCPayServer | generated_btcpayserver_1          |
| NBXplorer    | generated_nbxplorer_1             |
| Bitcoind     | btcpayserver_bitcoind             |
| Postgres     | generated_postgres_1              |
| proxy        | letsencrypt-nginx-proxy-companion |
| Nginx        | nginx-gen                         |
| Nginx        | nginx                             |
| c-lightning  | btcpayserver_clightning_bitcoin   |
| LND          | btcpayserver_lnd_bitcoin          |
| RTL          | generated_lnd_bitcoin_rtl_1       |
| Thunderhub   | generated_bitcoin_thub_1          |
| LibrePatron  | librepatron                       |
| Tor          | tor-gen                           |
| Tor          | tor                               |

###### Lightning Network LND - Docker

Dockerを使用してLNDログにアクセスする方法はいくつかあります。まずrootとしてログインします:

```bash
sudo su -
正しいディレクトリに移動します:
cd btcpayserver-docker
# コンテナ名を見つけます:
docker ps
コンテナ名でログを表示します:
docker logs --tail 100 btcpayserver_lnd_bitcoin
```

または、コンテナIDを使用してログをすばやく表示することもできます（最初の一意のID文字だけが必要です。例えば、最も左の2文字）:

```bash
docker logs 'あなたのコンテナIDを追加'
```

何らかの理由でより多くのログが必要な場合

```bash
sudo su -
cd /var/lib/docker/volumes/generated_lnd_bitcoin_datadir/_data/logs/bitcoin/mainnet/
ls
```

次のようなものが表示されます

```bash
lnd.log lnd.log.13 lnd.log.15 lnd.log.16.gz lnd.log.17.gz
```

圧縮されていないログにアクセスするには `cat lnd.log` を実行するか、別のログが必要な場合は `cat lnd.log.15` を使用します。

`.gzip`で圧縮されたログにアクセスするには、`gzip -d lnd.log.16.gz` を使用します（この場合、`lnd.log.16.gz`にアクセスしています）。これにより新しいファイルが生成され、`cat lnd.log.16`を実行できます。上記が機能しない場合は、最初に`sudo apt-get install gzip`を使用してgzipをインストールする必要があるかもしれません。

###### Lightning Network c-lightning - Docker

```bash
sudo su -
docker ps
# c-lightningコンテナIDを見つけます。
docker logs 'ここにあなたのコンテナIDを追加'
```

または、これを使用します

```bash
docker logs --tail 100 btcpayserver_clightning_bitcoin
```

c-lightning cliコマンドでログ情報を取得することもできます。

```bash
bitcoin-lightning-cli.sh getlog
```

#### Bitcoin Node Logs

Bitcoindコンテナの[ログを見る](https://docs.btcpayserver.org/Troubleshooting/#2-looking-through-the-logs)ことに加えて、[bitcoin-cliコマンド](https://developer.bitcoin.org/reference/rpc/index.html)のいずれかを使用して、ビットコインノードから情報を取得することもできます。BTCPayには、ビットコインノードと簡単に通信できるスクリプトが含まれています。

btcpayserver-dockerフォルダ内で、ノードを使用してブロックチェーン情報を取得します:

```bash
bitcoin-cli.sh getblockchaininfo
```

### ファイル
BTCPayサーバーはローカルファイルシステムを持ち、ストア（商品）アセット、ロゴ、ブランディングを直接サーバーにアップロードします。サーバーのファイルシステムにはサーバー管理者のみがアクセスできます。ストアオーナーはストアレベルで自分のロゴやブランディングをアップロードできます。
サーバー管理者がファイルストレージタブにいるとき、サーバーに直接アップロードしたり、ファイルストレージプロバイダーをローカルファイルシステムまたはAzure Blob Storageに変更することが可能です。

![image](assets/en/90.webp)

![image](assets/en/91.webp)

### スキルサマリー

このセクションでは、以下のことを学びました:

- ストアとサーバーの設定の違い、特にユーザー、ロール、メールに関連して
- LightningまたはBitcoinホットウォレットの使用と作成、新規ユーザー登録、メール通知に関するサーバー全体のポリシーを設定する
- カスタムテーマの追加（提供されているシンプルなライト/ダークオプションの代わりに）およびカスタムロゴの作成
- 提供されているGUIを通じてシンプルなサーバーメンテナンスタスクを実行する
- 問題のトラブルシューティング、Dockerコンテナやノードの詳細を取得することを含む
- ファイルストレージの管理

### 知識評価

#### KA 概念レビュー

サーバーとストアの設定を通じて割り当てられたロールの違いは何ですか、そして一方を他方よりも使用する潜在的な用途を説明してください。

#### KA 実践レビュー

ポリシータブで有効になるいくつかの可能な使用例を説明してください。

#### KA 実践レビュー

管理者がメンテナンスタブで定期的に行う可能性のあるアクションをいくつか説明してください。

## BTCPayサーバー - 支払い

<chapterId>e2b71ff9-3f4f-5e71-9771-8e03fbbef00f</chapterId>

請求書は、売り手が買い手から支払いを集めるために発行する文書です。

BTCPayサーバーでは、請求書は定義された時間間隔内で固定為替レートで支払われる必要がある文書を表します。請求書には有効期限があります。これは、指定された時間枠内で為替レートを固定し、受取人を価格変動から保護するためです。

BTCPayサーバーの核心は、ビットコイン請求書管理システムとして機能する能力です。請求書は、受け取った支払いを追跡および管理するための重要なツールです。

組み込みの[Wallet](https://docs.btcpayserver.org/Wallet/)を使用して手動で支払いを受け取らない限り、ストア内のすべての支払いは請求書ページに表示されます。このページは支払いを日付順に累積してソートし、請求書管理と支払いトラブルシューティングの中心的な部分です。

![image](assets/en/92.webp)

### 一般

#### 請求書ステータス

以下の表は、BTCPayでの標準的な請求書ステータスをリストアップし、説明し、一般的なアクションを提案します。アクションはあくまで推奨であり、ユーザーが自分の使用例とビジネスに最適な行動を定義することが重要です。

| 請求書ステータス             | 説明                                                                                                                             | アクション                                                                                                                      |
| -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| 新規                        | 未払い、請求書のタイマーはまだ有効                                                                                           | なし                                                                                                                        |
| 新規（部分支払い）          | 支払い済みだが全額ではなく、請求書のタイマーはまだ有効                                                                                  | なし                                                                                                                        |
| 期限切れ                    | 未払い、請求書のタイマーが期限切れ                                                                                                         | なし                                                                                                                        |
| 期限切れ（部分支払い） \*\* | 支払い済みだが全額ではなく、期限切れ                                                                                                   | 購入者に連絡して返金を手配するか、残額の支払いを依頼する。オプションで請求書を決済済みまたは無効としてマークする           |
| 期限切れ（遅延支払い）         | 請求書のタイマーが期限切れた後に全額支払い済み                                                                               | 遅延確認が許容される場合は注文を処理するか、購入者に連絡して返金を手配する。                                    |
| Settled (paidOver)         | 請求額を超えて支払われ、決済され、店舗設定で指定された十分な確認を受け取った                                                 | 余分に支払われた金額について、購入者に連絡して返金を手配するか、または購入者からの連絡を待つオプションもあります                         |
| Processing                 | 全額支払われたが、店舗設定で指定された十分な確認を受け取っていない                                   | 余分に支払われた金額について、購入者に連絡して返金を手配するか、または購入者からの連絡を待つオプションもあります                         |
| Processing (paidOver)      | 請求額を超えて支払われたが、十分な確認を受け取っていない                                                      | 決済されるのを待ってから、余分に支払われた金額について購入者に連絡して返金を手配するか、または購入者からの連絡を待つオプションもあります |
| Settled                    | 全額支払われ、店舗での十分な確認を受け取った                                                                     | 注文を履行する                                                                                                            |
| Settled (marked)           | 処理中または無効な状態から手動で決済済みに変更された状態                                                             | 店舗管理者が支払いを決済済みとしてマークしました                                                                               |
| Invalid\*                  | 支払われたが、店舗設定で指定された時間内に十分な確認を受け取ることに失敗した                              | ブロックチェーンエクスプローラーでトランザクションを確認し、十分な確認を受け取っていれば、決済済みとしてマークします                    |
| Invalid (marked)           | 決済済みまたは期限切れの状態から手動で無効に変更された状態                                                                 | 店舗管理者が支払いを無効としてマークしました                                                                               |
| Invalid (paidOver)         | 請求額を超えて支払われたが、店舗設定で指定された時間内に十分な確認を受け取ることに失敗した | ブロックチェーンエクスプローラーでトランザクションを確認し、十分な確認を受け取っていれば、決済済みとしてマークします                    |

#### 請求書の詳細

請求書の詳細ページには、請求書に関連するすべての情報が含まれています。

請求書情報は、請求書の状態、為替レートなどに基づいて自動的に作成されます。商品情報は、Point of Saleアプリなどで商品情報を持って請求書が作成された場合に自動的に作成されます。

#### 請求書のフィルタリング

請求書は、検索ボタンの隣にあるクイックフィルターまたは、上部の（ヘルプ）リンクをクリックすることで切り替えられる高度なフィルターを介してフィルタリングできます。ユーザーは、店舗、注文ID、アイテムID、状態、または日付で請求書をフィルタリングできます。

#### 請求書のエクスポート

BTCPay Serverの請求書は、CSVまたはJSON形式でエクスポートできます。請求書のエクスポートと会計に関する詳細情報。

#### 請求書の払い戻し

何らかの理由で払い戻しを発行したい場合、請求書ビューから簡単に払い戻しを作成できます。

#### 請求書のアーカイブ

BTCPay Serverのアドレス再利用禁止機能の結果、店舗の請求書ページに多くの期限切れの請求書が表示されることが一般的です。それらを表示から隠すには、リストで選択してアーカイブとしてマークします。アーカイブとしてマークされた請求書は削除されません。アーカイブされた請求書に対する支払いは、BTCPay Serverによって依然として検出されます（paidLate状態）。いつでも検索フィルタードロップダウンからアーカイブされた請求書を選択して、店舗のアーカイブされた請求書を表示できます。

#### デフォルト通貨

店舗のデフォルト通貨、これは店舗作成ウィザードで設定されました

#### 誰でも請求書を作成できるようにする

外部の人が店舗で請求書を作成できるようにしたい場合は、このオプションを有効にする必要があります。このオプションは、支払いボタンを使用している場合や、APIまたは第三者のHTMLウェブサイトを介して請求書を発行している場合にのみ役立ちます。PoSアプリは事前に承認されており、ランダムな訪問者がPOS店舗を開いて請求書を作成するためにこれを有効にする必要はありません。

#### 請求書に追加料金（ネットワーク手数料）を追加する

- 請求書に対して顧客が複数回の支払いを行った場合のみ
- すべての支払いに対して
- ネットワーク手数料を決して追加しない
#### 請求書は、全額が支払われていない場合、..分後に期限切れになります。
請求書のタイマーはデフォルトで15分に設定されています。このタイマーは、暗号通貨の価格変動に対する保護メカニズムとして機能し、暗号通貨の量を暗号通貨から法定通貨へのレートに基づいてロックします。顧客が定められた期間内に請求書を支払わない場合、請求書は期限切れとみなされます。取引がブロックチェーン上で可視化されるとすぐに（0確認で）「支払済み」とみなされますが、商人が定義した確認回数（通常は1-6）に達した時に「完了」とみなされます。タイマーはカスタマイズ可能です。

#### 支払われた金額が期待される金額より..％少なくても、請求書を支払済みとみなしてください。

顧客が取引所のウォレットを使用して直接請求書に支払う場合、取引所は少額の手数料を取ります。これは、そのような請求書が完全に完了したとはみなされないことを意味します。請求書は「部分的に支払われた」というステータスを得ます。商人が未払いの請求書を受け入れたい場合は、ここでパーセンテージ率を設定できます。

### リクエスト

支払いリクエストは、BTCPayストアの所有者が長期間有効な請求書を作成できる機能です。資金は支払い時の為替レートを使用して支払いリクエストに支払われます。これにより、ユーザーは支払い時に店のオーナーと為替レートを交渉したり確認したりすることなく、自分の都合の良い時に支払いを行うことができます。

ユーザーは部分的な支払いでリクエストを支払うことができます。支払いリクエストは、完全に支払われるか、店のオーナーが有効期限を要求するまで有効です。アドレスは再利用されません。ユーザーが支払いをクリックして支払いリクエストの請求書を作成するたびに、新しいアドレスが生成されます。

ストアの所有者は、記録保持と会計のために支払いリクエストを印刷（または請求書データをエクスポート）できます。BTCPayは自動的にストアの請求書リストで請求書を支払いリクエストとしてラベル付けします。

#### 支払いリクエストをカスタマイズする

- 請求金額 - 要求された支払い金額を設定
- 通貨単位 - 要求された金額を法定通貨または暗号通貨で表示
- 支払い数量 - 単一の支払いのみを許可するか、部分的な支払いを許可する
- 有効期限 - 支払いを特定の日付まで、または無期限で許可する
- 説明 - テキストエディター、データテーブル、写真＆ビデオの埋め込み
- 外観 - CSSテーマでの色とスタイル

![image](assets/en/93.webp)

#### 支払いリクエストを作成する

左メニューから支払いリクエストに移動し、「支払いリクエストを作成」をクリックします。

![image](assets/en/94.webp)

リクエスト名、金額、表示通貨単位、関連ストア、有効期限＆説明（オプション）を提供します。

部分的な支払いを許可したい場合は、支払い者が自分の通貨単位で請求書を作成できるようにするオプションを選択します。

「保存して表示」をクリックして、支払いリクエストを確認します。

BTCPayは支払いリクエストのURLを作成します。このURLを共有して、支払いリクエストを表示します。同じリクエストが複数必要ですか？メインメニューのクローンオプションを使用して、支払いリクエストを複製できます。

![image](assets/en/95.webp)

**警告**

支払いリクエストはストア依存です。つまり、各支払いリクエストは作成時にストアに関連付けられています。支払いリクエストが属するストアにウォレットが接続されていることを確認してください。

#### 支払い済みリクエスト

支払い者とリクエスターは、支払いを送信した後、支払いリクエストのステータスを確認できます。支払いが全額受け取られた場合、ステータスは「決済済み」と表示されます。部分的な支払いのみが行われた場合は、未払い金額が残高として表示されます。

![image](assets/en/96.webp)

#### 支払いリクエストをカスタマイズする

支払いリクエストの説明内容は、支払いリクエストのテキストエディタを使用して編集できます。追加の色テーマやカスタムCSSスタイリングを使用したい場合は、両方のオプションが利用可能です。
非技術者でも、[bootstrap theme](https://docs.btcpayserver.org/Development/Theme/#2-bootstrap-themes)を使用することができます。以下に示すように、追加のCSSコードを提供することでさらなるカスタマイズが可能です。
```css
:root {
  --btcpay-font-family-base: "Source Sans Pro", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --btcpay-primary: #7d4698;
  --btcpay-primary-accent: #59316b;
  --btcpay-body-text: #333a41;
  --btcpay-body-bg: #fff;
  --btcpay-bg-tile: #f8f9fa;
}

#mainNav {
  color: white;
  background: linear-gradient(#59316b, #331840);
}

#mainNav .btn-link {
  color: white;
}
```

### プル支払い

従来、受信者はビットコイン支払いを行うために自分のビットコインアドレスを共有し、送信者は後でこのアドレスにお金を送ります。このようなシステムはプッシュ支払いと呼ばれ、送信者が支払いを開始し、受信者が利用不可の場合でも、送信者が受信者に支払いを「プッシュ」します。

しかし、役割を逆転させたらどうでしょうか？

送信者が支払いを「プッシュ」する代わりに、送信者が受信者に適切な時期に支払いを「プル」することを許可したらどうでしょうか？これがプル支払いの概念です。これにより、以下のようないくつかの新しいアプリケーションが可能になります:

- サブスクリプションサービス（加入者がサービスに一定期間ごとにお金をプルさせる）
- 返金（商人が顧客に適切と見なされる時に自分のウォレットに返金をプルさせる）
- フリーランサーの時間ベースの請求（雇用者がフリーランサーに報告された時間に応じて自分のウォレットにお金をプルさせる）
- 後援（後援者が受取人に毎月お金をプルさせて、彼らの仕事を継続的に支援する）
- 自動売買（取引所の顧客が取引所に毎月自動的にお金をプルさせて売却させる）
- 残高引き出しシステム（大量取引サービスがユーザーに自分の残高からの引き出しを要求させ、サービスが固定間隔で多くのユーザーに一括して支払いを簡単に行える）

### 支払い

支払い機能は、[プル支払い](https://docs.btcpayserver.org/PullPayments/)に組み込まれています。この機能を使用すると、BTCPay内で支払いを作成できます。この機能を使用して、プル支払い（返金、給与支払い、または引き出し）を処理できます。

#### 例1:返金

返金の例から始めましょう。顧客があなたの店で商品を購入したが、残念ながら商品を返品する必要があります。彼らは返金を望んでいます。BTCPay内で[返金](https://docs.btcpayserver.org/Refund/)を作成し、顧客に資金を請求するためのリンクを提供できます。顧客が自分のアドレスを提供し、資金を請求した場合、それは支払いで表示されます。

最初のステータスは承認待ちです。店の店員は複数の待機中のものをチェックし、選択後にアクションボタンを使用します。

アクションボタンのオプション

- 選択した支払いの承認
- 選択した支払いの承認および送信
- 選択した支払いのキャンセル

次のステップは、顧客に返金したいので、選択した支払いの承認および送信です。顧客のアドレスをチェックし、返金から手数料を差し引くかどうかを含め、金額を確認します。チェックが完了したら、取引の署名だけが残ります。
顧客は現在、請求ページで更新情報を受け取ることができます。彼は、ブロックエクスプローラーへのリンクと自分のトランザクションが提供されるため、トランザクションを追跡することができます。トランザクションが確認され、ステータスが完了に変更されると、更新されます。

#### 例2: 給与

給与の支払いについて詳しく見ていきましょう。これは店内で行われ、顧客の要求によるものではありません。基本は同じで、プル支払いを使用します。しかし、返金を作成する代わりに、[プル支払い](https://docs.btcpayserver.org/PullPayments/)を作成します。

BTCPayサーバーのプル支払いタブに移動します。右上にあるプル支払い作成ボタンをクリックします。

これで、支払いの作成に入ります。名前と希望の通貨で希望の金額を入力し、説明を記入して従業員が内容を理解できるようにします。次の部分は返金と似ています。従業員は目的地のアドレスとこの支払いから請求したい金額を記入します。彼は、2つの異なるアドレスに対して別々の請求を行うか、あるいはライトニングを介して部分的に請求することを決めるかもしれません。

複数の待機中の支払いがある場合、これらをバッチ処理して署名し、送信することができます。署名されると、支払いは進行中タブに移動し、トランザクションが表示されます。ネットワークによって受け入れられると、支払いは完了タブに移動します。完了タブは純粋に履歴目的で、処理された支払いとそれに属するトランザクションを保持します。

### プル支払い

#### 概念

送信者がプル支払いを設定するとき、彼らはいくつかのプロパティを設定できます:

- プルリクエスト名
- 限度額
- 単位（例:BTC、SAT、USD）
- 支払い方法
  - BTC オンチェーン
  - BTC オフチェーン
- 説明
- カスタムCSS
- 終了日（Lightning Network BOLT11にはオプション）

これらを設定した後、送信者はリンクを使用して受信者とプル支払いを共有し、受信者が支払いを作成できるようにします。受信者は支払い方法と送金先を選択します。

支払いが作成されると、それは現在の期間におけるプル支払いの限度額にカウントされます。送信者はその後、支払いが送られるレートを設定して支払いを承認し、支払いを進めます。

送信者には、[BTCPay内部ウォレット](https://docs.btcpayserver.org/Wallet/)から複数の支払いをバッチ処理するための簡単な方法を提供します。

#### Greenfield API

BTCPayサーバーは、送信者と受信者の両方に対して完全なAPIを提供し、それはインスタンスの`/docs`ページ（またはドキュメントウェブサイトhttps://docs.btcpayserver.org）で文書化されています。

APIはプル支払いの完全な機能を公開しているため、送信者は自分のニーズに合わせて支払いを自動化できます。

### スキルサマリー

このセクションでは、以下を学びました:

- BTCPayサーバーの請求書ステータスとそれに対して実行できるアクションの詳細な理解
- リクエストとして知られる延長された寿命の請求書メカニズムをカスタマイズし、管理する。
- BTCPayサーバーのユニークなプル支払い機能で開かれる追加の柔軟な支払い可能性、特に返金と給与支払いの取り扱い方法。

### 知識評価

#### KA 概念レビュー

請求書と支払いリクエストのいくつかの違いは何ですか、そして後者を使用する良い理由は何でしょうか？

#### KA 概念レビュー

プル支払いは、オンチェーンで通常行われることをどのように拡張しますか？それらが可能にするいくつかの使用例を説明してください。

## BTCPayサーバーのデフォルトプラグイン

<chapterId>7d673dc4-bd5d-5411-819b-f135f1d86636</chapterId>

### デフォルトのプラグインとアプリ

BTCPayサーバーには、標準のプラグイン（アプリ）セットが付属しており、BTCPayサーバーをeコマースの支払いゲートウェイに変えることができます。ポイントオブセール、クラウドファンドプラットフォーム、簡単な支払いボタンの追加により、BTCPayサーバーは簡単に展開できるソリューションとなります。

### ポイントオブセール

BTCPayサーバーの標準プラグインの一つがポイントオブセール（PoS）です。PoSプラグインを使用すると、店舗オーナーはBTCPayサーバーから直接Webショップを作成でき、Webショップを運営するために第三者のeコマースソリューションを必要としません。WebベースのPoSアプリを使用すると、実店舗を持つユーザーは、手数料や第三者を介さずに直接自分のウォレットにビットコインを受け入れることができます。PoSは、Webブラウジングをサポートするタブレットや他のデバイスに簡単に表示できます。ユーザーは、Webアプリに素早くアクセスするためのホーム画面ショートカットを簡単に作成できます。

#### 新しいポイントオブセールを作成する方法

BTCPayサーバーでは、店舗オーナーが迅速に複数のレイアウトでポイントオブセールを作成できます。BTCPayサーバーは、すべての店舗がeコマースであるわけではなく、すべての店舗がバーやレストランであるわけではないことを認識しており、PoSのための複数の標準セットアップを提供しています。

店舗オーナーが左側のメニューバーで「ポイントオブセール」をクリックすると、BTCPayサーバーは名前を求めます。この名前は左側のメニューバーに表示されます。「作成」をクリックしてPoSを作成します。

![image](assets/en/97.webp)

#### 新しく作成されたポイントオブセールを更新する

新しいPoSを作成した後、次の画面では、ポイントオブセールを更新し、店舗のアイテムを追加します。

##### アプリ名

BTCPayサーバーのメインメニューに表示されるポイントオブセールにここで与えた名前が表示されます。

##### 表示タイトル

公開時にお客様が見る公開タイトルまたは名前です。BTCPayサーバーは標準で店舗の名前を「Tea shop」としています。これをお店の名前に置き換えてください。

![image](assets/en/98.webp)

#### ポイントオブセールスタイルを選択する

BTCPayサーバーは、ポイントオブセールを複数の方法で表示できます。

- 商品リスト
  - 顧客が一度に1つの商品のみを購入できるショップビュー。
- カート付き商品リスト
  - 顧客が一度に複数のアイテムを購入し、画面の右側にショッピングカートの概要を表示できるショップビュー。
- キーパッドのみ
  - 商品リストはなく、直接請求のためのキーパッドのみ。
- 印刷表示（QR付き印刷可能商品リスト）
  - 常に商品リストをデジタルで表示できない場合、商品の「オフライン」ソリューションが必要です。BTCPayサーバーには、オフラインストアとして機能する印刷表示があります。

![image](assets/en/99.webp)

#### ポイントオブセールスタイル - 商品リスト

![image](assets/en/100.webp)

#### ポイントオブセールスタイル - カート付き商品リスト

![image](assets/en/101.webp)

#### ポイントオブセールスタイル - キーパッドのみ

![image](assets/en/102.webp)

#### ポイントオブセールスタイル - 印刷表示

![image](assets/en/103.webp)

#### 通貨

店舗オーナーは、全体のデフォルト通貨とは異なる通貨をポイントオブセールに設定することができます。店舗のデフォルト通貨が自動的にこのフィールドに入力されます。

#### 説明

お店について、何を売っているのか、いくらで売っているのかを世界に伝えましょう。お店を説明するすべてのことがここに入ります。
#### 製品

販売時点管理システムが作成されると、標準のBTCPayサーバーは参考のためにいくつかのアイテムをショップに追加します。各アイテムの可能なオプションをよりよく理解するために、標準アイテムのいずれかの編集ボタンをクリックしてください。

店舗で新しい製品を作成するには、以下のフィールドが含まれます。

- タイトル
- 価格（固定、最小、またはカスタム）
- 画像URL
- 説明
- 在庫
- ID
- 購入ボタンテキスト
- 有効/無効

店舗オーナーが新しい製品の全てのフィールドを入力したら、保存をクリックし、販売時点管理システムの製品セクションが充実していくのがわかります。製品の追加に関する進捗を失う可能性があるため、画面の右上で必ず保存してください。

店舗オーナーは「Raw Editor」を使用して製品を設定することもできます。raw editorはJSON構造の基本的な理解を必要とします。

#### チェックアウト

BTCPayサーバーは、小規模な販売時点管理システム固有のチェックアウトカスタマイズを可能にします。店舗オーナーは、「xで購入」テキストを設定したり、フォームを追加することで特定の顧客データを要求することができます。

#### チップ

全てのショップが販売にチップのオプションを必要とするわけではありません。店舗オーナーは、ショップに適していると思われる場合にオンまたはオフに切り替えることができます。ショップがチップをオンにしている場合、店舗オーナーは好きなチップのフィールドテキストを設定できます。BTCPayサーバーのチップはパーセンテージ額に基づいて機能します。店舗オーナーは、カンマ区切りで複数のパーセンテージを追加できます。

#### 割引

店舗オーナーとして、チェックアウト時に顧客にカスタム割引を提供したい場合があります。割引のトグルは、ショップのチェックアウトで利用可能になります。ただし、これは自己チェックアウトシステムでは非常に勧められません。

#### カスタム支払い

カスタム支払いオプションがオンになっている場合、顧客は店舗によって生成された元の請求書と同額またはそれ以上の価格を入力することができます。

#### 追加オプション

販売時点管理システムの設定を全て行った後、いくつかの追加オプションが残ります。店舗オーナーは、Iframeを通じてPoSを簡単に埋め込んだり、特定の店舗アイテムにリンクする支払いボタンを埋め込んだりすることができます。追加オプションの下部にカスタムCSSを追加することで、ちょうど作成したPoS店舗をスタイリッシュにすることができます。

#### このアプリを削除する

店舗オーナーが自分のBTCPayサーバーから販売時点管理システムを完全に削除したい場合、PoSの更新の下部で「このアプリを削除する」ボタンをクリックして、PoSアプリを完全に破壊することができます。「このアプリを削除する」をクリックすると、BTCPayサーバーは「DELETE」と入力して削除ボタンをクリックすることで確認を求めます。削除後、店舗オーナーはBTCPayサーバーダッシュボードに戻ります。

### BTCPayサーバー - クラウドファンド

販売時点管理システムのプラグインの隣に、BTCPayサーバーはクラウドファンドを作成するオプションを持っています。他のクラウドファンドプラットフォームと同様に、店舗オーナーは目標を設定し、寄付に対する特典を作成し、自分のニーズに合わせてカスタマイズすることができます。

#### 新しいクラウドファンドの設定方法

BTCPayサーバーの左側のメインメニューからクラウドファンドプラグインをクリックします。プラグインセクションの下にあります。BTCPayサーバーは、クラウドファンドに名前を要求します。この名前は左側のメニューバーにも表示されます。

#### 新しく作成された販売時点管理システムの更新

アプリに名前が付けられると、次の画面はアプリにコンテキストを持たせるための更新になります。

#### アプリ名

クラウドファンドに与えられた名前は、BTCPayサーバーのメインメニューに表示されます。

#### 表示タイトル
タイトルは、一般向けのクラウドファンドに与えられます。

#### タグライン

クラウドファンドが何についてのものかを一言で認識できるようにします。

![image](assets/en/107.webp)

#### 特集画像URL

各クラウドファンドにはメイン画像、つまり直接認識できるバナーがあります。この画像は、管理権限を持っている場合に自分のサーバーに保存できます。管理者はBTCPay Serverの設定 - ファイルの下でアップロードできます。ストアオーナーの場合、画像は第三者のホスト（例:imgur）を通じてウェブにアップロードする必要があります。

#### クラウドファンドを公開する

このトグルをオンにすると、クラウドファンドが公開され、外部の世界から見えるようになります。テスト目的やテーマが正しく適用されているかを確認するために、クラウドファンドの構築期間中はこの設定をOFFにしておくことが望ましいかもしれません。

#### 説明

クラウドファンドについて、何のために資金を集めているのか世界に伝えましょう。クラウドファンドを説明するすべてのことがここに入ります。

![image](assets/en/108.webp)

#### クラウドファンドの目標

プロジェクトが達成すべき目標と、その目標が表示される通貨を設定します。目標が特定の日付間で設定されている場合は、これらの目標と終了日をクラウドファンドの下のGoalsに含めてください。

![image](assets/en/109.webp)

#### パークス

パークスはクラウドファンディングに大いに役立ちます。これは、パークスが人々にキャンペーンに参加する方法を提供するからです。それらは利己的な動機と善意の動機の両方に訴えかけます。そして、あなたは支援者の慈善的な財布だけでなく、彼らの支出にアクセスできます -- どちらがより重要かは想像に難くありません。

新しいパークの作成には以下のフィールドが含まれます；

- タイトル
- 価格（固定、最小、またはカスタム）
- 画像URL
- 説明
- 在庫
- ID
- 購入ボタンのテキスト
- 有効/無効

ストアオーナーが新しいパークを作成するためのすべてのフィールドを入力したら、保存をクリックします。すると、クラウドファンドのパークスセクションが充実していくのがわかります。

![image](assets/en/110.webp)

### BTCPay Server - ポイントオブセール

#### 寄付

ストアオーナーは、パークスの表示方法、並び替え、他のパークスとのランキング方法を選択できます。しかし、クラウドファンドの目標が達成されると、ストアオーナーはこのファンドレイザーへの寄付の流れを止めたいと考えるかもしれません。そのため、"目標達成後に追加の寄付を許可しない"をオンに切り替えることができます。これにより、クラウドファンドは寄付を受け付けなくなります。

##### クラウドファンドの振る舞い

クラウドファンドの標準では、クラウドファンドに向けて作成された請求書のみが目標にカウントされます。しかし、ストアオーナーがこのストアで作成されたすべての請求書をクラウドファンドにカウントしたい場合があります。

#### カスタマイズの追加オプション

BTCpay Serverはいくつかの追加のカスタマイズを提供します。クラウドファンドにサウンド、アニメーション、またはディスカッションスレッドを追加します。ストアオーナーは、独自のカスタムCSSを入力することで、クラウドファンドの見た目と感じを変更することもできます。

#### このアプリを削除する

ストアオーナーが自分のBTCPay Serverからクラウドファンドを完全に削除したい場合、クラウドファンドの更新の下部で「このアプリを削除する」ボタンをクリックして、クラウドファンドアプリを完全に破棄できます。「このアプリを削除する」をクリックすると、BTCPay Serverは`DELETE`と入力して削除ボタンをクリックすることで確認を求めます。削除後、ストアオーナーはBTCPay Serverのダッシュボードに戻ります。

### BTCPay Server - 支払いボタン
HTMLを簡単に埋め込める高度にカスタマイズ可能な支払いボタンにより、店舗オーナーはチップや寄付を受け取ることができます。BTCPayサーバーの左メニューバーで、プラグインセクションの下にある「Pay Button」をクリックし、「Enable」をクリックして支払いボタンを作成できます。

#### 一般設定

支払いボタンの一般設定内で、店舗オーナーは以下を設定できます。

- 標準価格
- デフォルト通貨
- デフォルト支払い方法
  - 店舗のデフォルトを使用
  - BTC オンチェーン
  - BTC オフチェーン（ライトニング）
  - BTC オフチェーン（LNURL-pay）
- チェックアウト説明
- 注文ID

#### 表示オプション

BTCPayサーバーの支払いボタンは、異なるスタイルに合わせて設定することができます。ボタンは固定額またはカスタム額を持つことができ、スライダーやプラスとマイナスのトグルで表示されます。

#### モーダルを使用

支払いボタンを作成する際、店舗オーナーは顧客がそれをクリックしたときの振る舞いを選択し、モーダルまたは新しいページとして表示できます。

**！注意！**

警告:支払いボタンはチップと寄付のためにのみ使用してください

eコマース統合のために支払いボタンを使用することは推奨されません。なぜなら、注文に関連する情報がユーザーによって変更される可能性があるからです。eコマースの場合、Greenfield APIを使用するべきです。この店が商業取引を処理する場合、支払いボタンを使用する前に別の店を作成することをお勧めします。

#### 支払いボタンテキストのカスタマイズ

デフォルトでは、BTCPayサーバーの支払いボタンは「Pay With BTCPay」と表示されます。店舗オーナーはこのテキストを自分の好みに設定し、BTCPayサーバーのロゴを自分のものに変更することができます。「Pay Button Text」を使用してテキストを設定し、「Pay Button Image URL」の下に画像URLを貼り付けます。

##### 画像サイズ

ボタン内の画像サイズは、3つのデフォルトにのみ設定できます。

- 146x40px
- 168x46px
- 209x57px

#### ボタンタイプ

BTCPayサーバーは、支払いボタンについて3つの状態を認識しています。

- 固定額
  - 以前に設定された価格がボタンの一般設定にあります。
- カスタム額
  - BTCPayサーバーの支払いボタンには、カスタム価格を設定するための+と-のトグルがあります。
  - カスタム額を使用する場合、BTCPayサーバーは最小額、最大額、および価格がどのように徐々に増加するかを要求します。
  - ボタンは「シンプル入力スタイルを使用」に設定することができます。これにより、+/-トグルがなくなります。
  - ボタンとトグルがインラインで表示されるように、ボタンをインラインに合わせます。
- スライダー
  - カスタム額と似ていますが、+/-トグルの代わりにスライダーがあり、視覚的に異なります。
  - スライダーを使用する場合、BTCPayサーバーは最小額、最大額、および価格がどのように徐々に増加するかを要求します。

**！注意！**

支払いボタンの削除は、警告の説明の上部で行うことができます。

#### 支払い通知

サーバーIPN（インスタント支払い通知）は、購入後のデータを投稿するURLを記入するためのWebhook用です。

#### メール通知

支払いが行われるたびに、BTCPayサーバーは店舗オーナーに通知することができます。

#### ブラウザリダイレクト

顧客が購入を完了すると、店舗オーナーが設定した場合、このリンクにリダイレクトされます。

#### 支払いボタンの高度なオプション

請求書が作成された後、チェックアウトページに追加されるべき追加のクエリ文字列パラメータを指定します。例えば、`lang=da-DK`はデフォルトでデンマーク語のチェックアウトページを読み込みます。

#### エンドポイントとしてアプリを使用

支払いボタンを以前のPoSまたはクラウドファンドアプリのアイテムに直接リンクします。
店舗オーナーはドロップダウンメニューをクリックして、希望するアプリを選択できます。アプリが選択されたら、リンクする必要があるアイテムを追加できます。

#### 生成されたコード

BTCPay Serverの支払いボタンは、簡単に埋め込めるHTMLです。支払いボタンを設定した後、BTCPay Serverはウェブサイトにコピーするための生成されたコードを下部に表示します。

店舗オーナーは生成されたコードを自分のウェブサイトにコピーでき、BTCPay Serverの支払いボタンが直接ウェブサイト上でアクティブになります。

#### 支払い通知

サーバーIPN（即時支払い通知）は、購入データを投稿するURLを記入するためのWebhooks用です。

#### メール通知

支払いが行われるたびに、BTCPay Serverは店舗オーナーに通知できます。

#### ブラウザリダイレクト

顧客が購入を完了すると、店舗オーナーが設定した場合、このリンクにリダイレクトされます。

#### 高度な支払いボタンオプション

請求書が作成された後、チェックアウトページに追加されるべき追加のクエリ文字列パラメータを指定します。例えば、`lang=da-DK`はデフォルトでデンマーク語のチェックアウトページを読み込みます。

#### アプリをエンドポイントとして使用

支払いボタンを以前のPoSまたはクラウドファンドアプリのアイテムに直接リンクします。店舗オーナーはドロップダウンメニューをクリックして、希望するアプリを選択でき、アプリが選択されたら、リンクする必要があるアイテムを追加できます。

#### 生成されたコード

BTCPay Serverの支払いボタンは、簡単に埋め込めるHTMLです。支払いボタンを設定した後、BTCPay Serverはウェブサイトにコピーするための生成されたコードを下部に表示します。店舗オーナーは生成されたコードを自分のウェブサイトにコピーでき、BTCPay Serverの支払いボタンが直接ウェブサイト上でアクティブになります。

### スキルサマリー

このセクションで学んだこと:

- BTCPay Serverの統合されたPoSプラグインを使用して、カスタムストアを簡単に作成する方法
- BTCPay Serverの統合されたクラウドファンドプラグインを使用して、カスタムクラウドファンドアプリを簡単に作成する方法
- 支払いボタンプラグインを使用してカスタム支払いボタンのコードを生成する方法

### 知識評価

#### KAレビュー

BTCPay Serverに標準で付属する3つの組み込みプラグインは何ですか？それぞれをどのように使用できるか、数語で説明してください。

# BTCPay Serverの設定

<partId>ff38596c-7de3-5e5c-ba50-9b9edbbbb5eb</partId>

## LunaNode環境でのBTCPay Serverのインストールに関する基本的な理解

<chapterId>d0a28514-ffcf-529b-9156-29141f0b060a</chapterId>

### ホスト環境でのBTCPay Serverのインストール（LunaNode）

これらのステップは、LunaNodeでBTCPay Serverを使用し始めるために必要なすべての情報を提供します。ソフトウェアをデプロイする方法には多くのオプションがあります。
BTCPay Serverのすべての詳細は、https://docs.btcpayserver.org で見つけることができます。

#### どこから始めるべきか？

このパートでは、ホスティングプロバイダーとしてのLunaNodeに慣れ、BTCPay Serverの使用を開始する最初のステップについて学び、Lightning Networkをどのように進めるかを学びます。すべてのステップを踏んだ後、Bitcoinを受け入れるウェブショップやクラウドファンドプラットフォームを運営できます！

これはBTCPay Serverをデプロイする多くの方法の一つです。詳細については、私たちのドキュメントを読んでください。

https://docs.btcpayserver.org.

### BTCPay Server - LunaNodeデプロイメント

#### LunaNodeデプロイメント
まず、新しいアカウントを作成するためにLunaNode.comのウェブサイトにアクセスしてください。右上の「Sign Up」をクリックするか、ホームページ上の「Get Started」ウィザードを使用してください。
![image](assets/en/111.webp)

新しいアカウントを作成した後、LunaNodeから確認メールが送られてきます。アカウントを確認すると、Voltageと比較して、すぐにアカウント残高のトップアップを求められます。この残高は、サーバースペースとホスティングコストを支払うために必要です。

![image](assets/en/112.webp)

#### LunaNodeアカウントにクレジットを追加

「Deposit credit」をクリックすると、アカウントにいくら追加するか、そしてそれをどのように支払うかを設定することができます。LunaNodeとBTCPay Serverのコストは、月に10$USDから20$USDです。
Voltage.cloudと比較して、Virtual Private Server（VPS）への完全なアクセス権を得るため、サーバーをよりコントロールできます。新しいアカウントを作成した後、LunaNodeから確認メールが送られてきます。
アカウントを確認すると、Voltageと比較して、すぐにアカウント残高のトップアップを求められます。この残高は、サーバースペースとホスティングコストを支払うために必要です。

#### 新しいサーバーをデプロイする方法は？

このガイドでは、APIキーのセットを作成し、LunaNodeによって作成されたBTCPay Serverランチャーを使用するセットアップを行います。

LunaNodeダッシュボードで、右上のAPIをクリックします。これにより新しいページが開きます。APIキーに名前を設定するだけで、残りはLunaNodeによって処理され、このガイドではカバーされません。Create API Credentialボタンをクリックします。
APIクレデンシャルを作成した後、長い文字列が表示されます。これがあなたのAPIキーです。

![image](assets/en/113.webp)

#### 新しいサーバーをデプロイする方法は？

これらのクレデンシャルには2つの部分、APIキーとAPI IDがあります。次のステップに進む前に、ブラウザで別のタブを開き、https://launchbtcpay.lunanode.com/ にアクセスしましょう。

ここでは、APIキーとAPI IDを提供するよう求められます。これは、新しいサーバーのプロビジョニングを行うのがあなたであることを確認するためです。APIキーは前のタブで開いたままのはずです。下にスクロールすると、API IDが表に表示されます。

ランチャーのページに戻り、APIキーとIDを入力して「continue」をクリックします。

![image](assets/en/114.webp)

次のステップでは、ドメイン名を提供できます。既にドメインを所有しており、それをBTCPay Serverに使用したい場合は、ドメインにDNSレコード（`A`レコードと呼ばれる）も追加してください。ドメインを所有していない場合は、LunaNodeが提供するドメインを使用し（後でBTCPay Serverの設定で変更できます）、続行をクリックしてください。

BTCPay ServerのDNSレコードの設定または変更についての詳細は、https://docs.btcpayserver.org/FAQ/Deployment/#how-to-change-your-btcpay-server-domain-name をご覧ください。

#### LunaNodeでBTCPay Serverを起動

前のステップを踏んだ後、新しいサーバーのすべてのオプションを設定できます。ここでは、サポートされる通貨としてBitcoin (BTC)を選択し、暗号化証明書の更新の通知を受け取るためのメールを設定できますが、これは必須ではありません。
このガイドは、実際のビットコイン環境（Mainnet）の設定を目指していますが、開発目的でTestnetやRegtestに設定することもLunaNodeでは可能です。このガイドではMainnetオプションを選択します。
Lightning実装を選択してください。LunaNodeは、LNDとCore Lightningの2つの異なる実装を提供しています。このガイドでは、LNDを選択します。両実装には小さながらも実際の違いがあります。これについての詳細は、広範なドキュメントを読むことをお勧めします。https://docs.btcpayserver.org/LightningNetwork#getting-started-with-btcpay-server-and-core-lightning-cln

![image](assets/en/115.webp)

LunaNodeは、複数の仮想マシン（VM）プランを提供しています。これらは価格帯とサーバーの仕様が異なります。このガイドでは、m2プランで十分ですが、ビットコイン以外の通貨も選択している場合は、少なくともm4を使用することを検討してください。

初期ブロックチェーン同期の加速；これはオプションであり、ニーズに依存します。Lightning Aliasの設定、特定のGitHubリリースへのポインティング、SSHキーの設定などの高度なオプションがありますが、このガイドでは触れません。

フォームに記入した後、Launch VMをクリックすると、LunaNodeが新しいVMの作成を開始し、それにBTCPay Serverがインストールされます。このプロセスには数分かかります。サーバーが準備できたら、LunaNodeは新しいBTCPay Serverへのリンクを提供します。

作成プロセスの後、BTCPay Serverへのリンクをクリックすると、管理者アカウントの作成を求められます。

![image](assets/en/116.webp)

### スキルサマリー

このセクションで学んだこと:

- LunaNodeでアカウントを作成し、資金を供給する
- BTCPay Server Launcherを使用して自分のサーバーを作成する

### 知識評価

#### KA 概念レビュー

VPS上でBTCPay Serverのインスタンスを実行することと、ホストされたインスタンスにアカウントを作成することの違いをいくつか説明してください。

## Voltage環境でのBTCPay Serverのインストール

<chapterId>11c7d284-b4d2-5542-872c-df9bd9c1491b</chapterId>

ホスティングプロバイダーとしてVoltage.cloudに慣れ、BTCPay Serverの最初のステップを学び、Lightning Networkをどのように利用するかを学びます。すべてのステップを踏んだ後、ビットコインを受け入れるウェブショップやクラウドファンディングプラットフォームを運営できるようになります！

これはBTCPay Serverをデプロイする多くの方法の一つです。詳細については、私たちのドキュメントを読んでください。
https://docs.btcpayserver.org。

### BTCPay Server - Voltage.cloudデプロイメント

まず、Voltage.cloudのウェブサイトにアクセスし、新しいアカウントにサインアップしてください。アカウントを作成する際には、7日間の無料トライアルにサインアップすることができます。右上のSign Upをクリックするか、ホームページの「Try a free 7 day trial」を使用してください。

![image](assets/en/117.webp)

アカウントを作成した後、ダッシュボード上の`NODES`ボタンをクリックします。Nodesを選択し、新しいノードを作成すると、Voltageが提供する可能性のあるノードが表示されます。このガイドではLightningNetworkも扱うため、Voltageでは、BTCPay Serverを作成する前に、Lightning実装を最初に選択する必要があります。LightningNodeをクリックしてください。

![image](assets/en/118.webp)
ここでは、どの種類のLightningノードを選択するかを決定する必要があります。Voltageは、照明設定用のさまざまなオプションを提供しています。これは、例えばLunaNodeでデプロイする場合とは異なります。このガイドの目的では、Liteノードで十分です。Voltage.cloudでの違いについてさらに読んでください。
![image](assets/en/119.webp)

ノードに名前を付け、パスワードを設定し、このパスワードを安全に保管してください。このパスワードを失うと、バックアップへのアクセスが失われ、Voltageはそれを回復できません。ノードを作成し、Voltageが進行状況を表示します。VoltageがあなたのLightningノードを作成しました。これで、BTCPayサーバーインスタンスを作成し、直接Lightningネットワークにアクセスできます。

ダッシュボードの左上にあるNodesをクリックします。ここで、BTCPayサーバーインスタンスの次の部分を設定できます。ノードの概要に入ったら、「create new」をクリックします。以前と同様の画面が表示されます。今回はLightningノードの代わりにBTCPayサーバーを選択します。

Voltageは、BTCPayサーバーの地理的位置を表示します。Voltageは米国西部地域でホストしています。ここでは、サーバーのホスティングコストも表示されます。Createをクリックし、BTCPayサーバーに名前を付けます。Lightningを有効にすると、Voltageは前のステップで作成したLightningノードを表示します。Createをクリックすると、VoltageがBTCPayサーバーインスタンスを作成します。

![image](assets/en/120.webp)

Createをクリックした後、Voltageはデフォルトのユーザー名とパスワードを提示します。これらは、Voltageで以前に設定したパスワードと同様です。Login to Accountボタンをクリックすると、BTCPayサーバーにリダイレクトされます。

新しいBTCPayサーバーインスタンスへようこそ。作成プロセスで既にLightningを設定しているため、既にLightningが有効になっていることが表示されます！

### スキルサマリー

この章で学んだこと:

- Voltage.cloudでのアカウント作成
- アカウント上でLightningノードと共にBTCPayサーバーを稼働させる手順

### 知識評価

#### KA概念レビュー

VoltageとLunaNodeのセットアップの間にあるいくつかの主要な違いは何ですか？

## Umbrelノード上でのBTCPayサーバーのインストール

<chapterId>3298e292-6476-5fe0-836c-7fa021348799</chapterId>

これらのステップの終わりまでに、ローカルネットワーク上のBTCPayストアでライトニング支払いを受け入れることができます。このプロセスは、レストランやビジネスでumbrelノードを運用する場合にも適用されます。このストアを公開ウェブサイトに接続したい場合は、umbrelノードを公開に露出させるためのAdvanced exerciseに従ってください。

https://umbrel.com/

![image](assets/en/121.webp)

### BTCPayサーバー - Umbrelデプロイメント

UmbrelノードがBitcoinブロックチェーンと完全に同期した後、Umbrelアプリストアに移動し、Appsの下でBTCPayサーバーを検索します。

![image](assets/en/122.webp)

BTCPayサーバーをクリックしてアプリの詳細を表示します。BTCPayサーバーの詳細が開かれると、アプリが正しく動作するための要件が右下に表示されます。BitcoinとLightningノードが必要であることが示されています。UmbrelにLightningノードをインストールしていない場合は、Installをクリックします。このプロセスには数分かかることがあります。

![image](assets/en/123.webp)

Lightningノードをインストールした後:

1. アプリの詳細でopenをクリックするか、Umbrelsダッシュボードのアプリをクリックします。
2. 新しいノードのセットアップをクリックすると、lightningノードの回復用の24語が表示されます。
3. これらを書き留めます。

![image](assets/en/124.webp)
Umbrelは、書き留めたばかりの単語についての確認を求めます。Lightningノードの設定が完了したら、Umbrelアプリストアに戻り、BTCPayサーバーを探します。インストールボタンをクリックすると、Umbrelは必要なコンポーネントがインストールされているか、そしてBTCPayサーバーがこれらのコンポーネントへのアクセスを要求しているかを表示します。インストール後、アプリの詳細の右上にある「Open」をクリックするか、Umbrelのダッシュボードを通じてBTCPayサーバーを開きます。

Umbrelは、書き留めたばかりの単語についての確認を求めます。

![image](assets/en/125.webp)

**!?注意!?**

これらを以前に学んだ鍵の保存と同様に、適切な場所に保管するようにしてください。

Lightningノードの設定が完了したら、Umbrelアプリストアに戻り、BTCPayサーバーを探します。インストールボタンをクリックすると、Umbrelは必要なコンポーネントがインストールされているか、そしてBTCPayサーバーがこれらのコンポーネントへのアクセスを要求しているかを表示します。

![image](assets/en/126.webp)

インストール後、アプリの詳細の右上にある「Open」をクリックするか、Umbrelのダッシュボードを通じてBTCPayサーバーを開きます。

![image](assets/en/127.webp)

### スキルサマリー

このセクションで学んだこと:

- UmbrelノードにLightning機能を持つBTCPayサーバーをインストールする手順

### 知識評価

#### KA概念レビュー

Umbrelでの設定は、以前の2つのホスト型オプションとどのように異なりますか？

# 結論

<partId>d72e6fa5-0870-5f00-9143-9466ed22e2bd</partId>



## このコースについてのフィードバックをお寄せください
<chapterId>d90bb93d-b894-551e-9fd6-6855c739a904</chapterId>
<isCourseReview>true</isCourseReview>
## コース結論

<chapterId>c07ac2a5-f97e-5c57-8a80-4955b48128d4</chapterId>

![image](assets/en/128.webp)

また、Bitcoinが何であるか、どのように機能するか、そしてLightning Networkのような第二層でどのようにスケールできるかについての一般的な理解も得るべきです。このコースでは、初期インストールから店舗作成、複雑な請求書管理まで、誰でもBTCPayサーバーを使用して、財政的に自立した個人または商人になる方法を広範囲にわたってカバーしました。

このコースを完了したことをお祝いします。コンテンツを楽しんでいただけたことを願い、BTCPayサーバーの使用と探求を続け、私たちがそうであるように、Bitcoinと成長するビルダーや参加者のコミュニティがもたらす有望な未来に興奮していただけることを願っています。

> **FOSSは避けられない。**

### 用語集

| 用語                                        | 定義                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 51% Attack                                  | ブロックチェーン内のブロックを置き換えるために、新しい最長のブロックチェーンを意図的に構築する行為。これにより、ブロックチェーンにマイニングされたトランザクションを置き換えることができます。この種の攻撃は、マイニングパワーの大部分を持っている場合に最も実行しやすいため、「多数派攻撃」または「51%攻撃」と呼ばれます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| AccountKey                                  | リベースするためのアカウントキー                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| AccountKeyPath                              | ルートからアカウントキーへのパスは、マスターパブリックキーのフィンガープリントによってプレフィックスされます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| アドレス | Bitcoinアドレスは、受信者に支払いを行うために必要な情報をコンパクトにエンコードします。現代のアドレスは、bc1で始まる文字と数字の文字列で構成され、bc1qw508d6qejxtdg4y5r3zarvary0c5xw7kv8f3t4のように見えます。アドレスは、送信者が受信者に資金を譲渡するために使用できる、受信者のロックスクリプトの省略形です。ほとんどのアドレスは、受信者の公開鍵またはより複雑な支出条件を定義するスクリプトのいずれかを表します。前述の例は、公開鍵のハッシュに資金をロックするウィットネスプログラムをエンコードするbech32アドレスです（Pay-to-Witness-Public-Key-Hashを参照）。また、1または3で始まる古いアドレス形式もあり、これらはBase58Checkアドレスエンコーディングを使用して公開鍵ハッシュまたはスクリプトハッシュを表します。
|| アドレスタイプ | アドレスは、いくつかの異なるスクリプトを表すことができます。アドレスは、そのスクリプトタイプを伝えるためにエンコードされ、接頭辞が付けられます。レガシーアドレスはBase58を使用し、レガシーアドレスが公開鍵のハッシュである場合、いわゆるP2PKHアドレスは「1」で始まります。レガシーアドレスがスクリプトのハッシュである場合は、それは「3」で始まることが少なくありません。現在、すべてのSegWitアドレスはBech32でエンコードされ、「bc1」の接頭辞で始まります。
| アプリ | BTCPayサーバーには、それ自体として機能する可能性のあるプラグインがあります。
| BIP 329 | ウォレットラベルのエクスポート/インポート
| BIP49 | HDウォレットの派生スキームを定義し、Segregated WitnessトランザクションのためのP2WPKH-nested-in-P2SH（BIP 141）シリアライゼーションフォーマットを使用します。
| Bitcoinアドレス | あなたのビットコインを送るための英数字の文字列で、そこに「住む」ようになります。これは約33文字の文字と数字の組み合わせからなる識別子です。現在のプロトコルバージョンでは、アドレスは1、3、またはbで始まります。ビットコイントランザクションを開始するためには、受信者のアドレスを持っていることが必要です。Bitcoinアドレスは公開鍵から生成され、プライバシーを向上させるために一連の公開鍵から複数のアドレスを生成することができます。Bitcoinアドレスはメールアドレスのように機能し、メッセージを送信する場合はその宛先を知る必要があります。ビットコイントランザクションを送信する前に、ビットコイントランザクションは取り消し不可能であり、受信者に属していないアドレスにビットコインを送信してしまう可能性があるため、受信者のアドレスが正確であることを確認する必要があります。
| bitcoin対Bitcoin | Bitcoinは通貨ネットワークであり、bitcoin（小文字）はBitcoinネットワーク上の通貨単位です。Bitcoinネットワークで取引を行うためにビットコイン通貨またはトークンを使用します。
| ブロック | ブロックは、ヘッダーとBitcoinトランザクションの本体からなるBitcoinブロックチェーンのデータ構造です。ブロックにはタイムスタンプが付けられ、特定の先行（親）ブロックにコミットされます。ハッシュ化されたとき、ブロックヘッダーはブロックチェーンを確率的に不変にする作業証明を提供します。ブロックは、ブロックチェーンを拡張するためにネットワークコンセンサスによって強制されるルールに従う必要があります。ブロックがブロックチェーンに追加されると、含まれるトランザクションは最初の確認と見なされます。
| ブロックエクスプローラー | ブロック、トランザクション、アドレスなどに関連するリアルタイムおよび歴史的情報を検索できるオンラインツールです。
| ブロックハッシュ | ブロックハッシュはブロックのデータのSHA-256ハッシュであり、通常は16進数形式で表されます。ブロックハッシュは非常に大きな数値として解釈できます。プルーフ・オブ・ワーク（Proof-of-Work）要件を満たすためには、ブロックハッシュは特定の閾値よりも低くなければなりません。したがって、すべてのブロックハッシュはゼロの連続した後に英数字の文字列が続く形で始まります。一部のブロックには最大で20個の先頭ゼロがありますが、初期のブロックには8個程度のゼロしかありません。必要なゼロの数は、ブロックが公開された時点での採掘の難易度を大まかに示しています。 |
| ブロック高さ | 各ブロックはゼロから始まる昇順で番号付けされます。 |
| ブロック報酬 | ブロック補助金（新たに作成されたビットコイン）と、ブロックに含まれるトランザクションからのすべての取引手数料の合計から成ります。 |
| ブロックサイズ | 各ブロックは、収めることができるデータ量に限りがあります。特定のブロックに収まらなかったデータは、次のブロックのいずれかに記録されます。ビットコインのブロックに関しては、以前はブロックサイズが1MBでしたが、ソフトフォーク後には技術的に最大4MBのデータを収めることができます。 |
| ブロック補助金 | 各ブロックで新たに鋳造されるビットコインの量。ブロックチェーンに追加された各ブロックを生成したクリエーターは、特定の量の新しいビットコインを鋳造することができます。補助金はブロックごとに50BTCから始まり、約210,000ブロックまたはおよそ4年ごとに半分に減少します。 |
| ブロックチェーン | すべてのビットコイン取引の分散型ログまたはデータベース。取引はブロックと呼ばれる個別の更新でグループ化され、最大400万ウェイトユニットまで制限されます。ブロックはマイニングと呼ばれる確率的プロセスを通じて約10分ごとに生成されます。各ブロックには計算集約型の「プルーフ・オブ・ワーク」が含まれます。プルーフ・オブ・ワーク要件は、ブロック間隔を調整し、既に公開されたブロックを置き換えるための攻撃からブロックチェーンを保護するために使用されます。攻撃者は既存のプルーフ・オブ・ワークを上回る必要があり、それにより各ブロックは後続のブロックの下に埋もれることで確率的に不変となります。 |
| BTCPAYサーバーボールト | 使用の容易さ、セキュリティ、プライバシーの間で最適なバランスを実現するために、ハードウェアウォレットを使用したBTCPayサーバーウォレットの使用が推奨されます。BTCPayボールトは、ハードウェアウォレットとBTCPayサーバーを橋渡しするために構築されています。 |
| ビザンチン将軍問題 | 信頼できる中央機関に依存せずに分散型の当事者が合意に達することの難しさを説明するゲーム理論の問題。この名前は、ビザンチウムを包囲している複数の将軍のシナリオから来ています。彼らは都市を囲んでいますが、いつ攻撃するかを集団で決定しなければなりません。すべての将軍が同時に攻撃すれば勝利しますが、異なる時間に攻撃すれば敗北します。将軍たちは互いに安全な通信チャネルを持っておらず、送受信されたメッセージはビザンチウムの防衛者によって傍受されたり、欺瞞的に送られた可能性があります。将軍たちはどのようにして同時に攻撃を組織できるでしょうか？ |
| 検閲 | 大衆に伝達できる情報の制御。ビットコインに関しては、第三者による取引の停止能力についての検閲です。 |
| お釣り | UTXOが送信者のウォレットに通常は異なるアドレスを通じて返される部分。入力の合計から支出された金額と取引手数料を差し引いた金額に相当します。 |
| Child Pays For Parent (CPFP)                | 低手数料の未確認トランザクションからのアウトプットを、高手数料の子トランザクションで使用し、マイナーに両トランザクションをブロックに含めるよう促す手数料増加技術。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Coinbase Transaction                        | 各ブロックの最初のトランザクションで、ブロック報酬とトランザクション手数料をそのブロックをマイニングした人に分配します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Coincidence of Wants                        | 二者が互いに欲しいアイテムを持っている経済現象で、金銭的媒体なしにこれらのアイテムを直接交換します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Cold Storage                                | インターネットに接続せずにデータを管理する方法                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Cold Wallet                                 | プライベートキーをオフラインで、通常は物理的なデバイス上で安全に保存するタイプのビットコインウォレット。ハードウェアウォレットとしても知られており、インターネットに接続されていないフラッシュドライブのようなデバイスを使用して、オンラインのハッカーからデジタルビットコインを保護します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Command Line Interface (CLI)                | ユーザーやクライアントからのコマンドと、デバイスやプログラムからのテキスト形式の応答によって、デバイスやコンピュータープログラムと対話すること。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Commitment Transaction                      | コミットメントトランザクションは、チャネルパートナー両方によって署名されたビットコイントランザクションで、チャネルの最新の残高をエンコードします。チャネルを使用して新しい支払いが行われるか転送されるたびに、チャネル残高が更新され、新しいコミットメントトランザクションが両当事者によって署名されます。重要なことに、アリスとボブの間のチャネルでは、アリスとボブの両方が他方によって署名されたコミットメントトランザクションの自分のバージョンを保持します。いつでも、アリスまたはボブは、自分のコミットメントトランザクションをビットコインブロックチェーンに提出することでチャネルを閉じることができます。古い（時代遅れの）コミットメントトランザクションの提出は、ライトニングネットワーク内で不正行為（つまり、プロトコル違反）と見なされ、ペナルティトランザクションを介してチャネル内の全資金を自分自身に請求することによって、他方によって罰せられる可能性があります。 |
| Confirmation                                | トランザクションがブロックに含まれると、1回の確認が行われます。ブロックチェーン上に別のブロックがマイニングされると、トランザクションは2回の確認を受け、以降も同様に続きます。6回以上の確認は、トランザクションが逆転できない十分な証拠と見なされます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Crowdfund (CF)                              | BTCPay Serverのデフォルトプラグインで、店舗オーナーが典型的なクラウドファンドウェブサイトを簡単に作成できます。目標を設定し、寄付に対する特典を作成し、自分のニーズに合わせてカスタマイズできます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Cryptography                                | 元のメッセージが変更され、意図した受信者のみがそれを受け取ることができる特別なシステム                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Dashboard                                   | BTCPay Serverの中心的なランディングページ。店舗のすべての活動の概要を、いくつかの要約タイルにわたって表示します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Demo                                        | ソフトウェアデモが行われる仮想環境を指します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Deployment                                  | ソフトウェアデプロイメントは、ソフトウェアシステムを使用可能にするすべての活動を指します。一般的なデプロイメントプロセスは、複数の相互関連する活動とそれらの間の可能な遷移から成り立っています。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 導出パス | 導出パスは、階層的決定性（HD）ウォレットがキーの木の中で特定のキーを導出する方法を指示するデータの一部です。導出パスはBitcoinの標準として使用され、BIP 32の一部としてHDウォレットに導入されました。 |
| 難易度調整 | ブロックが平均して10分おきに採掘されるように、約2週間（2016ブロック）ごとに難易度目標が調整されます。これにより、ブロック間の一貫した時間と、ネットワークへの新しいビットコインの一貫した発行（ブロック報酬を通じて）が実現します。 |
| 難易度目標 | 採掘において、ブロックがブロックチェーンに追加されるためには、ブロックハッシュがこの数値以下でなければなりません。 |
| デジタル署名 | デジタル署名は、デジタルメッセージやドキュメントの真正性と完全性を検証するための数学的な仕組みです。メッセージが隠されていない暗号学的なコミットメントと見なすことができます。 |
| 分割可能 | 価値を損なうことなく小さな量に分割できる財の性質。経済取引は頻繁にさまざまな量で行われるため、通貨は広く経済で使用されるためには分割可能でなければなりません。 |
| Docker | Dockerは、ライブラリ、システムツール、コード、ランタイムを含む、ソフトウェアを標準化されたユニットであるコンテナにパッケージ化するソフトウェアです。 |
| ダブルスペンド | あるお金を一度以上成功裏に使う結果。Bitcoinは、ブロックチェーンに追加された各トランザクションがコンセンサスのルールに従っていることを検証することでダブルスペンドに対抗します。これは、トランザクションの入力が以前に使われていないことを確認することを意味します。 |
| 耐久性 | 通貨が時間と共に元の状態を維持し、繰り返し使用に耐えられる性質。耐久性のある通貨は、潜在的な損傷から生き残る能力がなければなりません。 |
| Electrum | Electrumは、2011年に作成された最も人気のあるBitcoinウォレットの一つです。 |
| 拡張公開キー（Xpub） | 拡張公開キー（Xpubとしても知られる）は、HDウォレットの機能としてxpubから派生したキーの親として機能する公開キーです。このXpubはBIP 32で導入された標準です。Xpubの共有は直接的なリスクがないため、資金が動かされる直接的なリスクはありませんが、Xpubはプライベートキーを派生させることができません。Xpubの共有の利点は、BTCPay Serverでのクラウドファンド目的などがあります。Xpubはオンラインで共有され、プライベートキーはHWW上でオフラインに保持されます。 |
| F.U.D. | 不安、不確実性、疑念の略で、通常は競合他社を不利にするために意図的に引き起こされます。 |
| 手数料 | Lightning Networkの文脈では、ノードは他のユーザーの支払いを転送するためにルーティング手数料を請求します。個々のノードは自分の手数料ポリシーを設定でき、これは固定のbase_feeと支払い金額に依存するfee_rateの合計として計算されます。Bitcoinの文脈では、トランザクションの送信者がトランザクションをブロックに含めるために採掘者にトランザクション手数料を支払います。Bitcoinのトランザクション手数料には基本料金は含まれず、トランザクションの重さに線形に依存しますが、金額には依存しません。 |
| Fiat                                        | 政府が発行する商品（例えば金）に裏打ちされていない通貨。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Finite                                      | ビットコインの供給量が上限に達していることを指します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Fork                                        | プロトコルやコードの変更。フォークは通常、プロジェクトのアップグレードのために導入されます。オープンソースコミュニティでは、多くの個人が同じソフトウェアを異なるタイミングでダウンロードして実行し、常に更新するわけではないため、フォークが存在します。2人のユーザーがソフトウェアのバージョン1をダウンロードして実行し、バージョン2がリリースされたときに1人のユーザーのみがアップグレードした場合、アップグレードしたユーザーはバージョン1のフォークを実行していることになります。                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Funding Transaction                         | 支払いチャネルを開くために使用されるトランザクション。ファンディングトランザクションの価値（ビットコインで）は、支払いチャネルの容量と正確に一致します。ファンディングトランザクションの出力は、チャネルパートナーがそれぞれ1つの鍵を制御する2-of-2マルチシグネチャスクリプト（マルチシグ）です。マルチシグの性質上、チャネルパートナー間の相互合意がなければ使用できません。最終的には、コミットメントトランザクションのいずれかまたはクロージングトランザクションによって使用されます。                                                                                                                                                                                                                                                                                                                                                                                       |
| Fungible                                    | 債務の支払いや勘定の決済において、一部または数量が別の等しい部分または数量に置き換えられる性質を持つもの（例えばお金や商品）を指します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Gap Limit                                   | ブロックチェーン内のトランザクションをチェックするために確認される公開アドレスの標準数を指します。アドレスギャップリミットを超えるアドレスで受け取ったトランザクションは検出されません。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Genesis Block                               | ビットコインブロックチェーンの最初のブロック。ビットコインの創設者であるサトシ・ナカモトは、2009年1月3日にジェネシスブロックを採掘し、その日の「Financial Times」の見出し「Chancellor on brink of second bailout for banks」を含めました。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Github                                      | Gitを使用したソフトウェア開発とバージョン管理のためのプラットフォームおよびクラウドベースのサービスで、開発者がコードを保存および管理できます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Gossip Protocol                             | LNノードは、ゴシップメッセージを交換することで、Lightning Networkのトポロジーに関する情報を送受信します。ゴシッププロトコルは主にBOLT＃7で定義され、node_announcement、channel_announcement、およびchannel_updateメッセージの形式を定義します。スパムを防ぐため、ノードが既にチャネルを持っている場合にのみ、ノードアナウンスメントメッセージが転送され、チャネルのファンディングトランザクションがビットコインネットワークによって確認された場合にのみ、チャネルアナウンスメントメッセージが転送されます。通常、Lightningノードはチャネルパートナーと接続しますが、ゴシップメッセージを処理するために他のLightningノードに接続することも問題ありません。                                                                                                                                                              |
| Gresham's Law                               | 「悪貨は良貨を駆逐する」と述べる法則。つまり、2つの通貨が使用されている経済では、個人は価値が下がり続ける悪貨を使い、価値を保持する良貨を保持します。したがって、悪貨は日常取引での流通と使用で支配的になり、良貨は貯蓄と長期投資で支配的になります。                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Halving                                     | 約4年ごと（正確には210,000ブロックごと）にビットコインの発行率を半分に減らすイベント。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ハードフォーク | 後方互換性のないコンセンサス変更です。後方互換性がないとは、以前は無効だった振る舞いが有効になることを意味します。ハードフォークを通じてコンセンサスを維持するためには、全ノードがアップグレードする必要があります。そうでなければ、古いノードは古いルールに基づいてトランザクションやブロックを無効と判断しますが、アップグレードされたノードはそれらを有効と受け入れます。この理由から、Bitcoinではハードフォークを可能な限り避けます。 |
| ハードウェアウォレット (HWW) | ユーザーの秘密鍵を安全なハードウェアデバイスに保存する特別なタイプのBitcoinウォレットです。 |
| ハッシュ関数 | 任意のサイズのデータを固定サイズのビット文字列（ハッシュ）にマッピングする数学的アルゴリズムであり、一方向関数、つまり逆算が不可能な関数であるように設計されています。理想的な暗号学的ハッシュ関数の出力から入力データを再現する唯一の方法は、可能な入力をブルートフォース検索して一致するものを見つけることです。 |
| ハッシュレート | Bitcoinネットワーク上でマイナーが毎秒に生成するハッシュの総数を測る指標です。単一のハッシュはブロックのためのProof-of-Workを作成しようとする試みです。 |
| ホットウォレット | 特にインターネットに接続するデバイスです。ホットウォレットはインターネットに接続するBitcoinウォレットです。これらのウォレットは日常的な支出にはより便利ですが、インターネットとのやり取りがあるため、冷蔵保管オプションほど安全ではありません。 |
| 初期ブロックダウンロード (IBD) | スクラッチから完全なBitcoinブロックチェーンを構築するプロセスです。新しいノードが設定され、ネットワークに参加すると、他のノードに接続してブロックを要求します。新しいノードはこれらのブロックを処理し、ネットワークと同期し追いつくまでブロックチェーンを構築します。 |
| 請求書 | 販売取引に関連する商業文書で、売り手が買い手に発行し、提供された商品やサービスの製品、数量、合意された価格を示します。 |
| 顧客確認 (KYC) | すべての金融口座が個人または組織に特定可能であることを義務付けることにより、金融機関が不正な資金移動に利用されるのを防ぐことを目的とした法律です。 |
| レイヤー2 | ブロックチェーンの上に構築されたネットワーク、例えば、ライトニングネットワークです。 |
| レガシーアドレス | レガシーアドレスはBase58を使用し、公開鍵のハッシュである場合、いわゆるP2PKHアドレスは「1」で始まります。 |
| ライトニングネットワーク | Bitcoinの上に構築されたプロトコルです。HTLCとオニオンルーティングの助けを借りて、ネットワークを通じて支払いを信頼なしで転送する支払いチャネルのネットワークを作成します。ライトニングネットワークの他のコンポーネントには、ゴシッププロトコル、トランスポート層、および支払いリクエストがあります。 |
| 流動性 | 与えられた市場内の特定の資産の注文帳の複数の特徴の尺度です。流動性は、大きな注文が資産の価格にどれだけの市場影響を与えるかの指標です。流動性が高い資産は、注文帳の深さが深いことを意味します。これは、より多くの注文をより小さな価格変動で吸収できることを意味します。 |
| 最長チェーン                               | 最も構築に労力を要したブロックの連鎖。直感的には、より多くのブロックを含むブロックチェーンの方が、ブロックが少ないチェーンよりも構築にエネルギーを要したと考えられますが、より正確には、生成により多くの作業を要したチェーンを指します。そのため、「最も重いチェーン」という名称が適していたかもしれません。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| メインチェーン                              | Lightning Networkの文脈では、Bitcoin Networkを指します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 交換媒体                                    | 経済内で他の商品やサービスの交換を容易にするタイプの商品。歴史的には、貝殻、ビーズ、金などが交換媒体として使用されてきました。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| メンプール                                   | "memory pool"の略で、ノードによって受信されたトランザクションを一時的に保管する場所です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| マイナー                                     | ハッシュ処理を通じて新しいブロックを追加することでブロックチェーンの構築に従事するノード。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| マイニング                                    | 最近のBitcoinトランザクションからブロックを構築し、作業証明として必要な計算問題を解決するプロセス。共有されたbitcoin元帳（つまり、Bitcoinブロックチェーン）が更新され、新しいトランザクションが元帳に含まれるプロセスでもあります。また、新しいbitcoinが発行されるプロセスでもあります。新しいブロックが作成されるたびに、マイニングノードはそのブロックのコインベーストランザクション内で作成された新しいbitcoinを受け取ります。                                                                                                                                                                                                                                                                                                                                                                                 |
| マルチシグネチャ（マルチシグ）                 | 支出を承認するために複数の署名が必要なスクリプト。支払いチャネルは常に、支払いチャネルの各パートナーから1つの署名が必要なマルチシグアドレスとしてエンコードされます。2者間の支払いチャネルの標準的なケースでは、2-of-2マルチシグアドレスが使用されます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ノード                                        | ネットワークに参加しているコンピュータ。特にBitcoinまたはLightningネットワークの場合。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| アウトプット                                  | Bitcoinトランザクションで作成されるbitcoinsのパッケージ。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| アウトプットロック                             | アウトプットに設定された一連の要件。トランザクションでアウトプットを使用するためには、これらの要件を満たす必要があります。最も一般的な例は、プライベートキーを持っているという単純な要件です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| P2SHアドレス                                | P2SHアドレスは、スクリプトの20バイトハッシュのBase58Checkエンコーディングです。P2SHアドレスは"3"で始まります。P2SHアドレスはすべての複雑さを隠し、支払いを送る人がスクリプトを見ることがないようにします。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| P2WPKHアドレス                              | "ネイティブSegWit v0"アドレスフォーマットであり、P2WPKHアドレスはbech32エンコードされ、"bc1q"で始まります。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| P2WSHアドレス                               | "ネイティブSegwit v0"スクリプトアドレスフォーマットであり、P2WSHアドレスはbech32エンコードされ、"bc1q"で始まります。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 部分的に署名されたBitcoinトランザクション（PSBT） | 署名されていないトランザクションの移植性を促進するBitcoin標準で、複数の当事者が同じトランザクションに簡単に署名できるようにします。これは、複数の当事者が同じトランザクションに入力を追加したい場合に最も役立ちます。PSBTはBIP 174によって導入され、ユーザーが冷蔵保管デバイスでトランザクションにより簡単に署名し、その後、インターネットに接続されたデバイスから署名されたトランザクションをブロードキャストできるようにします。                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| パスファインディング | Lightning Network内で支払いのためのソースから目的地への経路を見つけるプロセス。 |
| Pay-to-Public-Key-Hash (P2PKH) | P2PKHは、ビットコインを公開鍵のハッシュにロックする出力タイプです。P2PKHスクリプトによってロックされた出力は、ハッシュに一致する公開鍵と、対応する秘密鍵によって作成されたデジタル署名を提示することで、アンロック（使用）することができます。 |
| Pay-to-Script-Hash (P2SH) | P2SHは、複雑なBitcoinスクリプトの使用を可能にする多用途型の出力です。P2SHでは、出力を使用するための条件を詳述する複雑なスクリプト（リディームスクリプト）はロックスクリプトに提示されず、代わりに値はスクリプトのハッシュにロックされ、出力を使用するためにはそのスクリプトを提示して満たす必要があります。 |
| Pay-to-Taproot (P2TR) | 2021年11月にアクティブ化されたTaprootは、ビットコインを支払い条件のツリー、または単一のルート条件にロックする新しい出力タイプです。 |
| Pay-to-Witness-Public-Key-Hash (P2WPKH) | P2WPKHは、SegWitのP2PKHに相当し、分離された証人（Segregated Witness）を使用します。P2WPKH出力を使用するための署名は、ScriptSigフィールドではなく、証人ツリーに置かれます。 |
| Pay-to-Witness-Script-Hash (P2WSH) | P2WSHは、SegWitのP2SHに相当し、分離された証人を使用します。P2WSH出力を使用するための署名とスクリプトは、ScriptSigフィールドではなく、証人ツリーに置かれます。 |
| Payjoin | 送信者と受信者の両方が入力を提供する特別なタイプのBitcoinトランザクションで、共通の入力所有ヒューリスティック（ビットコインユーザーからプライバシーを剥奪するために使用される仮定）を破ることを目的としています。 |
| 支払いチャネル | Lightning Network上の2つのノード間の金融関係で、ビットコイントランザクションを使用して多重署名アドレスに支払いを行うことで作成されます。チャネルパートナーは、ビットコインブロックチェーンにすべてのトランザクションをコミットすることなく、お互いにビットコインを送り合うためにチャネルを使用できます。典型的な支払いチャネルでは、資金調達トランザクションとコミットメントトランザクションのみがブロックチェーンに追加されます。チャネルを介して送信された支払いはブロックチェーンに記録されず、「オフチェーン」で発生したと言われます。 |
| 支払いリクエスト | BTCPayストアの所有者が長期間有効な請求書を作成できる機能。支払いリクエストに対して支払われた資金は、支払い時の為替レートを使用します。これにより、ユーザーは支払い時に店の所有者と為替レートを交渉したり確認したりすることなく、自分の都合に合わせて支払いを行うことができます。 |
| 支払い | この機能はプルペイメントに結びついています。この機能を使用すると、プルペイメント（返金、給与の支払い、または引き出し）を処理できます。 |
| プラグイン | プログラムにインストールされるソフトウェアのアドオンで、その機能を強化します。 |
| ポイントオブセール (PoS) | BTCPayサーバーのデフォルトプラグインで、店舗所有者がBTCPayサーバーから直接ウェブショップを作成できるようにします。店舗所有者は、ウェブショップを運営するために第三者のeコマースソリューションを必要としません。 |
| 携帯性 | 物が容易に空間を越えて運ばれる能力。携帯性は、健全なお金の重要な特徴です。広く採用され、したがって使用可能であるためには、国境を越え、個人間で、そして相対的な容易さで長距離にわたって移動できる必要があります。 |
| Proof Of Work (PoW) | 見つけるのに大きな計算が必要とされ、誰でも簡単に検証して、その生成に必要だった作業量を証明できるデータ。ビットコインでは、マイナーはネットワーク全体の目標である難易度ターゲットを満たすSHA-256アルゴリズムの数値解を見つける必要があります。 |
| ペンネーム | 個人が自分の身元を保護するため、または実際の身元とは別の評判を築くために使用する偽名。公開鍵を使用することで、ビットコインユーザーはブロックチェーンに関して匿名のままビットコインを受け取ることができます。 |
| 公開鍵暗号 | 電子的に自分の身元を認証する必要があるエンティティや、データに署名する、または暗号化するために、公開鍵と秘密鍵として知られる鍵のペアを使用することを含みます。公開鍵は公開され、対応する秘密鍵は秘密に保持されます。公開鍵で暗号化されたデータは、対応する秘密鍵でのみ復号化できます。 |
| 公開鍵/秘密鍵 | 公開鍵暗号で使用される鍵のペア。公開鍵はオープンに他者と共有され、アカウント番号と考えることができますが、秘密鍵は秘密に保持され、パスワードと考えることができます。 |
| プル支払い | 従来、ビットコイン支払いを行うには、受信者が自分のビットコインアドレスを共有し、送信者が後でこのアドレスにお金を送ります。このシステムは、送信者が支払いを開始し、受信者が利用不可である可能性があるため、受信者に支払いを「プッシュ」する効果があるため、プッシュ支払いと呼ばれます。送信者が支払いを「プッシュ」する典型的なシナリオの代わりに、送信者は受信者が適切と見なす時に受信者が支払いを引き出すことを許可します。 |
| ラビットホール | 「不思議の国のアリス」での参照で、主人公がラビットホールに入ることで冒険に乗り出します。ビットコイン内では、ビットコインを理解し始めると、終わりなく探求し、新たな視点で見ることになるトピックを指します。 |
| 受け取り | 提供されたアドレスにビットコインが送られるプロセス。 |
| 登録 | 通常、ユーザー名とパスワードを選択してサービスにサインアップすることで行われるアカウントの作成プロセス。 |
| Replace By Fee (RBF) | ビットコイントランザクションは、送信者がより高い手数料を支払う別の類似のトランザクションとこのトランザクションを置き換えることを許可するために、RBFとして指定することができます。このメカニズムは、ネットワークが混雑し、手数料が予期せず上昇した場合にユーザーが対応できるように存在します。 |
| リポジトリ | バージョン管理システムでは、ファイルセットまたはディレクトリ構造のメタデータを格納するデータ構造です。使用されているバージョン管理システムがGitやMercurialのような分散型であるか、Subversion、CVS、Perforceのような集中型であるかによって、リポジトリ内の情報の全セットが各ユーザーのシステム上に複製されるか、単一のサーバー上に保持されるかが異なります。リポジトリが含むメタデータには、リポジトリの変更履歴、コミットオブジェクトのセット、コミットオブジェクトへの参照セットであるヘッドなどがあります。 |
| Rescan                                      | 以前に設定された導出スキームに属するコインの現在の状態をスキャンするプロセス。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Revokation Key                              | すべてのRevocable Sequence Maturity Contract (RSMC)には、2つの取り消しキーが含まれています。各チャネルパートナーは1つの取り消しキーを知っています。2つの取り消しキーを知っている場合、RSMCのアウトプットは、事前に定義されたタイムロック内で使用できます。新しいチャネル状態を交渉する際に、古い取り消しキーが共有され、古い状態が「取り消される」ことになります。取り消しキーは、チャネルパートナーが古いチャネル状態をブロードキャストすることを抑止するために使用されます。                                                                                                                                                                                                                                                                                                                                                   |
| Routing                                     | Lightning Networkのパスを使用して支払いを行うプロセス。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Routing Fees                                | Lightning Networkでは、他のユーザーの支払いを転送するために課される手数料。個々のノードは自分自身の手数料ポリシーを設定でき、これは固定のbase_feeと、支払い金額に応じたfee_rateの合計として計算されます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Salability                                  | 保有者が望むときに、最小の価格損失で市場で売却できる商品の容易さ。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Satoshi (sat)                               | サトシは、ブロックチェーンに記録できるビットコインの最小単位（面名）です。1サトシは1ビットコインの1億分の1（0.00000001）で、ビットコインの創設者であるサトシ・ナカモトの名前にちなんでいます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Satoshi Nakamoto                            | ビットコインを設計し、そのオリジナルのリファレンス実装を作成した個人またはグループが使用した名前です。実装の一環として、彼らは最初のブロックチェーンデータベースも考案しました。このプロセスで、彼らはデジタル通貨の二重支払い問題を最初に解決しました。彼らの真の身元は未だに不明です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Satoshi Per Byte                            | トランザクションの優先度を測定する単位で、トランザクションの手数料（サトシ単位）をトランザクションのサイズ（バイト単位）で割ったものです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Satoshi Per Verabyte                        | Satoshi Per Byteと同様の概念ですが、Segwitを使用する新しいアドレス向けです。トランザクションのサイズ（ウィットネスを含まない）を3倍し、ウィットネスを含むトランザクションのサイズを加えたものを、4で割ったものに等しいです。ウェイト単位は、トランザクションのサイズによって計算されます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Scarcity                                    | コストレスに複製できない商品の特性。希少性は、商品の既存の単位数に依存するのではなく、より多くの単位を生産するコストに依存します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Script                                      | ビットコインは、Bitcoin Scriptと呼ばれるトランザクション用のスクリプティングシステムを使用しています。Forthプログラミング言語に似ており、シンプルでスタックベースのもので、左から右へと処理されます。意図的にチューリング不完全であり、ループや再帰がありません。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Seed Phrase                                 | ビットコイン資金をオンチェーンで回復するために必要なすべての情報を格納する単語のリスト。ウォレットソフトウェアは通常、シードフレーズを生成し、ユーザーに紙に書き留めるよう指示します。ユーザーのコンピュータが壊れたり、ハードドライブが破損した場合、同じウォレットソフトウェアを再度ダウンロードし、紙のバックアップを使用してビットコインを取り戻すことができます。                                                                                                                                                                                                                                                                                                                                                                                                           |
| Segregated Witness (SegWit)                 | Segregated Witness (SegWit)は、署名やその他のトランザクション認証証明のための新しい証人フィールドを追加することで、2017年に導入されたBitcoinプロトコルのアップグレードです。この新しい証人フィールドは、トランザクションIDの計算から除外されるため、第三者によるトランザクションの可変性のほとんどのクラスを解決します。Segregated Witnessはソフトフォークとして展開され、技術的にBitcoinのプロトコルルールをより制限的にする変更です。                                                                                                                                                                                                                                                                                                                                                                                                                |
| Self-Sovereignty                            | 個人または企業が自分のアカウントや個人データを制御する能力を単独で所有するデジタルアイデンティティの管理モデルです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Send                                        | アドレスへのビットコインの移動プロセスです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Sensitivity Mode                            | ストア設定内のトグルを介して有効化され、有効化すると数値データ（例:ビットコインの量）がすべてのビューで不明瞭になります。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Server Settings                             | BTCPayサーバー内の設定で、サーバー全体に適用されます（ストア設定は単一のストアに限定されるのに対して）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| SHA-256                                     | 暗号学的ハッシュ関数です。セキュアハッシングアルゴリズム（SHA）関数と呼ばれるハッシュ関数のファミリーの一員です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Shopify                                     | カナダの多国籍電子商取引企業で、オンタリオ州オタワに本社を置いています。Shopifyは、オンラインストアと小売の販売時点管理システム用の独自の電子商取引プラットフォームの名前です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| SMTP                                        | シンプルメール転送プロトコルは、電子メールの送信のためのインターネット標準通信プロトコルです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Soft Fork                                   | 前方および後方互換性のあるプロトコルアップグレードで、古いノードと新しいノードの両方が同じチェーンを使用し続けることができます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Software Stack                              | コンピューティングにおいて、ソリューションスタックまたはソフトウェアスタックは、アプリケーションをサポートするために追加のソフトウェアが不要な完全なプラットフォームを作成するために必要なソフトウェアのサブシステムまたはコンポーネントのセットです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Store                                       | BTCPayサーバー内のストアは、特定のビットコインウォレットの「ホーム」と見なされ、BTCPayサーバーのすべての機能を拡張します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Store Settings                              | BTCPayサーバー内の特定のストアに特有の設定です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Taproot                                     | Bitcoinにいくつかの新機能を導入するアップグレードです。このアップグレードはBIPs 340、341、および342で説明されており、Schnorr署名方式、Taproot、およびTapscriptを導入します。これらのアップグレードは、ビットコインの転送をより効率的で柔軟で、プライベートにする新しい方法を導入します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Thier's Law                                 | 良いお金が悪いお金を駆逐するという法則です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Third-Party Host                            | 個人または企業のウェブサイトが、別の事業が所有および管理するサーバー上で運営される場合です。代替案は、自分のデータセンターの自分のサーバー上にウェブサイトをホストすることです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Timelock                                    | 一定の将来の時間またはブロック高まで特定のビットコインの支出を制限するタイプの妨害です。Timelocksは、支払いチャネルやHTLCなど、多くのBitcoin契約で顕著に特徴付けられています。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| トポロジー | Lightning Networkのトポロジーは、数学的なグラフとしてのLightning Networkの形状を記述します。グラフのノードはLightningノード（ネットワーク参加者/ピア）です。グラフのエッジは、支払いチャネルです。Lightning Networkのトポロジーは、公開されていないチャネルを除き、ゴシッププロトコルの助けを借りて公にブロードキャストされます。これは、Lightning Networkが発表されたチャネルやノードの数よりもかなり大きい可能性があることを意味します。トポロジーを知ることは、送信者がルートを発見する支払いのソースベースのルーティングプロセスに特に関心があります。 |
| トランザクション | トランザクションは、Bitcoinが一つのアドレスから別のアドレスに転送されるために使用されるデータ構造です。数千のトランザクションがブロックに集約され、その後ブロックチェーン上に記録（マイニング）されます。各ブロックの最初のトランザクションはコインベーストランザクションと呼ばれ、新しいビットコインを生成します。 |
| トランザクションID | ブロックチェーン上の特定のトランザクションを識別する文字と数字の文字列です。この文字列は単にトランザクションのダブルSHA-256ハッシュです。このハッシュは、ノードやブロックエクスプローラーでトランザクションを検索するために使用できます。 |
| 二要素認証 (2FA) | リソースやデータにアクセスするために2つの形式の認証を必要とするアイデンティティとアクセス管理のセキュリティ方法で、通常は標準のログインパスワードに加えて、セカンダリデバイスが必要です。 |
| 検閲不可能 | どのエンティティもビットコインのトランザクションを逆転させたり、ウォレットやアドレスをブラックリストに入れる能力がないという特性。 |
| 押収不可能 | どのエンティティもその人の意志に反してビットコインを取り上げることができないという特性。 |
| 未使用トランザクション出力 (UTXO) | まだ使われていない出力で、新しいトランザクションで使うことができるもの。 |
| ユーザーエクスペリエンス (UX) | ユーザーが製品、システム、またはサービスとどのように相互作用し、経験するかです。これには、ユーティリティ、使いやすさ、効率の人々の知覚が含まれます。 |
| ユーザーインターフェース (UI) | デバイスにおける人間とコンピュータの相互作用と通信のポイントです。 |
| 検証可能 | 偽物や模倣品と簡単に区別できる商品の特性。 |
| バーチャル | コンピュータやコンピュータネットワーク上で実現される、またはシミュレートされること。 |
| バーチャルマシン (VM) | コンピューティングにおいて、バーチャルマシンはコンピュータシステムの仮想化またはエミュレーションです。バーチャルマシンはコンピュータアーキテクチャに基づいており、物理コンピュータの機能を提供します。その実装には、特殊なハードウェア、ソフトウェア、またはその両方が関与する場合があります。 |
| バーチャルプライベートサーバー | バーチャルプライベートサーバーは、インターネットホスティングサービスによってサービスとして販売されるバーチャルマシンです。「バーチャル専用サーバー」という用語も同様の意味を持ちます。バーチャルプライベートサーバーは、そのオペレーティングシステムのインスタンスに対してスーパーユーザーレベルのアクセスを顧客が持つことができるため、そのOS上で動作するほぼ任意のソフトウェアをインストールできます。 |
| ボラティリティ | 資産価格の時間経過における変動の度合いを測る指標。定期的に大きな価格変動を経験する資産はよりボラティリティが高く、価格がより安定している資産はボラティリティが低いです。 |
| ウォレット                                      | Bitcoinウォレットはユーザーのキーを保持し、ユーザーがBitcoinを受け取り、トランザクションに署名し、アカウントの残高を確認することを可能にします。Bitcoinウォレットに保持されている秘密キーと公開キーは、2つの異なる機能を果たしますが、作成時に結びつけられています。Bitcoinウォレットにはユーザーのキーが含まれており、実際のBitcoinは含まれていません。概念的には、ウォレットは多くの秘密キーと公開キーのペアを保持するキーチェーンのようなものです。これらのキーはトランザクションに署名するために使用され、ユーザーがブロックチェーン上のトランザクション出力、つまり自分のBitcoinを所有していることを証明することを可能にします。すべてのBitcoinは、トランザクション出力の形でブロックチェーンに記録されています。                                                                                                                                                                                                                      |
| Wasabiウォレット                               | デスクトップ用のオープンソース、非預託、プライバシーに焦点を当てたBitcoinウォレットで、信頼できないCoinJoinを実装しています。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 見守り専用ウォレット                           | 資金の使用を無効にしながら、コールドストレージにあるBitcoinを追跡できるBitcoinウォレットです。これは、見守り専用ウォレットが秘密キーを保管または使用せず、したがってユーザーに代わって支出を承認することができないためです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| クジラ                                       | Bitcoinの文脈において、クジラは大量のBitcoinを保有している人のことを指します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ホワイトラベル                                 | ホワイトラベル製品は、ある企業が製造し、他の企業がそれを自社製品のように見せかけて再ブランド化する製品またはサービスです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ホワイトペーパー                                  | 新しいアイデアや議論のトピックを紹介します。Bitcoinのホワイトペーパーは、「信頼できる第三者を必要としない」“ピアツーピアの電子キャッシュシステム”としてBitcoinを紹介しました。サトシ・ナカモトは、2008年10月31日に暗号学者やサイファーパンクのメーリングリストにホワイトペーパーを公開しました。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Wrapped Segwit                              | SegWitアップグレードに含まれる設計実装で、ウォレットやその他のBitcoinソフトウェアがSegWitをより簡単にサポートできるようにすることを目的としています。これを実現するために、2つのネイティブSegWitスクリプト、P2WPKHとP2WSHがP2SHトランザクションの「redeemScript」として使用され、それぞれP2SH-P2WPKHとP2SH-P2WSHのWrapped SegWitスクリプトタイプが生成されます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

![image](assets/ja/129.webp)
