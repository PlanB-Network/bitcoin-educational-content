---
name: Boltzmann 计算器
description: 理解熵的概念以及如何使用 Boltzmann
---
![cover](assets/cover.webp)

***警告：** 继 Samourai Wallet 创始人于 4 月 24 日被捕，其服务器被查封后，KYCP.org 网站目前无法访问。托管 Python Boltzmann 计算器代码的 Gitlab 也已被查封。从现在起，无法下载此工具。但是，代码可能会在未来几周内被其他人重新发布。与此同时，您仍然可以从本教程中受益，以理解 Boltzmann 计算器的工作原理。此工具提供的指标适用于任何比特币交易，也可以手动计算。我将在本教程中提供所有必要的计算。如果您已经在您的机器上下载了 Python 工具，或者您正在使用 RoninDojo，您可以继续使用该工具并按照本教程的指示操作，它仍然有效。*

_我们正在密切关注此案件的发展以及与之相关工具的发展。请放心，一旦有新信息可用，我们将更新本教程。_

_本教程仅供教育和信息目的使用。我们不支持或鼓励使用这些工具进行犯罪活动。每个用户都有责任遵守其管辖区的法律。_

---

Boltzmann 计算器是一个用于分析比特币交易的工具，通过测量其熵级别以及其他高级指标。它提供了交易输入和输出之间连接的洞察。这些指标提供了交易隐私的量化评估，并帮助识别潜在错误。

这个 Python 工具由 Samourai Wallet 和 OXT 的团队开发，但它可以用于任何比特币交易。

## 如何使用 Boltzmann 计算器？
使用 Boltzmann 计算器有两种选择。第一种是直接在您的机器上安装 Python 工具。或者，您可以选择 KYCP.org（_了解您的币隐私_）网站，该网站提供了一个简化的使用平台。对于 [RoninDojo](https://planb.network/tutorials/node/ronin-dojo-v2) 用户，请注意，此工具已集成到您的节点中。

使用 KYCP 网站非常简单：只需在搜索栏中输入您希望分析的交易标识符（TXID），然后按 `ENTER`。
![KYCP](assets/1.webp)
然后，您将找到有关交易的不同信息，包括输入和输出之间的链接。点击 `deterministic links`。
![KYCP](assets/2.webp)
您将进入专门介绍 Boltzmann 计算器指标的页面。
![KYCP](assets/3.webp)
对于那些更喜欢直接从他们的 RoninDojo 节点使用工具的人，可以通过 `RoninCLI > Samourai Toolkit > Boltzmann Calculator` 访问。

与 KYCP.org 网站一样，一旦安装了 Python 工具，您只需粘贴您希望分析的交易的 TXID。

![KYCP](assets/7.webp)

然后，按 `ENTER` 键获取结果。

![KYCP](assets/8.webp)

## Boltzmann 计算器的指标是什么？
### 组合/解释：
软件计算的第一个指标是可能组合的总数，工具中表示为 `nb combinations` 或 `interpretations`。
考虑到交易中涉及的UTXOs的值，这个指标计算了输入与输出关联的可能方式数量。换句话说，它确定了从外部观察者分析交易的角度，交易可以引发的合理解释数量。例如，根据Whirlpool 5x5模型构建的coinjoin展示了`1,496`种可能的组合：![KYCP](assets/4.webp)
另一方面，Whirlpool Surge Cycle 8x8 coinjoin展示了`9,934,563`种可能的解释：![KYCP](assets/5.webp)
相比之下，一个更传统的交易，具有1个输入和2个输出，只会呈现单一解释：![KYCP](assets/6.webp)

### 熵：
计算的第二个指标是交易的熵，由`Entropy`表示。

在密码学和信息的一般背景下，熵是与数据源或随机过程相关联的不确定性或不可预测性的量化度量。换句话说，熵是衡量信息难以预测或猜测的一种方式。

在链分析的特定背景下，熵也是一个指标的名称，它源自香农熵并由[LaurentMT发明](https://gist.github.com/LaurentMT/e758767ca4038ac40aaf)，通过Boltzmann工具计算得出。

当一个交易呈现出高数量的可能组合时，通常更有意义的是参考其熵。这个指标允许测量分析师对交易确切配置的知识缺乏。换句话说，熵越高，分析师识别比特币在输入和输出之间移动的任务就越困难。

实际上，熵揭示了从外部观察者的角度来看，一个交易是否呈现多种可能的解释，这完全基于输入和输出的金额，而不考虑其他外部或内部模式和启发式。因此，高熵是交易保密性更好的同义词。

熵被定义为可能组合数量的二进制对数。这是使用的公式：
```plaintext
E: 交易的熵
C: 交易的可能组合数量

E = log2(C)
```

在数学中，二进制对数（基数-2对数）对应于指数化2的逆运算。换句话说，`x`的二进制对数是必须将`2`提升到的指数，以获得`x`。因此，这个指标以比特表示。

以根据Whirlpool 5x5模型构建的coinjoin交易的熵计算为例，如前所述，它提供了`1,496`种可能的组合：
```plaintext
C = 1,496
E = log2(1,496)
E = 10.5469比特
```
因此，这个coinjoin交易显示的熵为`10.5469比特`，这被认为是非常令人满意的。这个值越高，交易承认的不同解释就越多，从而加强其隐私级别。
对于呈现`9,934,563`种解释的8x8 coinjoin交易，熵将是：
```plaintext
C = 9,934,563
E = log2(9,934,563)
E = 23.244比特
```
让我们再来看一个更传统的交易示例，它包含一个输入和两个输出：[1b1b0c3f0883a99f1161c64da19471841ed12a1f78e77fab128c69a5f578ccce](https://mempool.space/tx/1b1b0c3f0883a99f1161c64da19471841ed12a1f78e77fab128c69a5f578ccce) 在这个交易的案例中，唯一可能的解释是：`(In.0) > (Out.0 ; Out.1)`。因此，它的熵被确定为 `0`：
```plaintext
C = 1
E = log2(1)
E = 0 位
```

### 效率：
Boltzmann 计算器提供的第三个指标名为 `钱包效率`。该指标通过将交易与在相同配置下可想象的最优交易进行比较，来评估交易的效率。

这引导我们讨论最大熵的概念，它对应于特定交易结构理论上能达到的最高熵。然后，通过将这个最大熵与分析交易的实际熵进行对比，来计算交易的效率。

使用的公式如下：
```plaintext
ER: 交易的实际熵，以位表示
EM: 给定交易结构可能的最大熵，以位表示
Ef: 交易的效率，以位表示

Ef = ER - EM
```

例如，对于一个 Whirlpool 5x5 类型的 coinjoin 结构，最大熵设定为 `10.5469`：
```plaintext
ER = 10.5469
EM = 10.5469
Ef = 10.5469 - 10.5469 = 0 位
```

这个指标也以百分比表示，其公式则为：
```plaintext
CR: 实际可能的组合数
CM: 与相同结构的最大可能组合数
Ef: 以百分比表示的效率

Ef = CR / CM
Ef = 1,496 / 1,496
Ef = 100%
```

因此，`100%`的效率表明该交易根据其结构最大化了其隐私潜力。

### 熵密度：
第四个指标是熵密度，工具上记为 `熵密度`。它提供了相对于交易中每个输入或输出的熵的视角。这个指标对于评估和比较不同大小交易的效率非常有用。要计算它，只需将交易的总熵除以涉及的输入和输出的总数：
```plaintext
ED: 以位表示的熵密度
E: 交易的熵，以位表示
T: 交易中输入和输出的总数

ED = E / T
```

让我们以一个 Whirlpool 5x5 coinjoin 为例：
```plaintext
T = 5 + 5 = 10
E = 10.5469
ED = 10.5469 / 10 = 1.054 位
```

让我们也为一个 Whirlpool 8x8 coinjoin 计算熵密度：
```plaintext
T = 8 + 8 = 16
E = 23.244
ED = 23.244 / 16 = 1.453 位
```

### Boltzmann 得分：
波尔兹曼计算器提供的第五项信息是输入与输出之间匹配概率的表格。该表格通过波尔兹曼得分，指出了一个特定输入与给定输出相关联的条件概率。
因此，这是一个量化的条件概率度量，基于在一组解释中，这一事件发生的有利次数与可能发生的总次数的比率，来衡量交易中输入与输出之间关联发生的条件概率。

以Whirlpool coinjoin为例，条件概率表将突出显示每个输入与输出之间联系的机会，提供交易中关联模糊性的量化度量：

| %       | 输出0 | 输出1 | 输出2 | 输出3 | 输出4 |
| ------- | ----- | ----- | ----- | ----- | ----- |
| 输入0 | 34%   | 34%   | 34%   | 34%   | 34%   |
| 输入1 | 34%   | 34%   | 34%   | 34%   | 34%   |
| 输入2 | 34%   | 34%   | 34%   | 34%   | 34%   |
| 输入3 | 34%   | 34%   | 34%   | 34%   | 34%   |
| 输入4 | 34%   | 34%   | 34%   | 34%   | 34%   |

在这里，我们可以清楚地看到，每个输入与任何输出相关联的机会都是相等的，这增强了交易的保密性。
计算波尔兹曼得分涉及将某一事件发生的解释次数除以可用解释的总数。因此，为了确定输入编号0与输出编号3（`512`解释）相关联的得分，使用以下程序：
```plaintext
解释（输入.0 > 输出.3）= 512
总解释 = 1496
得分 = 512 / 1496 = 34%
```

以Whirlpool 8x8 coinjoin（激增周期）为例，波尔兹曼表格将如下所示：

|       | 输出.0 | 输出.1 | 输出.2 | 输出.3 | 输出.4 | 输出.5 | 输出.6 | 输出.7 |
|-------|-------|-------|-------|-------|-------|-------|-------|-------|
| 输入.0 | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| 输入.1 | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| 输入.2 | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| 输入.3 | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| IN.4  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   || IN.5  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| IN.6  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| IN.7  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |

然而，在一个简单的交易中，具有单一输入和两个输出的情况是不同的：

| %       | 输出 0 | 输出 1 |
|---------|--------|--------|
| 输入 0 | 100%   | 100%   |

在这里，我们观察到每个输出来源于输入编号 0 的概率是 `100%`。因此，较低的概率转化为通过稀释输入和输出之间的直接链接来增加隐私。

### 确定性链接：
提供的第六条信息是确定性链接的数量，以及这些链接的比例。这一指标揭示了在分析的交易中，输入和输出之间有多少连接是无可争议的，概率为 `100%`。另一方面，比例提供了这些确定性链接在交易链接整体集中的权重视角。
例如，一个Whirlpool类型的coinjoin交易没有确定性链接，因此显示指标和比例为 `0%`。相反，在我们检查的第二个简单交易中（一个输入和两个输出），指标设置为 `2`，比例达到 `100%`。因此，一个空指标表示由于缺乏输入和输出之间直接且无可争议的链接，因此具有极佳的保密性。

**外部资源：**

- Samourai上的Boltzmann代码
- [Laurent MT撰写的《比特币交易与隐私（第一部分）》](https://gist.github.com/LaurentMT/e758767ca4038ac40aaf)
- [Laurent MT撰写的《比特币交易与隐私（第二部分）》](https://gist.github.com/LaurentMT/d361bca6dc52868573a2)
- [Laurent MT撰写的《比特币交易与隐私（第三部分）》](https://gist.github.com/LaurentMT/e8644d5bc903f02613c6)
- KYCP网站
- [Laurent MT在Medium上关于介绍Boltzmann脚本的文章](https://medium.com/@laurentmt/introducing-boltzmann-85930984a159)