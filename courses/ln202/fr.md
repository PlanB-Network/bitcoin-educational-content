---
name: Mise en place dâ€™un nÅ“ud Bitcoin & Lightning
goal: Mise en place dâ€™un noeud Bitcoin et Lightning via Umbrel. Analyse de la blockchain, crÃ©ation et gestion de canaux.
---

Un voyage vers le cÃ´tÃ© technique de Bitcoin

:[affiche du cours](BTC101_vignette-presentation-front.png)

Voici la formation pratique Lightning Network et BTC !

Ã‰tant plus poussÃ©e techniquement, il est idÃ©al dâ€™avoir quelques bases sur Bitcoin :

    Comprendre comment fonctionnent les portefeuilles Bitcoin.
    Comprendre le principe de transaction, mineur et blockchain.

Cette formation est donc pour montrer le cas concret, rÃ©el, palpable de Bitcoin et du Lightning Network. On se salit les mains ! Ceci reste accessible pour tous et pas besoin de savoir coder.

Quâ€™allez-vous apprendre durant ce cours ?
N
La mise en place d'un nÅ“ud Bitcoin
N
L'utilisation d'un nÅ“ud Bitcoin
N
Utilisation d'un nÅ“ud Lightning Network

Lâ€™objectif final de cette formation est dâ€™avoir une trÃ¨s bonne comprÃ©hension du protocole Bitcoin. Vous aurez, si vous le souhaitez, des canaux Lightning bien connectÃ©s, un portefeuille extrÃªmement sÃ©curisÃ© et mÃªme votre propre serveur de paiement BTCPay Server.

Le curriculum complet: LN 202 â€“ Curriculum

Pas convaincu ? Tu peux regarder le curriculum complet ici: [BTC 101 - Curriculum](https://academie.decouvrebitcoin.fr/wp-content/uploads/2022/07/BTC-101-Curriculum.pdf)

contributeur financier au lancement:

Contributeurs : Drikxe, Thomas, Samuel, Fabrice, Marco, OsyGeni, Gregory, Fabien, LounÃ¨s

Team crÃ©ateur

        LoÃ¯c Morel â€“ CrÃ©ation & production
        Rogzy â€“ Coordination
        Rachel â€“ Communication
        Pantamis â€“ Interview
        WillKek â€“ Chapitrage

---

A propose du prof.

Rogzy

Salut !

Bitcoin est un outil de libÃ©ration financiÃ¨re. En apprenant Ã  lâ€™utiliser, vous pouvez devenir votre propre banque, sortir du systÃ¨me traditionnel et regagner le contrÃ´le de votre Ã©pargne. La rÃ©volution Bitcoin est dÃ©jÃ  en marche et ne peut plus Ãªtre arrÃªtÃ©e.

Ã€ travers ce contenu gratuit, vous aurez toutes les cartes pour vous lancer et rÃ©ussir Ã  devenir un citoyen souverain et libre au 21Ã¨me siÃ¨cle.

Ã€ votre tour de vous lancer. Mes DM sont toujours ouvert si vous avez des questions !

Rogzy

Team contributeur:

        Rogzy â€“ production
        Lounes â€“ aide technique
        Silexperience â€“ design
        Sarah  â€“ Thumbnails

---

MatÃ©riel prÃ©requis

Nous allons crÃ©er nous-mÃªme notre nÅ“ud Bitcoin, ouvrir des canaux Lightning et essayer un portefeuille multi-signature. Ceci a un coÃ»t matÃ©riel non nÃ©gligeable pour certaines personnes. Sachez que la totalitÃ© de la formation peut Ãªtre suivie SANS le matÃ©riel. Vous ne serez pas perdu(e) si vous nâ€™avez pas votre propre nÅ“ud.

Si vous avez envie de vous lancer, voici les produits (lien affiliation) :

    Carte SD 16Go â€“ https://amzn.to/3Qi2Opm
    Raspberry Pi 4 â€“ https://amzn.to/3qoSUYl
    SSD 1To â€“ https://amzn.to/3jSvjLCâ€‹
    BoÃ®tier Externe pour Disque Dur â€“ https://amzn.to/3x5R02S
    RASPBERRY Alimentation â€“ https://amzn.to/3D36zvM
    Raspberry Pi FLIRC Case â€“ https://amzn.to/3TNllgi

Si vous Ãªtes passÃ©(e) par les liens dâ€™affiliations, merci de votre soutien ! Vous permettez Ã  ce projet de survivre et proposer toujours plus de formations et de contenus Ã©ducationnels.

Dâ€™autre solution deja toute faite existe !

-> Mettre les liens

---

Curriculum:

## introduction et disclaimer

## update des changements

# Section 1 : Noeud Bitcoin

## Chapitre 1 â€“ Devenir un Bitcoiner souverain

![Lancement de la formation](https://youtu.be/NF3SHhE1PFw?list=PLinTFKehfR4zoKvBcncHPr-ZTh1enuEhr)

## Chapitre 2 â€“ Quâ€™est-ce quâ€™un nÅ“ud Bitcoin ?

![qu'est ce qu'un noeud?](https://youtu.be/19YgL9vkHh4)

Les nÅ“uds Bitcoin reprÃ©sentent le rÃ©seau Bitcoin. Câ€™est donc le logiciel Bitcoin qui tourne sur une machine et qui se connecte Ã  lâ€™autre membre du rÃ©seau. Ensemble, ils forment Bitcoin en agissant sur les mÃªmes rÃ¨gles. Un nÅ“ud Ã  diffÃ©rentes fonctions :

    Garder un historique complet de la blockchain Bitcoin, environ 300GB en 2021
    Recevoir et envoyer toutes les nouvelles transactions du rÃ©seau, ces transactions sont stockÃ©es dans la MemPool du nÅ“ud
    Participer Ã  la gouvernance du rÃ©seau en respectant le consensus Bitcoin

Un nÅ“ud permet donc dâ€™avoir plus de vie privÃ©e, de se sÃ©parer de potentiels intermÃ©diaires de confiance et dâ€™avoir plus de dÃ©centralisation dans Bitcoin.

Un nÅ“ud ne permet pas de miner du bitcoin ou de gagner de lâ€™argent.

Ici, Umbrel via un Rasperrie Pi permettra Ã©galement dâ€™avoir un nÅ“ud Lightning Network.

## Chapitre 3 â€“ Tutoriel nÅ“ud Bitcoin via Umbrel

![Tuto umbrel](https://youtu.be/mr4iTzdTczI)

MatÃ©riel prÃ©requis

Dans cette formation, nous allons crÃ©er nous-mÃªme notre nÅ“ud Bitcoin, ouvrir des canaux lightning et essayer un portefeuille multi-signature.

Ceci a un coÃ»t matÃ©riel non nÃ©gligeable pour certaines personnes. Sachez que la totalitÃ© de la formation peut Ãªtre suivie SANS le matÃ©riel. Vous ne serez pas perdu si vous nâ€™avez pas votre propre nÅ“ud.

Si vous avez envie de vous lancer, voici les produits (liens dâ€™affiliations) :

    Boitier disque dur externe â€“ https://amzn.to/3rXmAKVâ€‹
    Carte SD 16Go â€“ https://amzn.to/2NApPsMâ€‹
    Raspberry Pi 4 â€“ https://amzn.to/2Nr5SVrâ€‹
    SSD 1To â€“ https://amzn.to/3jSvjLCâ€‹
    Source dâ€™alimentation â€“ https://amzn.to/3ao4FqU
    Boitier Pi â€“ https://amzn.to/2Zp3e5d

Si vous Ãªtes passÃ© par les liens dâ€™affiliations, merci de votre soutien ! Vous permettez Ã  ce projet de survivre et proposer toujours plus de formations et de contenus Ã©ducationnels.

Que faut-il pour faire tourner son nÅ“ud Bitcoin ?

    La blockchain est dâ€™environ 300GB, il faut donc prÃ©voir de lâ€™espace
    La connexion internet doit Ãªtre constante avec environ 30G de bande passante par mois
    Il faut de la RAM pour faire tourner BTC Core
    Il faut plus de RAM si lâ€™on fait tourner Umbrel et un nÅ“ud LN (minimum 4)

Vous pouvez donc faire tourner votre nÅ“ud Bitcoin directement sur votre ordinateur ou utiliser un systÃ¨me comme sur la vidÃ©o avec un Rasperrie Pi.

## Chapitre 4 â€“ Overview de Umbrel

![umbrel overview](https://youtu.be/cwEa61BgemM)

RÃ©sumÃ© :

Umbrel est un logiciel qui permet de faire tourner BTC Core et un nÅ“ud Lightning Network facilement. Une interface utilisateur agrÃ©able y est intÃ©grÃ©e et cette derniÃ¨re possÃ¨de de nombreuses fonctionnalitÃ©s :

    Gestion de nÅ“ud Lightning Network
    IntÃ©gration BTCPay
    MemPool
    Block Explorer
    Etcâ€¦

Câ€™est avec ce logiciel que nous allons explorer le reste du cours.

## Chapitre 5 â€“ Analyse de la MemPool

![mempool](https://youtu.be/0xS859IoMh8)

RÃ©sumÃ© :

La MemPool est lâ€™endroit dans votre nÅ“ud Bitcoin oÃ¹ toutes les transactions de bitcoins attendent dâ€™Ãªtre confirmÃ©es dans un bloc. Câ€™est donc une Ã©norme salle dâ€™attente oÃ¹ les transactions sont stockÃ©es. Le nÅ“ud reÃ§oit une transaction, vÃ©rifie si elle est valide et la stock sur la MemPool si câ€™est le cas. Une fois dans la MemPool, elle attend dâ€™Ãªtre inscrite dans un bloc par un mineur. Lorsque la transaction est dans le bloc, elle est retirÃ©e de la MemPool car elle est dÃ©sormais inscrite dans la blockchain. Tout le monde possÃ¨de une MemPool diffÃ©rente et indÃ©pendante car chaque nÅ“ud est unique.

## Chapitre 6 â€“ Block Explorer & Analyse Stats

![block explorer et analyse stat](https://youtu.be/Qe9VaUhUS0E)

RÃ©sumÃ© :

Votre nÅ“ud entier Bitcoin vous donne accÃ¨s Ã  lâ€™intÃ©gralitÃ© de lâ€™historique des transactions bitcoin. Via un block explorer, vous pouvez donc analyser cette donnÃ©e et auditer le passÃ©. Lorsquâ€™une transaction est dans un bloc, elle devient immuable dans le temps. Vous pouvez alors Ãªtre certain que ce que vous voyez depuis votre nÅ“ud Bitcoin sont des Ã¢mes Ã©crites dans lâ€™histoire, nâ€™en dÃ©plaise Ã  Big Brother. Le passÃ© ne peut Ãªtre modifiÃ©. Les blocs explorer peuvent donc vous donner des stats sur les transactions, lâ€™utilitÃ© du rÃ©seau, les blocs, les utilisateurs, les mineurs et bien dâ€™autres donnÃ©es. Câ€™est un outil indispensable pour des analystes.

## Chapitre 7 â€“ Connecter son portefeuille Ã  son nÅ“ud

![connecter osn portefeuille Ã  son noued](https://youtu.be/HOV3bVcram4)

RÃ©sumÃ© :

Votre nÅ“ud complet Bitcoin vous permet de couper les intermÃ©diaires de confiance entre votre portefeuille et le rÃ©seau Bitcoin. Vous devez donc connecter votre portefeuille mobile ou logiciel desktop Ã  votre nÅ“ud. Ceci se fait via des manipulations relativement simples et accessibles Ã  tous. Une fois connectÃ©, votre portefeuille transmettra les transactions via votre propre nÅ“ud/serveur Bitcoin.

## Chapitre 8 â€“ Les Portefeuille multi-sig via Specter

![les portefeuille multi sig](https://youtu.be/mV1KS-Uwjew)

RÃ©sumÃ© :

Un portefeuille multi-signature permet de diviser lâ€™accÃ¨s au coffre-fort Bitcoin par diffÃ©rentes clÃ©s privÃ©es. Câ€™est un systÃ¨me de sÃ©curitÃ© poussÃ© pour sourcer de larges sommes. Le but est de rendre lâ€™accÃ¨s Ã  lâ€™argent difficile. Cela pourrait empÃªcher de potentielles attaques Ã  5â‚¬ ou quâ€™un de vos associÃ©s parte avec lâ€™argent. Les portefeuilles multi-sig peuvent prendre de nombreuses formes. Par exemple, 2 clÃ©s sur 3 ou 3 clÃ©s sur 5 sont standards dans lâ€™industrie. A la crÃ©ation de votre portefeuille multi-sig, vous devrez choisir : â€“ le nombre de clÃ©s Ã  la crÃ©ation â€“ le nombre de clÃ©s nÃ©cessaires pour avoir accÃ¨s ou dÃ©placer lâ€™argent Par exemple, 2 clÃ©s sur 3 ou 3 clÃ©s sur 5 sont standards dans lâ€™industrie.

# Section 2 : Lightning Network

## Chapitre 9 â€“ Ouverture de canaux

![ouverture de canaux](https://youtu.be/bAZJn0AH1yU)

Lâ€™ouverture dâ€™un canal Lightning se fait avec une adresse Lightning directement via lâ€™intervalle de Umbrel sous LN ou en utilisant une application comme ThunderHub.

Voici la mienne : 02f1dd194c270b5ffeb9f3418ab5bd37e20e85107d97d0285ccdfebf5ee62c397b@nnqvu5yssejj2sthtnzwjxffv32pqsz3elynhrypzrp5f5gmofpijzad.onion:9735

Les frais sont donc une transaction on-chain donc profitez que la MemPool soit vide pour ouvrir des canaux. Une fois un canal ouvert, la liquiditÃ© est bloquÃ©e dâ€™un cÃ´tÃ© du canal. Afin de la dÃ©placer de lâ€™autre cÃ´tÃ©, nous allons procÃ©der Ã  un LOOP. Dans le Lightning Network, il y a des frais de routage. Si un canal se fait vider trop vite, vous pouvez les augmenter.

On nâ€™oublie pas de sauvegarder lâ€™Ã©tat de ces canaux et on pense aux watch tower.

## Chapitre 10 â€“ Gestion des canaux LN

![gestion des canaux LN](https://youtu.be/CgBnGQLar4o)

RÃ©sumÃ© :

La gestion de Canaux LN nâ€™est pas forcÃ©ment simple, il faut faire attention Ã  la liquiditÃ© et savoir rÃ©Ã©quilibrer cette derniÃ¨re. Des solutions comme Loop ou le rebalancing existe pour remplir cette tÃ¢che. Afin dâ€™analyser nos canaux, le routage et le reste, nous utilisons des solutions comme Ride The Lightning et ThunderHub. Nous regarderons ici comment les utiliser. Le plus important dans cette vidÃ©o est la section des frais. Dans le LN, il existe 2 type de frais : les frais fixes pour chaque routage et les frais variables en pourcentage ppm du montant routÃ©. On va regarder comment les modifier et bien les comprendre. La sÃ©curitÃ© dans LN est diffÃ©rente de celle on-chain, il faut donc comprendre les closes de fermeture et lâ€™utilisation de WatchTower.

## Chapitre 11 â€“ Renommer son nÅ“ud LN

![renommer son noeud LN](https://youtu.be/HnK1_TDYXsY)

RÃ©sumÃ© :
Changer lâ€™alias de votre nÅ“ud LN permet aux gens de vous reconnaitre dans le rÃ©seau, et puis câ€™est cool. On va donc regarder comment faire via des lignes de commande : Pour voir les instructions, clique ici ! Sinon, voici le processus :

    Ouvrez le terminal
    Tapez ssh -t umbrel@umbrel.local
    Entrez le mot de passe de votre Umbrel (on ne voit pas le mot de passe)
    Tapez sudo nano umbrel/lnd/lnd.conf
    Tapez votre mot de passe Ã  nouveau
    Sous la section Â« Application Options Â», rajoutez la ligne alias=SOMENAME et changez le SOMENAME par votre nom. On peut descendre de 12 flÃ¨ches vers le bas pour taper. Cliquer sur un terminal ne sert Ã  rien.
    Validez avec ctr-X
    Validez avec Y
    Validez avec entrer

Relancez votre Umbrel via le menu setting de lâ€™interface. Et voilÃ , vous avez changÃ© votre nom. Vous pouvez dÃ©sormais claim votre nÅ“ud sur 1ML ou Amboss : 1ML â€“ Vous devez ouvrir un canal avec le montant indiquÃ© ğŸ‘‰ Mon 1ML : https://1ml.com/node/02f1dd194c270b5ffeb9f3418ab5bd37e20e85107d97d0285ccdfebf5ee62c397b Ambos â€“ Vous devez signer une transaction avec votre nÅ“ud LN (faites-le depuis lâ€™interface de ThunderHub sous tools, message signÃ©) ğŸ‘‰ Mon Amboss : https://amboss.space/node/02f1dd194c270b5ffeb9f3418ab5bd37e20e85107d97d0285ccdfebf5ee62c397b ğŸ‘‰ Connecte ton nÅ“ud avec le mien ! 02f1dd194c270b5ffeb9f3418ab5bd37e20e85107d97d0285ccdfebf5ee62c397b@nnqvu5yssejj2sthtnzwjxffv32pqsz3elynhrypzrp5f5gmofpijzad.onion:9735 Bonne chance !

## rate formation

## Chapitre 12 â€“ Utilisation concrÃ¨te du LN

![utilisation du LN](https://youtu.be/6yekAvH13E0)

RÃ©sumÃ© :
Lâ€™utilisation du Lightning Network peut Ãªtre trÃ¨s simple avec des portefeuilles gratuits comme Wallet for Satoshi ou Blue Wallet. Ici, on utilise le wallet LN directement depuis Umbrel pour payer des invoice LN. Dans ce chapitre, on va donc payer des demandes Ã  1 SAT en passant par des nÅ“uds intermÃ©diaires et par notre propre canal. Finalement, on se rend compte que via le LN, on peut payer 0 frais lors de lâ€™envoi instantanÃ© de microtransactions. Ici, on sâ€™amuse Ã  payer 1 SAT par pixel par exemple.

## Chapitre 13 â€“ LN Market

video non existante

## Chapitre 14 â€“ Accepter Bitcoin avec BTCpay serveur

![accepter bticoin dans son commerce](https://youtu.be/zpCMlLfiRgg)

Dans ce dernier chapitre de la formation, nous allons regarder comment câ€™est possible dâ€™accepter Bitcoin pour son commerce. Nous regardons 2 options et 2 nÅ“uds diffÃ©rents. Le premier est BTCPay serveur via notre Umbrel, pui BTCPay via un nÅ“ud Luna externe et enfin via OpenNode. Il y a toujours des variations entre les 3 et ceci doit Ãªtre pris en compte par rapport Ã  vos besoins : â€“ Un restaurateur avec son Umbrel dans lâ€™Ã©tabliseement peut utiliser BTCpayer directement sous Tor â€“ Un e-commerce ne peut pas utiliser le BTCPay sous Tor de son nÅ“ud Umbrel donc il utilisera un nÅ“ud externe en clear net comme un Luna Node â€“ Une solution comme OpenNode permet dâ€™avoir une solution tout en un facile pour ne pas se prendre la tÃªte. Câ€™est complexe donc nous allons le traiter dans une formation indÃ©pendante. Voici les liens : â€“ OpenNode : https://www.opennode.com/ â€“ BTCPay Server : https://btcpayserver.org/ â€“ Luna Node : https://www.lunanode.com/ et https://docs.btcpayserver.org/Deployment/LunaNode/

Jâ€™ai Ã©galement pu interviewer Nicolas Dorier, le crÃ©ateur de BTCPay Server ! Pour ceux que Ã§a intÃ©resse, cliquez ici.

## conclusion

![conclusion](https://youtu.be/QrKbagtUE1s)

Et câ€™est la fin de la formation nÂ°2 !

Nous avons vu dans un premier temps les fondamentaux dâ€™un nÅ“ud Bitcoin, puis comment fonctionne la blockchain Bitcoin via la MemPool et les Block Explorer. La deuxiÃ¨me partie Ã©tait plutÃ´t sur le LN avec du routage, gestion de liquiditÃ© et utilisation du LN. On a terminÃ© dans la souffrance avec LN Market (soon) et BTC Pay Serveur (prochaine formation).

Jâ€™ai pas mal appris sur la production depuis donc on fera moins dâ€™erreurs pour la prochaine. Jâ€™espÃ¨re que vous avez appris plein de trucs et que vous Ãªtes satisfaits de lâ€™avoir suivie. Comme promis, elle est 100% gratuite, 14 chapitres avec 14 quiz dispos sur le site et la semaine pro sur le Teachable.

Si vous voulez soutenir ce genre de projet gratuit, câ€™est via le Patreon ou sur le site marchand qui sort bientÃ´t pour acheter votre blason/diplÃ´me Umbrel. Et oui, chez moi on achÃ¨te le diplÃ´me car dans tout les cas, lâ€™important ce nâ€™est pas le voyage mais la destination. DiplÃ´me sans valeur câ€™est vrai, mais câ€™est toujours fun dâ€™avoir un truc sur le mur.

Si vous avez fini et exÃ©cutÃ© la formation, un grand bravo ! Vous Ãªtes un bon bitcoiner et faites parti des 0,001% des franÃ§ais bitcoiner (on ne doit pas Ãªtre plus de 3 000).

Merci Ã  vous dâ€™Ãªtre restÃ©s jusquâ€™au bout et on se revoit trÃ¨s vite pour la prochaine formation !

## allez plus loins

Comment nous soutenir et aller plus loin !

Nâ€™hÃ©sitez pas Ã  vous abonnez Ã  notre newsletter, Ã§a fait toujours plaisir ! Pour ceux qui souhaitent nous soutenir, Ã§a se passe sur le Patreon !
